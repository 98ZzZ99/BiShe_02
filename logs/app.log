2025-08-24 11:45:50,865 [INFO] app - Program started | run_id=20250824-114550 | output_dir=F:\BiShe_02\output
2025-08-24 11:46:15,039 [INFO] graph - ENTER node=pre | raw_len=146
2025-08-24 11:46:15,039 [INFO] node.preprocess - start preprocess | raw=Filter data/hybrid_manufacturing_categorical.csv for columns with Processing_Time <= 50, and then sort by Machine_Availability in descending order
2025-08-24 11:46:15,687 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-24 11:46:15,688 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-24 11:46:15,689 [INFO] node.intent - intent.run | mode=llm
2025-08-24 11:46:22,216 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-24 11:46:22,222 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data/hybrid_manufacturing_categorical.csv
2025-08-24 11:46:22,222 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data/hybrid_manufacturing_categorical.csv
2025-08-24 11:46:22,224 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-08-24 11:46:22,224 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-24 11:46:24,265 [INFO] rag.kb - KB built | docs=42
2025-08-24 11:46:24,279 [INFO] rag.kb - KB search | q_len=159 | top_k=8
2025-08-24 11:46:24,279 [INFO] graph - route: kb -> qt
2025-08-24 11:46:24,281 [INFO] rag.thought - thought | prompt_chars=8989 | cols=13 | kb_snippets=8
2025-08-24 11:46:44,429 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-24 11:46:44,430 [INFO] rag.thought - thought | llm_json_len=329
2025-08-24 11:46:44,434 [INFO] rag.execute - ENTER execute | pending=2
2025-08-24 11:46:44,435 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'Processing_Time <= 50'} | cur_type=NoneType
2025-08-24 11:46:44,453 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-08-24 11:46:44,467 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-08-24 11:46:44,468 [INFO] rag.execute - ENTER execute | pending=1
2025-08-24 11:46:44,468 [INFO] rag.execute - RUN tool=sort_rows | args={'order': 'desc', 'on': 'Processing_Time', 'column': 'Machine_Availability'} | cur_type=DataFrame
2025-08-24 11:46:44,469 [INFO] rag.execute - OK tool=sort_rows | result_type=DataFrame
2025-08-24 11:46:44,476 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_sort_rows.csv
2025-08-24 11:46:44,476 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_02_sort_rows.csv
2025-08-24 11:46:44,476 [INFO] rag.qt - execute -> END
2025-08-24 11:46:44,477 [INFO] graph - route: qt -> summarizer
2025-08-24 11:46:46,835 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-24 11:46:46,836 [INFO] app - Program finished | run_id=20250824-114550
2025-08-24 12:18:29,075 [INFO] app - Program started | run_id=20250824-121829 | output_dir=F:\BiShe_02\output
2025-08-24 12:19:13,521 [INFO] graph - ENTER node=pre | raw_len=3
2025-08-24 12:19:13,521 [INFO] node.preprocess - start preprocess | raw=您说：
2025-08-24 12:19:13,537 [INFO] node.preprocess - preprocess | default_file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-24 12:19:13,537 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-24 12:19:13,537 [INFO] node.intent - intent.run | mode=llm
2025-08-24 12:19:20,792 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-24 12:19:20,795 [INFO] node.intent - intent.out | need_qt=0 need_anomaly=0 algos=0 csv=data\hybrid_manufacturing_categorical.csv
2025-08-24 12:19:20,795 [INFO] graph - node=intent | need_qt=0 need_anomaly=0 algos=0 csv=data\hybrid_manufacturing_categorical.csv
2025-08-24 12:19:20,796 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-08-24 12:19:20,796 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-24 12:19:22,826 [INFO] rag.kb - KB built | docs=42
2025-08-24 12:19:22,837 [INFO] rag.kb - KB search | q_len=3 | top_k=8
2025-08-24 12:19:22,837 [INFO] graph - route: kb -> summarizer
2025-08-24 12:19:23,488 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-24 12:19:23,490 [INFO] app - Program finished | run_id=20250824-121829
2025-08-24 12:19:50,587 [INFO] app - Program started | run_id=20250824-121950 | output_dir=F:\BiShe_02\output
2025-08-24 12:20:09,013 [INFO] graph - ENTER node=pre | raw_len=262
2025-08-24 12:20:09,022 [INFO] node.preprocess - start preprocess | raw=On data/hybrid_manufacturing_categorical.csv, keep rows where Processing_Time <= 40 AND Machine_Availability >= 95; then add a derived column efficiency = Material_Used / Processing_Time; finally sort by efficiency in descending order and return the top 10 rows.
2025-08-24 12:20:09,600 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-24 12:20:09,600 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-24 12:20:09,600 [INFO] node.intent - intent.run | mode=llm
2025-08-24 12:20:18,555 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-24 12:20:18,573 [INFO] node.intent - intent.out | need_qt=true need_anomaly=false algos=[] csv=data/hybrid_manufacturing_categorical.csv
2025-08-24 12:20:18,574 [INFO] graph - node=intent | need_qt=true need_anomaly=false algos=[] csv=data/hybrid_manufacturing_categorical.csv
2025-08-24 12:20:18,577 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-08-24 12:20:18,577 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-24 12:20:21,121 [INFO] rag.kb - KB built | docs=42
2025-08-24 12:20:21,178 [INFO] rag.kb - KB search | q_len=275 | top_k=8
2025-08-24 12:20:21,179 [INFO] graph - route: kb -> qt
2025-08-24 12:20:21,181 [INFO] rag.thought - thought | prompt_chars=9121 | cols=13 | kb_snippets=8
2025-08-24 12:20:50,565 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-24 12:20:50,567 [INFO] rag.thought - thought | llm_json_len=517
2025-08-24 12:20:50,569 [INFO] rag.execute - ENTER execute | pending=3
2025-08-24 12:20:50,570 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'Processing_Time <= 40 AND Machine_Availability >= 95'} | cur_type=NoneType
2025-08-24 12:20:50,596 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-08-24 12:20:50,605 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-08-24 12:20:50,606 [INFO] rag.execute - ENTER execute | pending=2
2025-08-24 12:20:50,606 [INFO] rag.execute - RUN tool=add_derived_column | args={'formula': 'Material_Used / Processing_Time', 'name': 'efficiency'} | cur_type=DataFrame
2025-08-24 12:20:50,610 [INFO] rag.execute - OK tool=add_derived_column | result_type=DataFrame
2025-08-24 12:20:50,617 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_add_derived_column.csv
2025-08-24 12:20:50,618 [INFO] rag.execute - ENTER execute | pending=1
2025-08-24 12:20:50,618 [INFO] rag.execute - RUN tool=sort_rows | args={'order': 'desc', 'return_top_n': 10, 'column': 'efficiency'} | cur_type=DataFrame
2025-08-24 12:20:50,619 [INFO] rag.execute - OK tool=sort_rows | result_type=DataFrame
2025-08-24 12:20:50,624 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_03_sort_rows.csv
2025-08-24 12:20:50,625 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_03_sort_rows.csv
2025-08-24 12:20:50,625 [INFO] rag.qt - execute -> END
2025-08-24 12:20:50,626 [INFO] graph - route: qt -> anomaly
2025-08-24 12:20:50,627 [INFO] rag.anomaly - anomaly.benchmark | path=data/hybrid_manufacturing_categorical.csv | top_q=0.020
2025-08-24 12:20:50,639 [INFO] rag.anomaly - dataset | rows=1000 cols(total)=13 cols(numeric)=4 has_y=False
2025-08-24 12:20:50,639 [INFO] rag.anomaly - algorithms | selected=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-08-24 12:20:52,498 [INFO] rag.anomaly - EIF grid done | variants=36 | best=1.0000 | time=1.86s
2025-08-24 12:20:52,498 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,498 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,498 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,498 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,498 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,499 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,499 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,499 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,499 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,499 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,499 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,499 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,499 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,499 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,499 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,500 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,500 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,500 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,500 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,500 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,500 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,500 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,500 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,500 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,500 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,501 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,501 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,501 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,501 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,501 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,501 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,501 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,501 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,502 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,502 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-24 12:20:52,502 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=nan | time=1.86s
2025-08-25 14:26:45,548 [INFO] app - Program started | run_id=20250825-142645 | output_dir=F:\BiShe_02\output
2025-08-25 14:29:01,753 [INFO] graph - ENTER node=pre | raw_len=262
2025-08-25 14:29:01,754 [INFO] node.preprocess - start preprocess | raw=On data/hybrid_manufacturing_categorical.csv, keep rows where Processing_Time <= 40 AND Machine_Availability >= 95; then add a derived column efficiency = Material_Used / Processing_Time; finally sort by efficiency in descending order and return the top 10 rows.
2025-08-25 14:29:01,956 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-25 14:29:01,956 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-25 14:29:01,957 [INFO] node.intent - intent.run | mode=llm
2025-08-25 14:29:11,605 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:29:11,609 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data/hybrid_manufacturing_categorical.csv
2025-08-25 14:29:11,609 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data/hybrid_manufacturing_categorical.csv
2025-08-25 14:29:11,611 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-08-25 14:29:11,611 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-25 14:29:13,806 [INFO] rag.kb - KB built | docs=42
2025-08-25 14:29:13,823 [INFO] rag.kb - KB search | q_len=275 | top_k=8
2025-08-25 14:29:13,823 [INFO] graph - route: kb -> qt
2025-08-25 14:29:13,825 [INFO] rag.thought - thought | prompt_chars=9121 | cols=13 | kb_snippets=8
2025-08-25 14:29:56,230 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:29:56,233 [INFO] rag.thought - thought | llm_json_len=615
2025-08-25 14:29:56,236 [INFO] rag.execute - ENTER execute | pending=4
2025-08-25 14:29:56,236 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'Processing_Time <= 40 AND Machine_Availability >= 95'} | cur_type=NoneType
2025-08-25 14:29:56,263 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-08-25 14:29:56,272 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-08-25 14:29:56,273 [INFO] rag.execute - ENTER execute | pending=3
2025-08-25 14:29:56,273 [INFO] rag.execute - RUN tool=add_derived_column | args={'formula': 'Material_Used / Processing_Time', 'name': 'efficiency'} | cur_type=DataFrame
2025-08-25 14:29:56,277 [INFO] rag.execute - OK tool=add_derived_column | result_type=DataFrame
2025-08-25 14:29:56,282 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_add_derived_column.csv
2025-08-25 14:29:56,284 [INFO] rag.execute - ENTER execute | pending=2
2025-08-25 14:29:56,284 [INFO] rag.execute - RUN tool=sort_rows | args={'order': 'desc', 'column': 'efficiency'} | cur_type=DataFrame
2025-08-25 14:29:56,285 [INFO] rag.execute - OK tool=sort_rows | result_type=DataFrame
2025-08-25 14:29:56,290 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_03_sort_rows.csv
2025-08-25 14:29:56,292 [INFO] rag.execute - ENTER execute | pending=1
2025-08-25 14:29:56,292 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'top_n', 'n': 10} | cur_type=DataFrame
2025-08-25 14:29:56,292 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 120, in select_rows
    raise ValueError("top_n 需要 column/sort_column")
ValueError: top_n 需要 column/sort_column
2025-08-25 14:29:56,294 [INFO] rag.thought - thought | prompt_chars=9121 | cols=13 | kb_snippets=8
2025-08-25 14:30:40,391 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:30:40,392 [INFO] rag.thought - thought | llm_json_len=641
2025-08-25 14:30:40,395 [INFO] rag.execute - ENTER execute | pending=4
2025-08-25 14:30:40,395 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'Processing_Time <= 40 AND Machine_Availability >= 95'} | cur_type=DataFrame
2025-08-25 14:30:40,401 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-08-25 14:30:40,407 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_04_select_rows.csv
2025-08-25 14:30:40,408 [INFO] rag.execute - ENTER execute | pending=3
2025-08-25 14:30:40,408 [INFO] rag.execute - RUN tool=add_derived_column | args={'formula': 'Material_Used / Processing_Time', 'name': 'efficiency'} | cur_type=DataFrame
2025-08-25 14:30:40,410 [INFO] rag.execute - OK tool=add_derived_column | result_type=DataFrame
2025-08-25 14:30:40,416 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_05_add_derived_column.csv
2025-08-25 14:30:40,417 [INFO] rag.execute - ENTER execute | pending=2
2025-08-25 14:30:40,417 [INFO] rag.execute - RUN tool=sort_rows | args={'order': 'desc', 'by2': 'Processing_Time', 'order2': 'desc', 'column': 'efficiency'} | cur_type=DataFrame
2025-08-25 14:30:40,418 [INFO] rag.execute - OK tool=sort_rows | result_type=DataFrame
2025-08-25 14:30:40,423 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_06_sort_rows.csv
2025-08-25 14:30:40,424 [INFO] rag.execute - ENTER execute | pending=1
2025-08-25 14:30:40,424 [INFO] rag.execute - RUN tool=top_n | args={'n': 10, 'order': 'desc'} | cur_type=DataFrame
2025-08-25 14:30:40,424 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 211, in top_n
    col = (_col(args, "column", "sort_column",
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 42, in _col
    raise KeyError(f"Need one of {names}")
KeyError: "Need one of ('column', 'sort_column', 'target_column')"
2025-08-25 14:30:40,425 [INFO] rag.thought - thought | prompt_chars=9121 | cols=13 | kb_snippets=8
2025-08-25 14:31:12,795 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:31:12,796 [INFO] rag.thought - thought | llm_json_len=510
2025-08-25 14:31:12,798 [INFO] rag.execute - ENTER execute | pending=3
2025-08-25 14:31:12,798 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'Processing_Time <= 40 AND Machine_Availability >= 95'} | cur_type=DataFrame
2025-08-25 14:31:12,802 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-08-25 14:31:12,808 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_07_select_rows.csv
2025-08-25 14:31:12,809 [INFO] rag.execute - ENTER execute | pending=2
2025-08-25 14:31:12,809 [INFO] rag.execute - RUN tool=add_derived_column | args={'formula': 'Material_Used / Processing_Time', 'name': 'efficiency'} | cur_type=DataFrame
2025-08-25 14:31:12,812 [INFO] rag.execute - OK tool=add_derived_column | result_type=DataFrame
2025-08-25 14:31:12,817 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_08_add_derived_column.csv
2025-08-25 14:31:12,818 [INFO] rag.execute - ENTER execute | pending=1
2025-08-25 14:31:12,818 [INFO] rag.execute - RUN tool=sort_rows | args={'order': 'desc', 'limit': 10, 'column': 'efficiency'} | cur_type=DataFrame
2025-08-25 14:31:12,818 [INFO] rag.execute - OK tool=sort_rows | result_type=DataFrame
2025-08-25 14:31:12,823 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_09_sort_rows.csv
2025-08-25 14:31:12,823 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_09_sort_rows.csv
2025-08-25 14:31:12,824 [INFO] rag.qt - execute -> END
2025-08-25 14:31:54,880 [INFO] app - Program started | run_id=20250825-143154 | output_dir=F:\BiShe_02\output
2025-08-25 14:32:57,543 [INFO] graph - ENTER node=pre | raw_len=281
2025-08-25 14:32:57,543 [INFO] node.preprocess - start preprocess | raw=For data/hybrid_manufacturing_categorical.csv, group by Machine_ID and compute the 90th percentile of Processing_Time (keep_all); then take group_top_n with n=2 by Processing_Time in descending order; finally select columns Machine_ID, Job_ID, Processing_Time, p90_Processing_Time.
2025-08-25 14:32:57,761 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-25 14:32:57,761 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-25 14:32:57,762 [INFO] node.intent - intent.run | mode=llm
2025-08-25 14:33:10,051 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:33:10,055 [INFO] node.intent - intent.out | need_qt=1 need_anomaly=0 algos=None csv=data/hybrid_manufacturing_categorical.csv
2025-08-25 14:33:10,056 [INFO] graph - node=intent | need_qt=1 need_anomaly=0 algos=None csv=data/hybrid_manufacturing_categorical.csv
2025-08-25 14:33:10,059 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-08-25 14:33:10,059 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-25 14:33:12,045 [INFO] rag.kb - KB built | docs=42
2025-08-25 14:33:12,065 [INFO] rag.kb - KB search | q_len=290 | top_k=8
2025-08-25 14:33:12,066 [INFO] graph - route: kb -> qt
2025-08-25 14:33:12,067 [INFO] rag.thought - thought | prompt_chars=8841 | cols=13 | kb_snippets=8
2025-08-25 14:33:51,939 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:33:51,941 [INFO] rag.thought - thought | llm_json_len=618
2025-08-25 14:33:51,945 [INFO] rag.execute - ENTER execute | pending=3
2025-08-25 14:33:51,945 [INFO] rag.execute - RUN tool=group_by_aggregate | args={'agg': 'percentile', 'q': 0.9, 'group_by': 'Machine_ID', 'keep_all': 'True', 'pair': 'Processing_Time'} | cur_type=NoneType
2025-08-25 14:33:51,956 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 333, in group_by_aggregate
    gcol = _col(args, "group_column")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 42, in _col
    raise KeyError(f"Need one of {names}")
KeyError: "Need one of ('group_column',)"
2025-08-25 14:33:51,959 [INFO] rag.thought - thought | prompt_chars=8841 | cols=13 | kb_snippets=8
2025-08-25 14:34:35,851 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:34:35,852 [INFO] rag.thought - thought | llm_json_len=618
2025-08-25 14:34:35,854 [INFO] rag.execute - ENTER execute | pending=2
2025-08-25 14:34:35,854 [INFO] rag.execute - RUN tool=group_top_n | args={'n': 2, 'order': 'desc', 'keep_all': 'True', 'column': 'Processing_Time'} | cur_type=NoneType
2025-08-25 14:34:35,865 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 224, in group_top_n
    g  = args["group_column"]
         ~~~~^^^^^^^^^^^^^^^^
KeyError: 'group_column'
2025-08-25 14:34:35,868 [INFO] rag.thought - thought | prompt_chars=8841 | cols=13 | kb_snippets=8
2025-08-25 14:35:11,154 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:35:11,155 [INFO] rag.thought - thought | llm_json_len=629
2025-08-25 14:35:11,157 [INFO] rag.execute - ENTER execute | pending=1
2025-08-25 14:35:11,157 [INFO] rag.execute - RUN tool=select_columns | args={'pair': 'Machine_ID, Job_ID, Processing_Time, Processing_Time'} | cur_type=NoneType
2025-08-25 14:35:11,171 [INFO] rag.execute - OK tool=select_columns | result_type=DataFrame
2025-08-25 14:35:11,178 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_columns.csv
2025-08-25 14:35:11,178 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_01_select_columns.csv
2025-08-25 14:35:11,178 [INFO] rag.qt - execute -> END
2025-08-25 14:35:11,180 [INFO] graph - route: qt -> summarizer
2025-08-25 14:35:14,484 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:35:14,485 [INFO] app - Program finished | run_id=20250825-143154
2025-08-25 14:39:27,955 [INFO] app - Program started | run_id=20250825-143927 | output_dir=F:\BiShe_02\output
2025-08-25 14:39:37,551 [INFO] graph - ENTER node=pre | raw_len=294
2025-08-25 14:39:37,551 [INFO] node.preprocess - start preprocess | raw=Using data/hybrid_manufacturing_categorical.csv, filter rows where Actual_Start is between 2023-03-18 10:00 and 2023-03-18 12:00 (inclusive); then compute rolling_average of Energy_Consumption with window=5; finally select columns time_stamp, Energy_Consumption, rolling_avg_Energy_Consumption.
2025-08-25 14:39:37,693 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-25 14:39:37,693 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-25 14:39:37,700 [INFO] node.intent - intent.run | mode=llm
2025-08-25 14:39:50,061 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:39:50,066 [INFO] node.intent - intent.out | need_qt=1 need_anomaly=0 algos=None csv=data/hybrid_manufacturing_categorical.csv
2025-08-25 14:39:50,066 [INFO] graph - node=intent | need_qt=1 need_anomaly=0 algos=None csv=data/hybrid_manufacturing_categorical.csv
2025-08-25 14:39:50,068 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-08-25 14:39:50,068 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-25 14:39:52,045 [INFO] rag.kb - KB built | docs=42
2025-08-25 14:39:52,063 [INFO] rag.kb - KB search | q_len=282 | top_k=8
2025-08-25 14:39:52,063 [INFO] graph - route: kb -> qt
2025-08-25 14:39:52,065 [INFO] rag.thought - thought | prompt_chars=9187 | cols=13 | kb_snippets=8
2025-08-25 14:42:09,386 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:42:09,386 [INFO] rag.thought - thought | llm_json_len=3
2025-08-25 14:42:09,386 [ERROR] rag.validator - JSON decode failed: Expecting value: line 1 column 1 (char 0)
2025-08-25 14:42:09,386 [INFO] rag.qt - validator -> thought (replan)
2025-08-25 14:42:09,386 [INFO] rag.thought - thought | prompt_chars=9187 | cols=13 | kb_snippets=8
2025-08-25 14:44:21,283 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:44:21,285 [INFO] rag.thought - thought | llm_json_len=3
2025-08-25 14:44:21,286 [ERROR] rag.validator - JSON decode failed: Expecting value: line 1 column 1 (char 0)
2025-08-25 14:44:21,286 [INFO] rag.qt - validator -> thought (replan)
2025-08-25 14:44:21,287 [INFO] rag.thought - thought | prompt_chars=9187 | cols=13 | kb_snippets=8
2025-08-25 14:46:32,107 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:46:32,108 [INFO] rag.thought - thought | llm_json_len=3
2025-08-25 14:46:32,110 [ERROR] rag.validator - JSON decode failed: Expecting value: line 1 column 1 (char 0)
2025-08-25 14:46:32,110 [INFO] rag.qt - validator -> thought (replan)
2025-08-25 14:46:32,111 [INFO] rag.thought - thought | prompt_chars=9187 | cols=13 | kb_snippets=8
2025-08-25 14:48:42,189 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:48:42,237 [INFO] rag.thought - thought | llm_json_len=7
2025-08-25 14:48:42,237 [WARNING] rag.validator - Exceeded max retry, giving up.
2025-08-25 14:48:42,237 [INFO] graph - route: qt -> summarizer
2025-08-25 14:48:45,300 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 14:48:45,300 [INFO] app - Program finished | run_id=20250825-143927
2025-08-25 15:06:17,951 [INFO] app - Program started | run_id=20250825-150617 | output_dir=F:\BiShe_02\output
2025-08-25 15:07:21,170 [INFO] graph - ENTER node=pre | raw_len=307
2025-08-25 15:07:21,170 [INFO] node.preprocess - start preprocess | raw=On data/hybrid_manufacturing_categorical.csv, calculate the average delay in hours as Scheduled_Start - Actual_Start and attach a per-row delay column; then keep rows where delay > 0.5 hours and sort by delay in descending order; also plot_concurrent_tasks_line with freq=30T to output/concurrent_30min.png.
2025-08-25 15:07:22,091 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-25 15:07:22,093 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-08-25 15:07:22,093 [INFO] node.intent - intent.run | mode=llm
2025-08-25 15:07:28,225 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:07:28,228 [INFO] node.intent - intent.out | need_qt=1 need_anomaly=0 algos=None csv=data/hybrid_manufacturing_categorical.csv
2025-08-25 15:07:28,228 [INFO] graph - node=intent | need_qt=1 need_anomaly=0 algos=None csv=data/hybrid_manufacturing_categorical.csv
2025-08-25 15:07:28,230 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-08-25 15:07:28,231 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-25 15:07:30,647 [INFO] rag.kb - KB built | docs=42
2025-08-25 15:07:30,734 [INFO] rag.kb - KB search | q_len=344 | top_k=8
2025-08-25 15:07:30,735 [INFO] graph - route: kb -> qt
2025-08-25 15:07:30,737 [INFO] rag.thought - thought | prompt_chars=9683 | cols=13 | kb_snippets=8
2025-08-25 15:08:14,324 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:08:14,326 [INFO] rag.thought - thought | llm_json_len=747
2025-08-25 15:08:14,328 [INFO] rag.execute - ENTER execute | pending=5
2025-08-25 15:08:14,329 [INFO] rag.execute - RUN tool=calculate_delay_avg_grouped | args={'group_column': 'Operation_Type', 'col1': 'Actual_Start', 'col2': 'Scheduled_Start'} | cur_type=NoneType
2025-08-25 15:08:14,339 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 477, in calculate_delay_avg_grouped
    dsec = (pd.to_datetime(df[args["column1"]]) -
                              ~~~~^^^^^^^^^^^
KeyError: 'column1'
2025-08-25 15:08:14,390 [INFO] rag.thought - thought | prompt_chars=9683 | cols=13 | kb_snippets=8
2025-08-25 15:09:00,095 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:09:00,095 [INFO] rag.thought - thought | llm_json_len=778
2025-08-25 15:09:00,095 [INFO] rag.execute - ENTER execute | pending=4
2025-08-25 15:09:00,095 [INFO] rag.execute - RUN tool=add_derived_column | args={'formula': 'Scheduled_Start - Actual_Start'} | cur_type=NoneType
2025-08-25 15:09:00,122 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 288, in add_derived_column
    df[args["name"]] = delta
       ~~~~^^^^^^^^
KeyError: 'name'
2025-08-25 15:09:00,124 [INFO] rag.thought - thought | prompt_chars=9683 | cols=13 | kb_snippets=8
2025-08-25 15:09:47,754 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:09:47,770 [INFO] rag.thought - thought | llm_json_len=813
2025-08-25 15:09:47,772 [INFO] rag.execute - ENTER execute | pending=3
2025-08-25 15:09:47,772 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'delay > 0.5'} | cur_type=NoneType
2025-08-25 15:09:47,786 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'delay'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 197, in select_rows
    return df[_BOPS[op_sym](df[col], val)]
                            ~~^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\frame.py", line 4107, in __getitem__
    indexer = self.columns.get_loc(key)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\indexes\base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'delay'
2025-08-25 15:09:47,857 [INFO] rag.thought - thought | prompt_chars=9683 | cols=13 | kb_snippets=8
2025-08-25 15:10:35,400 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:10:35,413 [INFO] rag.thought - thought | llm_json_len=775
2025-08-25 15:10:35,415 [INFO] rag.execute - ENTER execute | pending=2
2025-08-25 15:10:35,415 [INFO] rag.execute - RUN tool=sort_rows | args={'order': 'desc', 'column': 'delay'} | cur_type=NoneType
2025-08-25 15:10:35,426 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 207, in sort_rows
    return df.sort_values(col, ascending=asc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\frame.py", line 7196, in sort_values
    k = self._get_label_or_level_values(by[0], axis=axis)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\generic.py", line 1911, in _get_label_or_level_values
    raise KeyError(key)
KeyError: 'delay'
2025-08-25 15:10:35,467 [INFO] rag.thought - thought | prompt_chars=9683 | cols=13 | kb_snippets=8
2025-08-25 15:11:19,768 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:11:19,768 [INFO] rag.thought - thought | llm_json_len=775
2025-08-25 15:11:19,768 [INFO] rag.execute - ENTER execute | pending=1
2025-08-25 15:11:19,768 [INFO] rag.execute - RUN tool=plot_concurrent_tasks_line | args={'freq': '30T', 'file': 'output/concurrent_30min.png'} | cur_type=NoneType
2025-08-25 15:11:21,068 [INFO] rag.execute - OK tool=plot_concurrent_tasks_line | result_type=str
2025-08-25 15:11:21,068 [INFO] rag.execute - Q&T finished | last_csv=None
2025-08-25 15:11:21,068 [INFO] rag.qt - execute -> END
2025-08-25 15:11:21,068 [INFO] graph - route: qt -> summarizer
2025-08-25 15:11:23,904 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:11:23,904 [INFO] app - Program finished | run_id=20250825-150617
2025-08-25 15:15:55,711 [INFO] app - Program started | run_id=20250825-151555 | output_dir=F:\BiShe_02\output
2025-08-25 15:16:03,427 [INFO] graph - ENTER node=pre | raw_len=146
2025-08-25 15:16:03,427 [INFO] node.preprocess - start preprocess | raw=Run anomaly detection on data/SKAB/valve2 using EIF and OCSVM, and report the best model with the path to the exported Excel and PR/F1/ROC images.
2025-08-25 15:16:03,497 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve2 | cols=11
2025-08-25 15:16:03,505 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve2 | cols=11
2025-08-25 15:16:03,505 [INFO] node.intent - intent.run | mode=llm
2025-08-25 15:16:09,787 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:16:09,793 [INFO] node.intent - intent.out | need_qt=True need_anomaly=True algos=None csv=data/SKAB/valve2.csv
2025-08-25 15:16:09,793 [INFO] graph - node=intent | need_qt=True need_anomaly=True algos=None csv=data/SKAB/valve2.csv
2025-08-25 15:16:09,796 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-08-25 15:16:09,797 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-25 15:16:12,350 [INFO] rag.kb - KB built | docs=40
2025-08-25 15:16:12,434 [INFO] rag.kb - KB search | q_len=146 | top_k=8
2025-08-25 15:16:12,435 [INFO] graph - route: kb -> qt
2025-08-25 15:16:12,437 [INFO] rag.thought - thought | prompt_chars=8142 | cols=11 | kb_snippets=8
2025-08-25 15:17:59,324 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:17:59,324 [INFO] rag.thought - thought | llm_json_len=2056
2025-08-25 15:17:59,324 [ERROR] rag.validator - JSON decode failed: Expecting ',' delimiter: line 86 column 5 (char 1936)
2025-08-25 15:17:59,324 [INFO] rag.qt - validator -> thought (replan)
2025-08-25 15:17:59,339 [INFO] rag.thought - thought | prompt_chars=8142 | cols=11 | kb_snippets=8
2025-08-25 15:19:25,128 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:19:25,128 [INFO] rag.thought - thought | llm_json_len=1530
2025-08-25 15:19:25,128 [INFO] rag.execute - ENTER execute | pending=11
2025-08-25 15:19:25,128 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "column:anomaly, condition:='EIF'"} | cur_type=NoneType
2025-08-25 15:19:25,141 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 139, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-08-25 15:19:25,141 [INFO] rag.thought - thought | prompt_chars=8142 | cols=11 | kb_snippets=8
2025-08-25 15:21:11,981 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:21:11,981 [INFO] rag.thought - thought | llm_json_len=2059
2025-08-25 15:21:11,991 [INFO] rag.execute - ENTER execute | pending=10
2025-08-25 15:21:11,991 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "column:anomaly, condition:='OCSVM'"} | cur_type=NoneType
2025-08-25 15:21:11,997 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 139, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-08-25 15:21:12,003 [INFO] rag.thought - thought | prompt_chars=8142 | cols=11 | kb_snippets=8
2025-08-25 15:23:11,747 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:23:11,750 [INFO] rag.thought - thought | llm_json_len=2094
2025-08-25 15:23:11,752 [INFO] rag.execute - ENTER execute | pending=9
2025-08-25 15:23:11,752 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "column:anomaly, condition:='LOF'"} | cur_type=NoneType
2025-08-25 15:23:11,763 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 139, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-08-25 15:23:11,765 [INFO] rag.thought - thought | prompt_chars=8142 | cols=11 | kb_snippets=8
2025-08-25 15:25:07,792 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:25:07,793 [INFO] rag.thought - thought | llm_json_len=2094
2025-08-25 15:25:07,795 [INFO] rag.execute - ENTER execute | pending=8
2025-08-25 15:25:07,795 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "column:anomaly, condition:='COPOD'"} | cur_type=NoneType
2025-08-25 15:25:07,805 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 139, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-08-25 15:25:07,807 [INFO] rag.thought - thought | prompt_chars=8142 | cols=11 | kb_snippets=8
2025-08-25 15:26:57,079 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:26:57,080 [INFO] rag.thought - thought | llm_json_len=2056
2025-08-25 15:26:57,081 [INFO] rag.execute - ENTER execute | pending=7
2025-08-25 15:26:57,081 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "column:anomaly, condition:='INNE'"} | cur_type=NoneType
2025-08-25 15:26:57,092 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 139, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-08-25 15:26:57,093 [INFO] rag.thought - thought | prompt_chars=8142 | cols=11 | kb_snippets=8
2025-08-25 15:28:39,569 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:28:39,570 [INFO] rag.thought - thought | llm_json_len=2009
2025-08-25 15:28:39,572 [INFO] rag.execute - ENTER execute | pending=6
2025-08-25 15:28:39,572 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "column:anomaly, condition:='AE'"} | cur_type=NoneType
2025-08-25 15:28:39,583 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 139, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-08-25 15:28:39,584 [INFO] rag.thought - thought | prompt_chars=8142 | cols=11 | kb_snippets=8
2025-08-25 15:30:32,046 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:30:32,046 [INFO] rag.thought - thought | llm_json_len=1915
2025-08-25 15:30:32,046 [INFO] rag.execute - ENTER execute | pending=5
2025-08-25 15:30:32,046 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "column:anomaly, condition:='best_model'"} | cur_type=NoneType
2025-08-25 15:30:32,075 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 139, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-08-25 15:30:32,075 [INFO] rag.thought - thought | prompt_chars=8142 | cols=11 | kb_snippets=8
2025-08-25 15:32:21,032 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-25 15:32:21,032 [INFO] rag.thought - thought | llm_json_len=2018
2025-09-14 16:23:10,230 [INFO] app - Program started | run_id=20250914-162310 | output_dir=F:\BiShe_02\output
2025-09-14 16:30:55,813 [INFO] graph - ENTER node=pre | raw_len=58
2025-09-14 16:30:55,817 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithms on all dataset in file data\SKAB\valve1
2025-09-14 16:30:55,923 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 16:30:55,923 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 16:30:55,925 [INFO] node.intent - intent.run | mode=llm
2025-09-14 16:31:02,696 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 17:50:26,129 [INFO] app - Program started | run_id=20250914-175026 | output_dir=F:\BiShe_02\output
2025-09-14 17:50:33,424 [INFO] graph - ENTER node=pre | raw_len=58
2025-09-14 17:50:33,424 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithms on all dataset in file data\SKAB\valve1
2025-09-14 17:50:33,614 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 17:50:33,614 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 17:50:33,614 [INFO] node.intent - intent.run | mode=llm
2025-09-14 17:50:40,259 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 17:50:40,262 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\SKAB\valve1
2025-09-14 17:50:40,262 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\SKAB\valve1
2025-09-14 17:50:40,265 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-14 17:50:40,265 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-14 17:50:42,352 [INFO] rag.kb - KB built | docs=40
2025-09-14 17:50:42,366 [INFO] rag.kb - KB search | q_len=67 | top_k=8
2025-09-14 17:50:42,367 [INFO] graph - node=kb | snippets=8
2025-09-14 17:50:42,367 [INFO] graph - route: kb -> qt
2025-09-14 17:50:42,369 [INFO] rag.thought - thought | prompt_chars=8073 | cols=11 | kb_snippets=8
2025-09-14 17:51:09,272 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 17:51:09,273 [INFO] rag.thought - thought | llm_json_len=378
2025-09-14 17:51:09,274 [ERROR] rag.validator - JSON decode failed: Invalid \escape: line 6 column 48 (char 131)
2025-09-14 17:51:09,274 [INFO] rag.qt - validator -> thought (replan)
2025-09-14 17:51:09,275 [INFO] rag.thought - thought | prompt_chars=8073 | cols=11 | kb_snippets=8
2025-09-14 17:51:33,555 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 17:51:33,555 [INFO] rag.thought - thought | llm_json_len=378
2025-09-14 17:51:33,555 [ERROR] rag.validator - JSON decode failed: Invalid \escape: line 6 column 48 (char 131)
2025-09-14 17:51:33,555 [INFO] rag.qt - validator -> thought (replan)
2025-09-14 17:51:33,555 [INFO] rag.thought - thought | prompt_chars=8073 | cols=11 | kb_snippets=8
2025-09-14 17:52:19,249 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 17:52:19,251 [INFO] rag.thought - thought | llm_json_len=378
2025-09-14 17:52:19,252 [ERROR] rag.validator - JSON decode failed: Invalid \escape: line 6 column 48 (char 131)
2025-09-14 17:52:19,253 [INFO] rag.qt - validator -> thought (replan)
2025-09-14 17:52:19,254 [INFO] rag.thought - thought | prompt_chars=8073 | cols=11 | kb_snippets=8
2025-09-14 17:52:43,266 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 17:52:43,268 [INFO] rag.thought - thought | llm_json_len=378
2025-09-14 17:52:43,269 [WARNING] rag.validator - Exceeded max retry, giving up.
2025-09-14 17:52:43,270 [INFO] graph - route: qt -> summarizer
2025-09-14 17:52:46,203 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 17:52:46,205 [INFO] app - Program finished | run_id=20250914-175026
2025-09-14 19:23:30,889 [INFO] app - Program started | run_id=20250914-192330 | output_dir=F:\BiShe_02\output
2025-09-14 19:23:39,310 [INFO] graph - ENTER node=pre | raw_len=58
2025-09-14 19:23:39,310 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithms on all dataset in file data\SKAB\valve1
2025-09-14 19:23:39,596 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 19:23:39,596 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 19:23:39,598 [INFO] node.intent - intent.run | mode=llm
2025-09-14 19:23:46,279 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 19:23:46,284 [INFO] node.intent - intent.out | need_qt=True need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-14 19:23:46,284 [INFO] graph - node=intent | need_qt=True need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-14 19:23:46,286 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-14 19:23:46,286 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-14 19:23:48,412 [INFO] rag.kb - KB built | docs=40
2025-09-14 19:23:48,425 [INFO] rag.kb - KB search | q_len=67 | top_k=8
2025-09-14 19:23:48,425 [INFO] graph - node=kb | snippets=8
2025-09-14 19:23:48,426 [INFO] graph - route: kb -> qt
2025-09-14 19:23:48,427 [INFO] rag.thought - thought | prompt_chars=8073 | cols=11 | kb_snippets=8
2025-09-14 19:24:12,533 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 19:24:12,534 [INFO] rag.thought - thought | llm_json_len=378
2025-09-14 19:24:12,543 [INFO] rag.qt - validator -> thought (replan)
2025-09-14 19:24:12,544 [INFO] rag.thought - thought | prompt_chars=8073 | cols=11 | kb_snippets=8
2025-09-14 19:24:29,627 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 19:24:29,629 [INFO] rag.thought - thought | llm_json_len=271
2025-09-14 19:24:29,630 [INFO] rag.qt - validator -> thought (replan)
2025-09-14 19:24:29,630 [INFO] rag.thought - thought | prompt_chars=8073 | cols=11 | kb_snippets=8
2025-09-14 19:24:53,669 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 19:24:53,672 [INFO] rag.thought - thought | llm_json_len=378
2025-09-14 19:24:53,673 [INFO] rag.qt - validator -> thought (replan)
2025-09-14 19:24:53,674 [INFO] rag.thought - thought | prompt_chars=8073 | cols=11 | kb_snippets=8
2025-09-14 19:25:17,118 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 19:25:17,127 [INFO] rag.thought - thought | llm_json_len=378
2025-09-14 19:25:17,127 [WARNING] rag.validator - Exceeded max retry, giving up.
2025-09-14 19:25:17,127 [INFO] graph - route: qt -> anomaly
2025-09-14 19:25:17,127 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-14 19:25:17,294 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-14 19:25:17,296 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-14 19:26:06,100 [INFO] rag.anomaly - EIF grid done | variants=36 | best=0.5646 | time=48.80s
2025-09-14 19:26:06,100 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.10490034467256107 | time=48.80s
2025-09-14 19:26:06,106 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.10490034467256107 | time=48.80s
2025-09-14 19:26:06,113 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.10400119886108197 | time=48.80s
2025-09-14 19:26:06,119 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09890603926270043 | time=48.80s
2025-09-14 19:26:06,127 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09710774763974224 | time=48.80s
2025-09-14 19:26:06,133 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09351116439382587 | time=48.80s
2025-09-14 19:26:06,141 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.10100404615615166 | time=48.80s
2025-09-14 19:26:06,146 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.10040461561516559 | time=48.80s
2025-09-14 19:26:06,153 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09950546980368649 | time=48.80s
2025-09-14 19:26:06,159 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09830660872171437 | time=48.80s
2025-09-14 19:26:06,166 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09980518507417953 | time=48.80s
2025-09-14 19:26:06,172 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09740746291023528 | time=48.80s
2025-09-14 19:26:06,178 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.08811628952495129 | time=48.80s
2025-09-14 19:26:06,184 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.08781657425445827 | time=48.80s
2025-09-14 19:26:06,190 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.08601828263150008 | time=48.80s
2025-09-14 19:26:06,196 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.08421999100854188 | time=48.80s
2025-09-14 19:26:06,203 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.08481942154952794 | time=48.80s
2025-09-14 19:26:06,208 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.08601828263150008 | time=48.80s
2025-09-14 19:26:06,215 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09500974074629102 | time=48.80s
2025-09-14 19:26:06,224 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.10010490034467256 | time=48.80s
2025-09-14 19:26:06,235 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09800689345122134 | time=48.80s
2025-09-14 19:26:06,243 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09830660872171437 | time=48.80s
2025-09-14 19:26:06,252 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09500974074629102 | time=48.80s
2025-09-14 19:26:06,258 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09441031020530496 | time=48.80s
2025-09-14 19:26:06,264 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09351116439382587 | time=48.80s
2025-09-14 19:26:06,271 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09291173385283981 | time=48.80s
2025-09-14 19:26:06,277 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.09381087966431889 | time=48.80s
2025-09-14 19:26:06,283 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.07972426195114642 | time=48.80s
2025-09-14 19:26:06,289 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.07822568559868125 | time=48.80s
2025-09-14 19:26:06,294 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.07792597032818822 | time=48.80s
2025-09-14 19:26:06,301 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.07972426195114642 | time=48.80s
2025-09-14 19:26:06,308 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.08002397722163944 | time=48.80s
2025-09-14 19:26:06,314 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.07762625505769519 | time=48.80s
2025-09-14 19:26:06,321 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.03896298516409411 | time=48.80s
2025-09-14 19:26:06,328 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.03896298516409411 | time=48.80s
2025-09-14 19:26:06,334 [INFO] rag.anomaly - algo=EIF | pr_auc=nan | f1=0.03896298516409411 | time=48.80s
2025-09-14 19:26:06,344 [INFO] rag.anomaly - best algo=EIF[density|n=3|ss=256|t=800]
2025-09-14 19:27:06,523 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=37
2025-09-14 19:28:42,250 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-14 19:28:44,748 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 19:28:44,750 [INFO] app - Program finished | run_id=20250914-192330
2025-09-14 21:40:59,287 [INFO] app - Program started | run_id=20250914-214059 | output_dir=F:\BiShe_02\output
2025-09-14 21:41:07,270 [INFO] graph - ENTER node=pre | raw_len=27
2025-09-14 21:41:07,272 [INFO] node.preprocess - start preprocess | raw=Run EIF on data\SKAB\valve1
2025-09-14 21:41:07,283 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 21:41:07,283 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 21:41:07,284 [INFO] node.intent - intent.run | mode=llm
2025-09-14 21:41:14,624 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:41:14,628 [INFO] node.intent - intent.out | need_qt=True need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-14 21:41:14,628 [INFO] graph - node=intent | need_qt=True need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-14 21:41:14,630 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-14 21:41:14,630 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-14 21:41:16,791 [INFO] rag.kb - KB built | docs=40
2025-09-14 21:41:16,801 [INFO] rag.kb - KB search | q_len=27 | top_k=8
2025-09-14 21:41:16,802 [INFO] graph - node=kb | snippets=8
2025-09-14 21:41:16,802 [INFO] graph - route: kb -> qt
2025-09-14 21:41:16,803 [INFO] rag.thought - thought | prompt_chars=9033 | cols=11 | kb_snippets=8
2025-09-14 21:41:33,678 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:41:33,679 [INFO] rag.thought - thought | llm_json_len=256
2025-09-14 21:41:33,680 [INFO] rag.qt - validator -> thought (replan)
2025-09-14 21:41:33,681 [INFO] rag.thought - thought | prompt_chars=9033 | cols=11 | kb_snippets=8
2025-09-14 21:41:50,535 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:41:50,537 [INFO] rag.thought - thought | llm_json_len=256
2025-09-14 21:41:50,539 [INFO] rag.qt - validator -> thought (replan)
2025-09-14 21:41:50,540 [INFO] rag.thought - thought | prompt_chars=9033 | cols=11 | kb_snippets=8
2025-09-14 21:42:07,224 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:42:07,225 [INFO] rag.thought - thought | llm_json_len=256
2025-09-14 21:42:07,226 [INFO] rag.qt - validator -> thought (replan)
2025-09-14 21:42:07,227 [INFO] rag.thought - thought | prompt_chars=9033 | cols=11 | kb_snippets=8
2025-09-14 21:42:24,115 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:42:24,116 [INFO] rag.thought - thought | llm_json_len=256
2025-09-14 21:42:24,116 [WARNING] rag.validator - Exceeded max retry, giving up.
2025-09-14 21:42:24,117 [INFO] graph - route: qt -> anomaly
2025-09-14 21:42:24,119 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-14 21:42:24,215 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-14 21:42:24,216 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-14 21:42:24,920 [INFO] rag.anomaly - best algo=EIF
2025-09-14 21:42:26,488 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_1.xlsx | sheets=2
2025-09-14 21:42:30,469 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_1_pr_curve.png | f1=output\valve1_anomaly_results_1_f1_curve.png | roc=output\valve1_anomaly_results_1_roc_curve.png
2025-09-14 21:42:33,172 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:42:33,174 [INFO] app - Program finished | run_id=20250914-214059
2025-09-14 21:48:14,628 [INFO] app - Program started | run_id=20250914-214814 | output_dir=F:\BiShe_02\output
2025-09-14 21:49:23,606 [INFO] graph - ENTER node=pre | raw_len=63
2025-09-14 21:49:23,607 [INFO] node.preprocess - start preprocess | raw=Run EIF(n=3, ss=256, t=800, metric=density) on data\SKAB\valve1
2025-09-14 21:49:23,705 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 21:49:23,706 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 21:49:23,707 [INFO] node.intent - intent.run | mode=llm
2025-09-14 21:49:30,222 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:49:30,227 [INFO] node.intent - intent.out | need_qt=True need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-14 21:49:30,227 [INFO] graph - node=intent | need_qt=True need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-14 21:49:30,229 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-14 21:49:30,229 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-14 21:49:32,306 [INFO] rag.kb - KB built | docs=40
2025-09-14 21:49:32,318 [INFO] rag.kb - KB search | q_len=81 | top_k=8
2025-09-14 21:49:32,319 [INFO] graph - node=kb | snippets=8
2025-09-14 21:49:32,319 [INFO] graph - route: kb -> qt
2025-09-14 21:49:32,320 [INFO] rag.thought - thought | prompt_chars=8249 | cols=11 | kb_snippets=8
2025-09-14 21:49:44,324 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:49:44,325 [INFO] rag.thought - thought | llm_json_len=164
2025-09-14 21:49:44,326 [INFO] rag.qt - validator -> thought (replan)
2025-09-14 21:49:44,327 [INFO] rag.thought - thought | prompt_chars=8249 | cols=11 | kb_snippets=8
2025-09-14 21:49:56,273 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:49:56,274 [INFO] rag.thought - thought | llm_json_len=164
2025-09-14 21:49:56,275 [INFO] rag.qt - validator -> thought (replan)
2025-09-14 21:49:56,276 [INFO] rag.thought - thought | prompt_chars=8249 | cols=11 | kb_snippets=8
2025-09-14 21:50:08,150 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:50:08,152 [INFO] rag.thought - thought | llm_json_len=164
2025-09-14 21:50:08,153 [INFO] rag.qt - validator -> thought (replan)
2025-09-14 21:50:08,154 [INFO] rag.thought - thought | prompt_chars=8249 | cols=11 | kb_snippets=8
2025-09-14 21:50:20,147 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:50:20,148 [INFO] rag.thought - thought | llm_json_len=164
2025-09-14 21:50:20,149 [WARNING] rag.validator - Exceeded max retry, giving up.
2025-09-14 21:50:20,151 [INFO] graph - route: qt -> anomaly
2025-09-14 21:50:20,153 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-14 21:50:20,249 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-14 21:50:20,249 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-14 21:50:20,928 [INFO] rag.anomaly - best algo=EIF
2025-09-14 21:50:22,524 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-14 21:50:26,510 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-14 21:50:28,730 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:50:28,731 [INFO] app - Program finished | run_id=20250914-214814
2025-09-14 21:51:29,024 [INFO] app - Program started | run_id=20250914-215129 | output_dir=F:\BiShe_02\output
2025-09-14 21:51:48,634 [INFO] graph - ENTER node=pre | raw_len=63
2025-09-14 21:51:48,635 [INFO] node.preprocess - start preprocess | raw=Run EIF(n=3, ss=256, t=800, metric=density) on data\SKAB\valve1
2025-09-14 21:51:48,760 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 21:51:48,761 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 21:51:48,762 [INFO] node.intent - intent.run | mode=llm
2025-09-14 21:52:21,079 [INFO] app - Program started | run_id=20250914-215221 | output_dir=F:\BiShe_02\output
2025-09-14 21:52:45,943 [INFO] graph - ENTER node=pre | raw_len=63
2025-09-14 21:52:45,943 [INFO] node.preprocess - start preprocess | raw=Run EIF(n=5, ss=128, t=400, metric=density) on data\SKAB\valve1
2025-09-14 21:52:46,048 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 21:52:46,048 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-14 21:52:46,049 [INFO] node.intent - intent.run | mode=llm
2025-09-14 21:52:52,990 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:52:52,993 [INFO] node.intent - intent.out | need_qt=True need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-14 21:52:52,993 [INFO] graph - node=intent | need_qt=True need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-14 21:52:52,995 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-14 21:52:52,995 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-14 21:52:55,091 [INFO] rag.kb - KB built | docs=40
2025-09-14 21:52:55,105 [INFO] rag.kb - KB search | q_len=81 | top_k=8
2025-09-14 21:52:55,106 [INFO] graph - node=kb | snippets=8
2025-09-14 21:52:55,106 [INFO] graph - route: kb -> qt
2025-09-14 21:52:55,107 [INFO] rag.thought - thought | prompt_chars=8471 | cols=11 | kb_snippets=8
2025-09-14 21:53:02,246 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:53:02,247 [INFO] rag.thought - thought | llm_json_len=125
2025-09-14 21:53:02,249 [INFO] rag.execute - ENTER execute | pending=1
2025-09-14 21:53:02,249 [INFO] rag.execute - RUN tool=select_rows | args={'condition': '{Current: 5, Pressure: 128, Current: 400}'} | cur_type=NoneType
2025-09-14 21:53:02,267 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 143, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-09-14 21:53:02,268 [INFO] rag.thought - thought | prompt_chars=8471 | cols=11 | kb_snippets=8
2025-09-14 21:53:09,428 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:53:09,429 [INFO] rag.thought - thought | llm_json_len=125
2025-09-14 21:53:09,432 [INFO] rag.execute - ENTER execute | pending=1
2025-09-14 21:53:09,432 [INFO] rag.execute - RUN tool=select_rows | args={'condition': '{Current: 5, Pressure: 128, Current: 400}'} | cur_type=NoneType
2025-09-14 21:53:09,443 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 143, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-09-14 21:53:09,444 [INFO] rag.thought - thought | prompt_chars=8471 | cols=11 | kb_snippets=8
2025-09-14 21:53:16,370 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:53:16,373 [INFO] rag.thought - thought | llm_json_len=125
2025-09-14 21:53:16,374 [INFO] rag.execute - ENTER execute | pending=1
2025-09-14 21:53:16,375 [INFO] rag.execute - RUN tool=select_rows | args={'condition': '{Current: 5, Pressure: 128, Current: 400}'} | cur_type=NoneType
2025-09-14 21:53:16,387 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 143, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-09-14 21:53:16,388 [INFO] rag.thought - thought | prompt_chars=8471 | cols=11 | kb_snippets=8
2025-09-14 21:53:23,261 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:53:23,264 [INFO] rag.thought - thought | llm_json_len=125
2025-09-14 21:53:23,265 [WARNING] rag.validator - Exceeded max retry, giving up.
2025-09-14 21:53:23,266 [INFO] graph - route: qt -> anomaly
2025-09-14 21:53:23,267 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-14 21:53:23,363 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-14 21:53:23,363 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-14 21:53:24,050 [INFO] rag.anomaly - best algo=EIF
2025-09-14 21:53:25,645 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-14 21:53:29,637 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-14 21:53:32,027 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-14 21:53:32,028 [INFO] app - Program finished | run_id=20250914-215221
2025-09-22 17:06:06,150 [INFO] app - Program started | run_id=20250922-170606 | output_dir=F:\BiShe_02\output
2025-09-22 17:06:31,107 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 17:06:31,108 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 17:06:31,243 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 17:06:31,244 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 17:06:31,245 [INFO] node.intent - intent.run | mode=llm
2025-09-22 17:11:33,619 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 504 Gateway Timeout"
2025-09-22 17:15:10,630 [INFO] app - Program started | run_id=20250922-171510 | output_dir=F:\BiShe_02\output
2025-09-22 17:15:24,993 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 17:15:24,994 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 17:15:25,070 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 17:15:25,071 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 17:15:25,072 [INFO] node.intent - intent.run | mode=llm
2025-09-22 17:20:27,371 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 504 Gateway Timeout"
2025-09-22 17:25:29,932 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 504 Gateway Timeout"
2025-09-22 17:30:32,953 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 504 Gateway Timeout"
2025-09-22 17:40:34,841 [INFO] app - Program started | run_id=20250922-174034 | output_dir=F:\BiShe_02\output
2025-09-22 17:40:39,169 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 17:40:39,171 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 17:40:39,246 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 17:40:39,247 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 17:40:39,248 [INFO] node.intent - intent.run | mode=llm
2025-09-22 17:45:41,646 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 504 Gateway Timeout"
2025-09-22 17:50:44,254 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 504 Gateway Timeout"
2025-09-22 17:55:47,172 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 504 Gateway Timeout"
2025-09-22 20:40:24,462 [INFO] app - Program started | run_id=20250922-204024 | output_dir=F:\BiShe_02\output
2025-09-22 20:41:34,722 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 20:41:34,722 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 20:41:34,857 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 20:41:34,857 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 20:41:34,858 [INFO] node.intent - intent.run | mode=llm
2025-09-22 20:46:37,364 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 504 Gateway Timeout"
2025-09-22 20:56:12,697 [INFO] app - Program started | run_id=20250922-205612 | output_dir=F:\BiShe_02\output
2025-09-22 20:57:21,472 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 20:57:21,475 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 20:57:21,989 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 20:57:21,989 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 20:57:21,989 [INFO] node.intent - intent.run | mode=llm
2025-09-22 21:26:56,322 [INFO] app - Program started | run_id=20250922-212656 | output_dir=F:\BiShe_02\output
2025-09-22 21:27:03,097 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 21:27:03,098 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 21:27:03,173 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 21:27:03,173 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 21:27:03,174 [INFO] node.intent - intent.run | mode=llm
2025-09-22 21:32:05,535 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 504 Gateway Timeout"
2025-09-22 22:07:54,294 [INFO] app - Program started | run_id=20250922-220754 | output_dir=F:\BiShe_02\output
2025-09-22 22:08:05,300 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 22:08:05,300 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 22:08:05,379 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 22:08:05,380 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 22:08:05,381 [INFO] node.intent - intent.run | mode=llm
2025-09-22 22:13:07,681 [INFO] httpx - HTTP Request: POST https://integrate.api.nvidia.com/v1/chat/completions "HTTP/1.1 504 Gateway Timeout"
2025-09-22 22:29:39,364 [INFO] app - Program started | run_id=20250922-222939 | output_dir=F:\BiShe_02\output
2025-09-22 22:29:58,966 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 22:29:58,967 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 22:29:59,043 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 22:29:59,044 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 22:29:59,045 [INFO] node.intent - intent.run | mode=llm
2025-09-22 22:30:01,697 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-22 22:30:01,704 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 22:30:01,704 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 22:30:01,705 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-22 22:30:01,705 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-22 22:30:03,774 [INFO] rag.kb - KB built | docs=40
2025-09-22 22:30:03,788 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-22 22:30:03,788 [INFO] graph - node=kb | snippets=8
2025-09-22 22:30:03,789 [INFO] graph - route: kb -> anomaly
2025-09-22 22:30:03,790 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-22 22:30:03,891 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-22 22:30:03,891 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-22 22:30:04,366 [INFO] rag.anomaly - best algo=EIF
2025-09-22 22:30:06,046 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_3.xlsx | sheets=2
2025-09-22 22:30:11,490 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_3_pr_curve.png | f1=output\valve1_anomaly_results_3_f1_curve.png | roc=output\valve1_anomaly_results_3_roc_curve.png
2025-09-22 22:30:12,910 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-22 22:30:12,912 [INFO] app - Program finished | run_id=20250922-222939
2025-09-22 22:38:26,087 [INFO] app - Program started | run_id=20250922-223826 | output_dir=F:\BiShe_02\output
2025-09-22 22:38:53,458 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 22:38:53,458 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 22:38:53,536 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 22:38:53,536 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 22:38:53,537 [INFO] node.intent - intent.run | mode=llm
2025-09-22 22:38:56,208 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-22 22:38:56,212 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 22:38:56,212 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 22:38:56,214 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-22 22:38:56,214 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-22 22:38:58,275 [INFO] rag.kb - KB built | docs=40
2025-09-22 22:38:58,287 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-22 22:38:58,287 [INFO] graph - node=kb | snippets=8
2025-09-22 22:38:58,287 [INFO] graph - route: kb -> anomaly
2025-09-22 22:38:58,289 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-22 22:38:58,383 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-22 22:38:58,383 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-22 22:38:59,061 [INFO] rag.anomaly - best algo=EIF
2025-09-22 22:39:00,662 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_3.xlsx | sheets=2
2025-09-22 22:39:04,707 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_3_pr_curve.png | f1=output\valve1_anomaly_results_3_f1_curve.png | roc=output\valve1_anomaly_results_3_roc_curve.png
2025-09-22 22:39:06,075 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-22 22:39:06,076 [INFO] app - Program finished | run_id=20250922-223826
2025-09-22 23:20:09,248 [INFO] app - Program started | run_id=20250922-232009 | output_dir=F:\BiShe_02\output
2025-09-22 23:22:12,534 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 23:22:12,535 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 23:22:12,610 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:22:12,611 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:22:12,612 [INFO] node.intent - intent.run | mode=llm
2025-09-22 23:22:14,752 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-22 23:22:14,756 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:22:14,757 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:22:14,758 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-22 23:22:14,758 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-22 23:22:16,938 [INFO] rag.kb - KB built | docs=40
2025-09-22 23:22:16,950 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-22 23:22:16,950 [INFO] graph - node=kb | snippets=8
2025-09-22 23:22:16,951 [INFO] graph - route: kb -> anomaly
2025-09-22 23:22:16,952 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-22 23:22:17,044 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-22 23:22:17,045 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-22 23:22:17,390 [INFO] rag.anomaly - best algo=EIF
2025-09-22 23:22:18,964 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_3.xlsx | sheets=2
2025-09-22 23:22:22,875 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_3_pr_curve.png | f1=output\valve1_anomaly_results_3_f1_curve.png | roc=output\valve1_anomaly_results_3_roc_curve.png
2025-09-22 23:22:24,094 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-22 23:22:24,096 [INFO] app - Program finished | run_id=20250922-232009
2025-09-22 23:24:35,722 [INFO] app - Program started | run_id=20250922-232435 | output_dir=F:\BiShe_02\output
2025-09-22 23:24:46,037 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 23:24:46,037 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 23:24:46,114 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:24:46,115 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:24:46,116 [INFO] node.intent - intent.run | mode=llm
2025-09-22 23:24:48,608 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-22 23:24:48,611 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:24:48,612 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:24:48,614 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-22 23:24:48,614 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-22 23:24:50,893 [INFO] rag.kb - KB built | docs=40
2025-09-22 23:24:50,903 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-22 23:24:50,904 [INFO] graph - node=kb | snippets=8
2025-09-22 23:24:50,904 [INFO] graph - route: kb -> anomaly
2025-09-22 23:24:50,906 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-22 23:24:51,003 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-22 23:24:51,003 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-22 23:24:51,543 [INFO] rag.anomaly - best algo=EIF
2025-09-22 23:24:53,146 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_3.xlsx | sheets=2
2025-09-22 23:24:57,221 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_3_pr_curve.png | f1=output\valve1_anomaly_results_3_f1_curve.png | roc=output\valve1_anomaly_results_3_roc_curve.png
2025-09-22 23:24:58,357 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-22 23:24:58,360 [INFO] app - Program finished | run_id=20250922-232435
2025-09-22 23:26:19,987 [INFO] app - Program started | run_id=20250922-232619 | output_dir=F:\BiShe_02\output
2025-09-22 23:26:44,511 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 23:26:44,511 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 23:26:44,597 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:26:44,597 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:26:44,598 [INFO] node.intent - intent.run | mode=llm
2025-09-22 23:26:46,731 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-22 23:26:46,736 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:26:46,736 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:26:46,738 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-22 23:26:46,738 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-22 23:26:49,028 [INFO] rag.kb - KB built | docs=40
2025-09-22 23:26:49,040 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-22 23:26:49,040 [INFO] graph - node=kb | snippets=8
2025-09-22 23:26:49,041 [INFO] graph - route: kb -> anomaly
2025-09-22 23:26:49,042 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-22 23:26:49,137 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-22 23:26:49,137 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-22 23:26:49,810 [INFO] rag.anomaly - best algo=EIF
2025-09-22 23:26:51,393 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_3.xlsx | sheets=2
2025-09-22 23:26:55,406 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_3_pr_curve.png | f1=output\valve1_anomaly_results_3_f1_curve.png | roc=output\valve1_anomaly_results_3_roc_curve.png
2025-09-22 23:26:56,721 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-22 23:26:56,723 [INFO] app - Program finished | run_id=20250922-232619
2025-09-22 23:43:09,548 [INFO] app - Program started | run_id=20250922-234309 | output_dir=F:\BiShe_02\output
2025-09-22 23:45:13,166 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 23:45:13,167 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 23:45:13,252 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:45:13,253 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:45:13,253 [INFO] node.intent - intent.run | mode=llm
2025-09-22 23:45:16,041 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-22 23:45:16,044 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:45:16,045 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:45:16,046 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-22 23:45:16,046 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-22 23:45:18,035 [INFO] rag.kb - KB built | docs=40
2025-09-22 23:45:18,047 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-22 23:45:18,047 [INFO] graph - node=kb | snippets=8
2025-09-22 23:45:18,047 [INFO] graph - route: kb -> anomaly
2025-09-22 23:45:18,049 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-22 23:45:18,143 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-22 23:45:18,143 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-22 23:45:18,779 [INFO] rag.anomaly - best algo=EIF
2025-09-22 23:45:20,418 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_3.xlsx | sheets=2
2025-09-22 23:45:24,499 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_3_pr_curve.png | f1=output\valve1_anomaly_results_3_f1_curve.png | roc=output\valve1_anomaly_results_3_roc_curve.png
2025-09-22 23:45:25,542 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-22 23:45:25,543 [INFO] app - Program finished | run_id=20250922-234309
2025-09-22 23:47:22,764 [INFO] app - Program started | run_id=20250922-234722 | output_dir=F:\BiShe_02\output
2025-09-22 23:47:27,446 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 23:47:27,446 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 23:47:27,535 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:47:27,535 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:47:27,536 [INFO] node.intent - intent.run | mode=llm
2025-09-22 23:47:29,741 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-22 23:47:29,745 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:47:29,746 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:47:29,747 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-22 23:47:29,747 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-22 23:47:31,783 [INFO] rag.kb - KB built | docs=40
2025-09-22 23:47:31,795 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-22 23:47:31,795 [INFO] graph - node=kb | snippets=8
2025-09-22 23:47:31,796 [INFO] graph - route: kb -> anomaly
2025-09-22 23:47:31,798 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-22 23:47:31,892 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-22 23:47:31,893 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-22 23:47:32,126 [INFO] rag.anomaly - best algo=EIF
2025-09-22 23:47:33,772 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_3.xlsx | sheets=2
2025-09-22 23:47:37,937 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_3_pr_curve.png | f1=output\valve1_anomaly_results_3_f1_curve.png | roc=output\valve1_anomaly_results_3_roc_curve.png
2025-09-22 23:47:39,310 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-22 23:47:39,312 [INFO] app - Program finished | run_id=20250922-234722
2025-09-22 23:51:42,621 [INFO] app - Program started | run_id=20250922-235142 | output_dir=F:\BiShe_02\output
2025-09-22 23:51:47,994 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 23:51:47,995 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 23:51:48,083 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:51:48,083 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:51:48,084 [INFO] node.intent - intent.run | mode=llm
2025-09-22 23:51:50,360 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-22 23:51:50,366 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:51:50,366 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:51:50,368 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-22 23:51:50,368 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-22 23:51:52,400 [INFO] rag.kb - KB built | docs=40
2025-09-22 23:51:52,412 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-22 23:51:52,413 [INFO] graph - node=kb | snippets=8
2025-09-22 23:51:52,413 [INFO] graph - route: kb -> anomaly
2025-09-22 23:51:52,414 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-22 23:51:52,510 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-22 23:51:52,510 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-22 23:51:53,274 [INFO] rag.anomaly - best algo=EIF
2025-09-22 23:51:54,904 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_3.xlsx | sheets=2
2025-09-22 23:51:59,035 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_3_pr_curve.png | f1=output\valve1_anomaly_results_3_f1_curve.png | roc=output\valve1_anomaly_results_3_roc_curve.png
2025-09-22 23:52:00,332 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-22 23:52:00,335 [INFO] app - Program finished | run_id=20250922-235142
2025-09-22 23:55:40,867 [INFO] app - Program started | run_id=20250922-235540 | output_dir=F:\BiShe_02\output
2025-09-22 23:55:52,728 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 23:55:52,728 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 23:55:52,809 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:55:52,810 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:55:52,811 [INFO] node.intent - intent.run | mode=llm
2025-09-22 23:55:55,225 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-22 23:55:55,231 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:55:55,231 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:55:55,233 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-22 23:55:55,233 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-22 23:55:57,253 [INFO] rag.kb - KB built | docs=40
2025-09-22 23:55:57,263 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-22 23:55:57,264 [INFO] graph - node=kb | snippets=8
2025-09-22 23:55:57,264 [INFO] graph - route: kb -> anomaly
2025-09-22 23:55:57,265 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-22 23:55:57,357 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-22 23:55:57,357 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-22 23:55:57,778 [INFO] rag.anomaly - best algo=EIF
2025-09-22 23:55:59,353 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_3.xlsx | sheets=2
2025-09-22 23:56:03,310 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_3_pr_curve.png | f1=output\valve1_anomaly_results_3_f1_curve.png | roc=output\valve1_anomaly_results_3_roc_curve.png
2025-09-22 23:56:04,389 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-22 23:56:04,392 [INFO] app - Program finished | run_id=20250922-235540
2025-09-22 23:58:16,141 [INFO] app - Program started | run_id=20250922-235816 | output_dir=F:\BiShe_02\output
2025-09-22 23:58:19,832 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-22 23:58:19,832 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-22 23:58:19,908 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:58:19,909 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-22 23:58:19,910 [INFO] node.intent - intent.run | mode=llm
2025-09-22 23:58:22,837 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-22 23:58:22,842 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:58:22,842 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-22 23:58:22,845 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-22 23:58:22,845 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-22 23:58:24,900 [INFO] rag.kb - KB built | docs=40
2025-09-22 23:58:24,911 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-22 23:58:24,911 [INFO] graph - node=kb | snippets=8
2025-09-22 23:58:24,912 [INFO] graph - route: kb -> anomaly
2025-09-22 23:58:24,913 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-22 23:58:25,005 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-22 23:58:25,005 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-22 23:58:25,411 [INFO] rag.anomaly - best algo=EIF
2025-09-22 23:58:27,005 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_3.xlsx | sheets=2
2025-09-22 23:58:31,009 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_3_pr_curve.png | f1=output\valve1_anomaly_results_3_f1_curve.png | roc=output\valve1_anomaly_results_3_roc_curve.png
2025-09-22 23:58:32,490 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-22 23:58:32,493 [INFO] app - Program finished | run_id=20250922-235816
2025-09-22 23:59:59,790 [INFO] app - Program started | run_id=20250922-235959 | output_dir=F:\BiShe_02\output
2025-09-23 00:00:07,825 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 00:00:07,826 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 00:00:07,902 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:00:07,902 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:00:07,903 [INFO] node.intent - intent.run | mode=llm
2025-09-23 00:00:09,852 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 00:00:09,857 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:00:09,858 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:00:09,859 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 00:00:09,859 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 00:00:11,910 [INFO] rag.kb - KB built | docs=40
2025-09-23 00:00:11,920 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 00:00:11,920 [INFO] graph - node=kb | snippets=8
2025-09-23 00:00:11,922 [INFO] graph - route: kb -> anomaly
2025-09-23 00:00:11,923 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 00:00:12,014 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 00:00:12,015 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 00:00:12,364 [INFO] rag.anomaly - best algo=EIF
2025-09-23 00:00:13,922 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 00:00:17,884 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 00:00:18,994 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 00:00:18,996 [INFO] app - Program finished | run_id=20250922-235959
2025-09-23 00:01:54,147 [INFO] app - Program started | run_id=20250923-000154 | output_dir=F:\BiShe_02\output
2025-09-23 00:04:34,132 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 00:04:34,132 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 00:04:34,210 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:04:34,211 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:04:34,212 [INFO] node.intent - intent.run | mode=llm
2025-09-23 00:04:36,287 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 00:04:36,291 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:04:36,292 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:04:36,295 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 00:04:36,295 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 00:04:38,352 [INFO] rag.kb - KB built | docs=40
2025-09-23 00:04:38,364 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 00:04:38,364 [INFO] graph - node=kb | snippets=8
2025-09-23 00:04:38,365 [INFO] graph - route: kb -> anomaly
2025-09-23 00:04:38,366 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 00:04:38,457 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 00:04:38,458 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 00:04:38,779 [INFO] rag.anomaly - best algo=EIF
2025-09-23 00:04:40,348 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 00:04:44,262 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 00:04:45,547 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 00:04:45,550 [INFO] app - Program finished | run_id=20250923-000154
2025-09-23 00:06:31,088 [INFO] app - Program started | run_id=20250923-000631 | output_dir=F:\BiShe_02\output
2025-09-23 00:06:35,281 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 00:06:35,281 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 00:06:35,358 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:06:35,359 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:06:35,360 [INFO] node.intent - intent.run | mode=llm
2025-09-23 00:06:37,809 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 00:06:37,814 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:06:37,815 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:06:37,816 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 00:06:37,817 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 00:06:39,937 [INFO] rag.kb - KB built | docs=40
2025-09-23 00:06:39,948 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 00:06:39,948 [INFO] graph - node=kb | snippets=8
2025-09-23 00:06:39,949 [INFO] graph - route: kb -> anomaly
2025-09-23 00:06:39,950 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 00:06:40,044 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 00:06:40,044 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 00:06:40,190 [INFO] rag.anomaly - best algo=EIF
2025-09-23 00:06:41,754 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 00:06:45,681 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 00:06:46,929 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 00:06:46,930 [INFO] app - Program finished | run_id=20250923-000631
2025-09-23 00:19:19,472 [INFO] app - Program started | run_id=20250923-001919 | output_dir=F:\BiShe_02\output
2025-09-23 00:19:23,111 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 00:19:23,111 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 00:19:23,201 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:19:23,201 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:19:23,202 [INFO] node.intent - intent.run | mode=llm
2025-09-23 00:19:25,395 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 00:19:25,400 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:19:25,401 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:19:25,402 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 00:19:25,403 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 00:19:27,460 [INFO] rag.kb - KB built | docs=40
2025-09-23 00:19:27,472 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 00:19:27,473 [INFO] graph - node=kb | snippets=8
2025-09-23 00:19:27,473 [INFO] graph - route: kb -> anomaly
2025-09-23 00:19:27,474 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 00:19:27,569 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 00:19:27,570 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 00:19:27,731 [INFO] rag.anomaly - best algo=EIF
2025-09-23 00:19:29,338 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 00:19:33,315 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 00:19:34,454 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 00:19:34,456 [INFO] app - Program finished | run_id=20250923-001919
2025-09-23 00:28:46,671 [INFO] app - Program started | run_id=20250923-002846 | output_dir=F:\BiShe_02\output
2025-09-23 00:28:51,137 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 00:28:51,137 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 00:28:51,219 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:28:51,219 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:28:51,220 [INFO] node.intent - intent.run | mode=llm
2025-09-23 00:28:53,187 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 00:28:53,191 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:28:53,192 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:28:53,193 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 00:28:53,193 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 00:28:55,216 [INFO] rag.kb - KB built | docs=40
2025-09-23 00:28:55,228 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 00:28:55,228 [INFO] graph - node=kb | snippets=8
2025-09-23 00:28:55,229 [INFO] graph - route: kb -> anomaly
2025-09-23 00:28:55,230 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 00:28:55,325 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 00:28:55,325 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 00:28:55,505 [INFO] rag.anomaly - best algo=EIF
2025-09-23 00:28:57,085 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 00:29:01,059 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 00:29:02,497 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 00:29:02,500 [INFO] app - Program finished | run_id=20250923-002846
2025-09-23 00:30:48,116 [INFO] app - Program started | run_id=20250923-003048 | output_dir=F:\BiShe_02\output
2025-09-23 00:30:56,413 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 00:30:56,413 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 00:30:56,491 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:30:56,492 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:30:56,493 [INFO] node.intent - intent.run | mode=llm
2025-09-23 00:30:58,625 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 00:30:58,629 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:30:58,629 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:30:58,631 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 00:30:58,631 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 00:31:00,668 [INFO] rag.kb - KB built | docs=40
2025-09-23 00:31:00,679 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 00:31:00,680 [INFO] graph - node=kb | snippets=8
2025-09-23 00:31:00,680 [INFO] graph - route: kb -> anomaly
2025-09-23 00:31:00,681 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 00:31:00,773 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 00:31:00,773 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 00:31:00,992 [INFO] rag.anomaly - best algo=EIF
2025-09-23 00:31:02,571 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 00:31:06,510 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 00:31:07,658 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 00:31:07,660 [INFO] app - Program finished | run_id=20250923-003048
2025-09-23 00:32:44,344 [INFO] app - Program started | run_id=20250923-003244 | output_dir=F:\BiShe_02\output
2025-09-23 00:32:46,965 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 00:32:46,965 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 00:32:47,044 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:32:47,044 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:32:47,045 [INFO] node.intent - intent.run | mode=llm
2025-09-23 00:32:49,017 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 00:32:49,023 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:32:49,023 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:32:49,025 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 00:32:49,025 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 00:32:51,036 [INFO] rag.kb - KB built | docs=40
2025-09-23 00:32:51,048 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 00:32:51,049 [INFO] graph - node=kb | snippets=8
2025-09-23 00:32:51,049 [INFO] graph - route: kb -> anomaly
2025-09-23 00:32:51,050 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 00:32:51,142 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 00:32:51,142 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 00:32:51,371 [INFO] rag.anomaly - best algo=EIF
2025-09-23 00:32:52,956 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 00:32:56,914 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 00:32:58,375 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 00:32:58,377 [INFO] app - Program finished | run_id=20250923-003244
2025-09-23 00:35:54,548 [INFO] app - Program started | run_id=20250923-003554 | output_dir=F:\BiShe_02\output
2025-09-23 00:36:10,766 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 00:36:10,767 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 00:36:10,843 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:36:10,844 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:36:10,845 [INFO] node.intent - intent.run | mode=llm
2025-09-23 00:36:12,993 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 00:36:12,997 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:36:12,997 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:36:13,000 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 00:36:13,000 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 00:36:15,061 [INFO] rag.kb - KB built | docs=40
2025-09-23 00:36:15,073 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 00:36:15,074 [INFO] graph - node=kb | snippets=8
2025-09-23 00:36:15,074 [INFO] graph - route: kb -> anomaly
2025-09-23 00:36:15,076 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 00:36:15,175 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 00:36:15,175 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 00:36:15,430 [INFO] rag.anomaly - best algo=EIF
2025-09-23 00:36:18,152 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 00:36:25,381 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 00:36:26,588 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 00:36:26,591 [INFO] app - Program finished | run_id=20250923-003554
2025-09-23 00:53:51,577 [INFO] app - Program started | run_id=20250923-005351 | output_dir=F:\BiShe_02\output
2025-09-23 00:53:55,446 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 00:53:55,446 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 00:53:55,520 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:53:55,520 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 00:53:55,521 [INFO] node.intent - intent.run | mode=llm
2025-09-23 00:53:58,517 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 00:53:58,521 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:53:58,521 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 00:53:58,523 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 00:53:58,523 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 00:54:00,551 [INFO] rag.kb - KB built | docs=40
2025-09-23 00:54:00,562 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 00:54:00,562 [INFO] graph - node=kb | snippets=8
2025-09-23 00:54:00,562 [INFO] graph - route: kb -> anomaly
2025-09-23 00:54:00,564 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 00:54:00,657 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 00:54:00,657 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 00:54:00,909 [INFO] rag.anomaly - best algo=EIF
2025-09-23 00:54:02,476 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 00:54:06,469 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 00:54:07,689 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 00:54:07,691 [INFO] app - Program finished | run_id=20250923-005351
2025-09-23 01:07:58,519 [INFO] app - Program started | run_id=20250923-010758 | output_dir=F:\BiShe_02\output
2025-09-23 01:08:32,471 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 01:08:32,472 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 01:08:32,557 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 01:08:32,558 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 01:08:32,559 [INFO] node.intent - intent.run | mode=llm
2025-09-23 01:08:35,040 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 01:08:35,045 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 01:08:35,046 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 01:08:35,049 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 01:08:35,049 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 01:08:37,385 [INFO] rag.kb - KB built | docs=40
2025-09-23 01:08:37,397 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 01:08:37,397 [INFO] graph - node=kb | snippets=8
2025-09-23 01:08:37,398 [INFO] graph - route: kb -> anomaly
2025-09-23 01:08:37,399 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 01:08:37,490 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 01:08:37,490 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 01:08:37,757 [INFO] rag.anomaly - best algo=EIF
2025-09-23 01:08:39,316 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 01:08:43,266 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 01:08:44,550 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 01:08:44,553 [INFO] app - Program finished | run_id=20250923-010758
2025-09-23 01:13:51,903 [INFO] app - Program started | run_id=20250923-011351 | output_dir=F:\BiShe_02\output
2025-09-23 01:14:00,057 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 01:14:00,058 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 01:14:00,126 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 01:14:00,126 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 01:14:00,126 [INFO] node.intent - intent.run | mode=llm
2025-09-23 01:14:04,211 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 01:14:04,214 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 01:14:04,214 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 01:14:04,216 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 01:14:04,216 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 01:14:06,655 [INFO] rag.kb - KB built | docs=40
2025-09-23 01:14:06,684 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 01:14:06,684 [INFO] graph - node=kb | snippets=8
2025-09-23 01:14:06,685 [INFO] graph - route: kb -> anomaly
2025-09-23 01:14:06,686 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 01:14:06,827 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 01:14:06,827 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 01:14:07,363 [INFO] rag.anomaly - best algo=EIF
2025-09-23 01:14:10,250 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 01:14:17,175 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 01:14:18,398 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 01:14:18,400 [INFO] app - Program finished | run_id=20250923-011351
2025-09-23 01:15:23,949 [INFO] app - Program started | run_id=20250923-011523 | output_dir=F:\BiShe_02\output
2025-09-23 01:15:28,185 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 01:15:28,186 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 01:15:28,263 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 01:15:28,263 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 01:15:28,264 [INFO] node.intent - intent.run | mode=llm
2025-09-23 01:15:30,301 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 01:15:30,307 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 01:15:30,307 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 01:15:30,309 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 01:15:30,310 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 01:15:32,444 [INFO] rag.kb - KB built | docs=40
2025-09-23 01:15:32,455 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 01:15:32,455 [INFO] graph - node=kb | snippets=8
2025-09-23 01:15:32,456 [INFO] graph - route: kb -> anomaly
2025-09-23 01:15:32,457 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 01:15:32,549 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 01:15:32,549 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 01:15:32,818 [INFO] rag.anomaly - best algo=EIF
2025-09-23 01:15:34,367 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 01:15:38,310 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 01:15:39,699 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 01:15:39,702 [INFO] app - Program finished | run_id=20250923-011523
2025-09-23 01:22:54,939 [INFO] app - Program started | run_id=20250923-012254 | output_dir=F:\BiShe_02\output
2025-09-23 01:23:00,696 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 01:23:00,697 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 01:23:00,773 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 01:23:00,774 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 01:23:00,775 [INFO] node.intent - intent.run | mode=llm
2025-09-23 01:23:03,317 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 01:23:03,322 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 01:23:03,322 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 01:23:03,325 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 01:23:03,325 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 01:23:05,490 [INFO] rag.kb - KB built | docs=40
2025-09-23 01:23:05,500 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 01:23:05,501 [INFO] graph - node=kb | snippets=8
2025-09-23 01:23:05,501 [INFO] graph - route: kb -> anomaly
2025-09-23 01:23:05,503 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 01:23:05,595 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 01:23:05,595 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 01:23:05,833 [INFO] rag.anomaly - best algo=EIF
2025-09-23 01:23:07,420 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 01:23:11,398 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 01:23:12,622 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 01:23:12,625 [INFO] app - Program finished | run_id=20250923-012254
2025-09-23 01:24:34,745 [INFO] app - Program started | run_id=20250923-012434 | output_dir=F:\BiShe_02\output
2025-09-23 01:24:52,042 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 01:24:52,043 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 01:24:52,121 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 01:24:52,122 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 01:24:52,123 [INFO] node.intent - intent.run | mode=llm
2025-09-23 01:24:56,838 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 01:24:56,843 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 01:24:56,843 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 01:24:56,845 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 01:24:56,845 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 01:24:58,892 [INFO] rag.kb - KB built | docs=40
2025-09-23 01:24:58,904 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 01:24:58,904 [INFO] graph - node=kb | snippets=8
2025-09-23 01:24:58,904 [INFO] graph - route: kb -> anomaly
2025-09-23 01:24:58,906 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 01:24:58,998 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 01:24:58,998 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 01:24:59,261 [INFO] rag.anomaly - best algo=EIF
2025-09-23 01:25:00,820 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 01:25:04,804 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 01:25:06,027 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 01:25:06,029 [INFO] app - Program finished | run_id=20250923-012434
2025-09-23 01:26:34,826 [INFO] app - Program started | run_id=20250923-012634 | output_dir=F:\BiShe_02\output
2025-09-23 01:26:47,739 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-23 01:26:47,739 [INFO] node.preprocess - start preprocess | raw=Run EIF algorithm anomaly detection on dataset in data\SKAB\valve1
2025-09-23 01:26:47,812 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 01:26:47,813 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 01:26:47,814 [INFO] node.intent - intent.run | mode=llm
2025-09-23 01:26:49,956 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 01:26:49,959 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 01:26:49,960 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 01:26:49,961 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 01:26:49,961 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 01:26:51,976 [INFO] rag.kb - KB built | docs=40
2025-09-23 01:26:51,988 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-23 01:26:51,989 [INFO] graph - node=kb | snippets=8
2025-09-23 01:26:51,989 [INFO] graph - route: kb -> anomaly
2025-09-23 01:26:51,991 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 01:26:52,088 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 01:26:52,089 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 01:26:52,332 [INFO] rag.anomaly - best algo=EIF
2025-09-23 01:26:55,026 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 01:27:00,370 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 01:27:01,566 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 01:27:01,567 [INFO] app - Program finished | run_id=20250923-012634
2025-09-23 17:19:23,438 [INFO] app - Program started | run_id=20250923-171923 | output_dir=F:\BiShe_02\output
2025-09-23 17:20:00,717 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-23 17:20:00,718 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-23 17:20:00,867 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 17:20:00,867 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 17:20:00,868 [INFO] node.intent - intent.run | mode=llm
2025-09-23 17:20:03,702 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 17:20:03,708 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 17:20:03,709 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 17:20:03,710 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 17:20:03,710 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 17:20:05,745 [INFO] rag.kb - KB built | docs=40
2025-09-23 17:20:05,758 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-23 17:20:05,759 [INFO] graph - node=kb | snippets=8
2025-09-23 17:20:05,759 [INFO] graph - route: kb -> anomaly
2025-09-23 17:20:05,761 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 17:20:06,227 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 17:20:06,227 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 17:20:06,705 [INFO] rag.anomaly - best algo=LOF
2025-09-23 17:20:08,384 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-09-23 17:20:15,039 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-09-23 17:20:16,562 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 17:20:16,562 [INFO] app - Program finished | run_id=20250923-171923
2025-09-23 17:21:59,020 [INFO] app - Program started | run_id=20250923-172159 | output_dir=F:\BiShe_02\output
2025-09-23 17:23:43,148 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-23 17:23:43,149 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-23 17:23:43,204 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 17:23:43,204 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 17:23:43,205 [INFO] node.intent - intent.run | mode=llm
2025-09-23 17:23:45,868 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 17:23:45,873 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 17:23:45,874 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 17:23:45,877 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 17:23:45,877 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 17:23:47,959 [INFO] rag.kb - KB built | docs=40
2025-09-23 17:23:47,970 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-23 17:23:47,970 [INFO] graph - node=kb | snippets=8
2025-09-23 17:23:47,971 [INFO] graph - route: kb -> anomaly
2025-09-23 17:23:47,972 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 17:23:48,067 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 17:23:48,067 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 17:23:48,711 [INFO] rag.anomaly - best algo=LOF
2025-09-23 17:23:51,964 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-23 17:23:57,146 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-23 17:24:00,835 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 17:24:00,837 [INFO] app - Program finished | run_id=20250923-172159
2025-09-23 17:25:41,800 [INFO] app - Program started | run_id=20250923-172541 | output_dir=F:\BiShe_02\output
2025-09-23 17:25:53,231 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-23 17:25:53,232 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-23 17:25:53,292 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 17:25:53,292 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 17:25:53,293 [INFO] node.intent - intent.run | mode=llm
2025-09-23 17:25:56,344 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 17:25:56,348 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 17:25:56,349 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 17:25:56,351 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 17:25:56,351 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 17:25:58,545 [INFO] rag.kb - KB built | docs=40
2025-09-23 17:25:58,556 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-23 17:25:58,557 [INFO] graph - node=kb | snippets=8
2025-09-23 17:25:58,557 [INFO] graph - route: kb -> anomaly
2025-09-23 17:25:58,558 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 17:25:58,649 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 17:25:58,650 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 17:25:59,496 [INFO] rag.anomaly - best algo=LOF
2025-09-23 17:26:01,046 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-23 17:26:04,906 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-23 17:26:06,453 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 17:26:06,455 [INFO] app - Program finished | run_id=20250923-172541
2025-09-23 17:30:22,053 [INFO] app - Program started | run_id=20250923-173022 | output_dir=F:\BiShe_02\output
2025-09-23 17:30:30,579 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-23 17:30:30,580 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-23 17:30:30,639 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 17:30:30,639 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 17:30:30,641 [INFO] node.intent - intent.run | mode=llm
2025-09-23 17:30:33,315 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 17:30:33,319 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 17:30:33,320 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 17:30:33,321 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 17:30:33,322 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 17:30:35,522 [INFO] rag.kb - KB built | docs=40
2025-09-23 17:30:35,532 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-23 17:30:35,532 [INFO] graph - node=kb | snippets=8
2025-09-23 17:30:35,532 [INFO] graph - route: kb -> anomaly
2025-09-23 17:30:35,534 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 17:30:35,627 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 17:30:35,627 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 17:30:36,730 [INFO] rag.anomaly - best algo=LOF
2025-09-23 17:30:38,282 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-23 17:30:42,227 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-23 17:30:50,023 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 17:30:50,026 [INFO] app - Program finished | run_id=20250923-173022
2025-09-23 17:32:09,858 [INFO] app - Program started | run_id=20250923-173209 | output_dir=F:\BiShe_02\output
2025-09-23 17:32:14,709 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-23 17:32:14,710 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-23 17:32:14,769 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 17:32:14,769 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 17:32:14,770 [INFO] node.intent - intent.run | mode=llm
2025-09-23 17:32:18,874 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 17:32:18,879 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 17:32:18,879 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 17:32:18,881 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 17:32:18,882 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 17:32:20,979 [INFO] rag.kb - KB built | docs=40
2025-09-23 17:32:20,991 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-23 17:32:20,992 [INFO] graph - node=kb | snippets=8
2025-09-23 17:32:20,992 [INFO] graph - route: kb -> anomaly
2025-09-23 17:32:20,993 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 17:32:21,086 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 17:32:21,086 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 17:32:22,108 [INFO] rag.anomaly - best algo=LOF
2025-09-23 17:32:23,643 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-23 17:32:27,503 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-23 17:32:29,923 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 17:32:29,924 [INFO] app - Program finished | run_id=20250923-173209
2025-09-23 18:38:06,667 [INFO] app - Program started | run_id=20250923-183806 | output_dir=F:\BiShe_02\output
2025-09-23 18:38:26,271 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-23 18:38:26,271 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-23 18:38:26,333 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 18:38:26,333 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 18:38:26,335 [INFO] node.intent - intent.run | mode=llm
2025-09-23 18:38:28,670 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 18:38:28,672 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 18:38:28,673 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 18:38:28,674 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 18:38:28,675 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 18:38:30,653 [INFO] rag.kb - KB built | docs=40
2025-09-23 18:38:30,665 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-23 18:38:30,666 [INFO] graph - node=kb | snippets=8
2025-09-23 18:38:30,666 [INFO] graph - route: kb -> anomaly
2025-09-23 18:38:30,667 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 18:38:30,764 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 18:38:30,764 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 18:38:32,998 [INFO] rag.anomaly - best algo=LOF
2025-09-23 18:38:36,333 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-23 18:38:45,281 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-23 18:38:46,800 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 18:38:46,801 [INFO] app - Program finished | run_id=20250923-183806
2025-09-23 18:41:01,032 [INFO] app - Program started | run_id=20250923-184101 | output_dir=F:\BiShe_02\output
2025-09-23 18:41:15,629 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-23 18:41:15,629 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-23 18:41:15,693 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 18:41:15,694 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-23 18:41:15,695 [INFO] node.intent - intent.run | mode=llm
2025-09-23 18:41:18,545 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-23 18:41:18,548 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 18:41:18,549 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-23 18:41:18,550 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-23 18:41:18,551 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-23 18:41:20,911 [INFO] rag.kb - KB built | docs=40
2025-09-23 18:41:20,941 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-23 18:41:20,942 [INFO] graph - node=kb | snippets=8
2025-09-23 18:41:20,942 [INFO] graph - route: kb -> anomaly
2025-09-23 18:41:20,945 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-23 18:41:21,090 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-23 18:41:21,090 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-23 18:41:23,329 [INFO] rag.anomaly - best algo=LOF
2025-09-23 18:41:26,481 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-23 18:41:34,170 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-23 18:41:35,707 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-23 18:41:35,709 [INFO] app - Program finished | run_id=20250923-184101
2025-09-24 00:09:49,365 [INFO] app - Program started | run_id=20250924-000949 | output_dir=F:\BiShe_02\output
2025-09-24 00:10:07,205 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-24 00:10:07,206 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-24 00:10:07,282 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 00:10:07,283 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 00:10:07,284 [INFO] node.intent - intent.run | mode=llm
2025-09-24 00:10:10,048 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-24 00:10:10,053 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 00:10:10,054 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 00:10:10,056 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-24 00:10:10,056 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-24 00:10:12,146 [INFO] rag.kb - KB built | docs=40
2025-09-24 00:10:12,157 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-24 00:10:12,157 [INFO] graph - node=kb | snippets=8
2025-09-24 00:10:12,159 [INFO] graph - route: kb -> anomaly
2025-09-24 00:10:12,160 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-24 00:10:12,602 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-24 00:10:12,603 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-24 00:10:15,109 [INFO] rag.anomaly - best algo=LOF
2025-09-24 00:10:18,084 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-24 00:10:24,106 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-24 00:10:25,640 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-24 00:10:25,642 [INFO] app - Program finished | run_id=20250924-000949
2025-09-24 00:19:18,121 [INFO] app - Program started | run_id=20250924-001918 | output_dir=F:\BiShe_02\output
2025-09-24 00:19:24,689 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-24 00:19:24,689 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-24 00:19:24,756 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 00:19:24,756 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 00:19:24,757 [INFO] node.intent - intent.run | mode=llm
2025-09-24 00:19:26,740 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-24 00:19:26,743 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 00:19:26,743 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 00:19:26,745 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-24 00:19:26,745 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-24 00:19:28,789 [INFO] rag.kb - KB built | docs=40
2025-09-24 00:19:28,809 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-24 00:19:28,809 [INFO] graph - node=kb | snippets=8
2025-09-24 00:19:28,809 [INFO] graph - route: kb -> anomaly
2025-09-24 00:19:28,810 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-24 00:19:28,909 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-24 00:19:28,909 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-24 00:19:32,610 [INFO] rag.anomaly - best algo=LOF
2025-09-24 00:19:35,802 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-24 00:19:42,756 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-24 00:19:44,096 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-24 00:19:44,097 [INFO] app - Program finished | run_id=20250924-001918
2025-09-24 00:20:50,113 [INFO] app - Program started | run_id=20250924-002050 | output_dir=F:\BiShe_02\output
2025-09-24 00:21:04,319 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-24 00:21:04,320 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-24 00:21:04,381 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 00:21:04,382 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 00:21:04,383 [INFO] node.intent - intent.run | mode=llm
2025-09-24 00:21:07,085 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-24 00:21:07,090 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 00:21:07,091 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 00:21:07,093 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-24 00:21:07,093 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-24 00:21:09,227 [INFO] rag.kb - KB built | docs=40
2025-09-24 00:21:09,239 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-24 00:21:09,239 [INFO] graph - node=kb | snippets=8
2025-09-24 00:21:09,239 [INFO] graph - route: kb -> anomaly
2025-09-24 00:21:09,241 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-24 00:21:09,333 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-24 00:21:09,334 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-24 00:21:10,414 [INFO] rag.anomaly - best algo=LOF
2025-09-24 00:21:11,998 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-24 00:21:15,934 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-24 00:21:17,055 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-24 00:21:17,057 [INFO] app - Program finished | run_id=20250924-002050
2025-09-24 00:25:52,070 [INFO] app - Program started | run_id=20250924-002552 | output_dir=F:\BiShe_02\output
2025-09-24 00:26:25,048 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-24 00:26:25,049 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-24 00:26:25,106 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 00:26:25,107 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 00:26:25,108 [INFO] node.intent - intent.run | mode=llm
2025-09-24 00:26:27,202 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-24 00:26:27,205 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 00:26:27,206 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 00:26:27,208 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-24 00:26:27,208 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-24 00:26:29,392 [INFO] rag.kb - KB built | docs=40
2025-09-24 00:26:29,405 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-24 00:26:29,405 [INFO] graph - node=kb | snippets=8
2025-09-24 00:26:29,405 [INFO] graph - route: kb -> anomaly
2025-09-24 00:26:29,408 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-24 00:26:29,501 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-24 00:26:29,501 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-24 00:26:32,300 [INFO] rag.anomaly - best algo=LOF
2025-09-24 00:26:35,047 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-24 00:26:39,522 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-24 00:26:40,706 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-24 00:26:40,708 [INFO] app - Program finished | run_id=20250924-002552
2025-09-24 00:27:38,688 [INFO] app - Program started | run_id=20250924-002738 | output_dir=F:\BiShe_02\output
2025-09-24 00:28:25,805 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-24 00:28:25,805 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-24 00:28:25,867 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 00:28:25,868 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 00:28:25,869 [INFO] node.intent - intent.run | mode=llm
2025-09-24 00:28:32,725 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-24 00:28:32,728 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 00:28:32,730 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 00:28:32,731 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-24 00:28:32,731 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-24 00:28:34,782 [INFO] rag.kb - KB built | docs=40
2025-09-24 00:28:34,793 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-24 00:28:34,794 [INFO] graph - node=kb | snippets=8
2025-09-24 00:28:34,794 [INFO] graph - route: kb -> anomaly
2025-09-24 00:28:34,795 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-24 00:28:34,887 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-24 00:28:34,887 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-24 00:28:38,176 [INFO] rag.anomaly - best algo=LOF
2025-09-24 00:28:39,780 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-24 00:28:44,866 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-24 00:28:46,398 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-24 00:28:46,398 [INFO] app - Program finished | run_id=20250924-002738
2025-09-24 02:03:53,709 [INFO] app - Program started | run_id=20250924-020353 | output_dir=F:\BiShe_02\output
2025-09-24 02:04:07,543 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-24 02:04:07,544 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-24 02:04:07,603 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 02:04:07,603 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 02:04:07,604 [INFO] node.intent - intent.run | mode=llm
2025-09-24 02:04:09,697 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-24 02:04:09,700 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 02:04:09,700 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 02:04:09,702 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-24 02:04:09,702 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-24 02:04:11,693 [INFO] rag.kb - KB built | docs=40
2025-09-24 02:04:11,705 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-24 02:04:11,705 [INFO] graph - node=kb | snippets=8
2025-09-24 02:04:11,706 [INFO] graph - route: kb -> anomaly
2025-09-24 02:04:11,707 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-24 02:04:11,810 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-24 02:04:11,810 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-24 02:04:16,702 [INFO] rag.anomaly - best algo=LOF
2025-09-24 02:04:19,673 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-24 02:04:26,880 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-24 02:04:28,369 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-24 02:04:28,371 [INFO] app - Program finished | run_id=20250924-020353
2025-09-24 02:07:33,794 [INFO] app - Program started | run_id=20250924-020733 | output_dir=F:\BiShe_02\output
2025-09-24 02:08:07,268 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-24 02:08:07,269 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-24 02:08:07,334 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 02:08:07,334 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 02:08:07,335 [INFO] node.intent - intent.run | mode=llm
2025-09-24 02:08:10,175 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-24 02:08:10,179 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 02:08:10,179 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 02:08:10,182 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-24 02:08:10,182 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-24 02:08:12,520 [INFO] rag.kb - KB built | docs=40
2025-09-24 02:08:12,531 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-24 02:08:12,531 [INFO] graph - node=kb | snippets=8
2025-09-24 02:08:12,531 [INFO] graph - route: kb -> anomaly
2025-09-24 02:08:12,533 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-24 02:08:12,623 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-24 02:08:12,623 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-24 02:08:14,503 [INFO] rag.anomaly - best algo=LOF
2025-09-24 02:08:16,098 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-24 02:08:22,137 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-24 02:08:23,468 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-24 02:08:23,469 [INFO] app - Program finished | run_id=20250924-020733
2025-09-24 02:09:40,374 [INFO] app - Program started | run_id=20250924-020940 | output_dir=F:\BiShe_02\output
2025-09-24 02:09:58,532 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-24 02:09:58,533 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-24 02:09:58,595 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 02:09:58,595 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 02:09:58,596 [INFO] node.intent - intent.run | mode=llm
2025-09-24 02:10:00,654 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-24 02:10:00,659 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 02:10:00,659 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 02:10:00,661 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-24 02:10:00,661 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-24 02:10:02,919 [INFO] rag.kb - KB built | docs=40
2025-09-24 02:10:02,930 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-24 02:10:02,931 [INFO] graph - node=kb | snippets=8
2025-09-24 02:10:02,931 [INFO] graph - route: kb -> anomaly
2025-09-24 02:10:02,933 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-24 02:10:03,024 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-24 02:10:03,025 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-24 02:37:24,567 [INFO] app - Program started | run_id=20250924-023724 | output_dir=F:\BiShe_02\output
2025-09-24 02:37:40,160 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-24 02:37:40,160 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-24 02:37:40,223 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 02:37:40,223 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 02:37:40,224 [INFO] node.intent - intent.run | mode=llm
2025-09-24 02:37:42,470 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-24 02:37:42,475 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 02:37:42,476 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 02:37:42,478 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-24 02:37:42,478 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-24 02:37:44,543 [INFO] rag.kb - KB built | docs=40
2025-09-24 02:37:44,556 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-24 02:37:44,556 [INFO] graph - node=kb | snippets=8
2025-09-24 02:37:44,557 [INFO] graph - route: kb -> anomaly
2025-09-24 02:37:44,558 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-24 02:37:44,657 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-24 02:37:44,657 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-24 02:37:47,090 [INFO] rag.anomaly - best algo=LOF
2025-09-24 02:37:50,479 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-24 02:37:55,889 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-24 02:37:57,194 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-24 02:37:57,196 [INFO] app - Program finished | run_id=20250924-023724
2025-09-24 02:39:30,242 [INFO] app - Program started | run_id=20250924-023930 | output_dir=F:\BiShe_02\output
2025-09-24 02:41:15,502 [INFO] graph - ENTER node=pre | raw_len=48
2025-09-24 02:41:15,503 [INFO] node.preprocess - start preprocess | raw=run lof algorithm on dataset in data\SKAB\valve1
2025-09-24 02:41:15,565 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 02:41:15,565 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-24 02:41:15,567 [INFO] node.intent - intent.run | mode=llm
2025-09-24 02:41:17,767 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-24 02:41:17,773 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 02:41:17,773 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-24 02:41:17,775 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-24 02:41:17,775 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-24 02:41:19,795 [INFO] rag.kb - KB built | docs=40
2025-09-24 02:41:19,808 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-09-24 02:41:19,809 [INFO] graph - node=kb | snippets=8
2025-09-24 02:41:19,809 [INFO] graph - route: kb -> anomaly
2025-09-24 02:41:19,811 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-24 02:41:19,912 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-24 02:41:19,912 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-24 02:41:22,364 [INFO] rag.anomaly - best algo=LOF
2025-09-24 02:41:25,102 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-24 02:41:32,630 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-24 02:41:34,040 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-24 02:41:34,047 [INFO] app - Program finished | run_id=20250924-023930
2025-09-25 17:31:22,037 [INFO] app - Program started | run_id=20250925-173122 | output_dir=F:\BiShe_02\output
2025-09-25 17:40:12,668 [INFO] graph - ENTER node=pre | raw_len=319
2025-09-25 17:40:12,669 [INFO] node.preprocess - start preprocess | raw=select database hybrid_manufacturing_categorical.csv in /data, filter for Job_Status == "Completed" and Processing_Time > 3, sort by Energy_Consumption in descending order and select the top 5 results, retain only the columns Job_ID, Processing_Time, Energy_Consumption, and Actual_End, and save the result as CSV file.
2025-09-25 17:40:13,034 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 17:40:13,034 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 17:40:13,035 [INFO] node.intent - intent.run | mode=llm
2025-09-25 17:40:15,528 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 17:40:15,532 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 17:40:15,532 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 17:40:15,535 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-25 17:40:15,535 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-25 17:40:17,707 [INFO] rag.kb - KB built | docs=42
2025-09-25 17:40:17,731 [INFO] rag.kb - KB search | q_len=345 | top_k=8
2025-09-25 17:40:17,731 [INFO] graph - node=kb | snippets=8
2025-09-25 17:40:17,731 [INFO] graph - route: kb -> qt
2025-09-25 17:40:17,733 [INFO] rag.thought - thought | prompt_chars=9186 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 17:40:22,069 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 17:40:22,071 [INFO] rag.thought - thought | llm_json_len=422
2025-09-25 17:40:22,074 [INFO] rag.execute - ENTER execute | pending=4
2025-09-25 17:40:22,074 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "Job_Status == 'Completed' and Processing_Time > 3"} | cur_type=NoneType
2025-09-25 17:40:22,108 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-09-25 17:40:22,128 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-09-25 17:40:22,129 [INFO] rag.execute - ENTER execute | pending=3
2025-09-25 17:40:22,129 [INFO] rag.execute - RUN tool=sort_rows | args={'ascending': [False, False], 'column': ['Energy_Consumption', 'Processing_Time']} | cur_type=DataFrame
2025-09-25 17:40:22,133 [INFO] rag.execute - OK tool=sort_rows | result_type=DataFrame
2025-09-25 17:40:22,146 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_sort_rows.csv
2025-09-25 17:40:22,147 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 17:40:22,148 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'top_n', 'n': 5} | cur_type=DataFrame
2025-09-25 17:40:22,148 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 124, in select_rows
    raise ValueError("top_n 需要 column/sort_column")
ValueError: top_n 需要 column/sort_column
2025-09-25 17:40:22,151 [INFO] rag.thought - thought | prompt_chars=9186 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 17:40:25,838 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 17:40:25,838 [INFO] rag.thought - thought | llm_json_len=422
2025-09-25 17:40:25,840 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 17:40:25,840 [INFO] rag.execute - RUN tool=select_columns | args={'pair': ['Job_ID', 'Processing_Time', 'Energy_Consumption', 'Actual_End']} | cur_type=DataFrame
2025-09-25 17:40:25,841 [INFO] rag.execute - OK tool=select_columns | result_type=DataFrame
2025-09-25 17:40:25,847 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_03_select_columns.csv
2025-09-25 17:40:25,847 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_03_select_columns.csv
2025-09-25 17:40:25,847 [INFO] rag.qt - execute -> END
2025-09-25 17:40:25,848 [INFO] graph - route: qt -> summarizer
2025-09-25 17:40:27,788 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-25 17:40:27,789 [INFO] app - Program finished | run_id=20250925-173122
2025-09-25 18:07:11,720 [INFO] app - Program started | run_id=20250925-180711 | output_dir=F:\BiShe_02\output
2025-09-25 18:08:48,188 [INFO] graph - ENTER node=pre | raw_len=259
2025-09-25 18:08:48,188 [INFO] node.preprocess - start preprocess | raw=select database hybrid_manufacturing_categorical.csv in /data, add a column called duration_min = Actual_End - Actual_Start (in minutes); calculate the average (avg) value of duration_min by grouping by Operation_Type and output only the grouped result table.
2025-09-25 18:08:48,374 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 18:08:48,375 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 18:08:48,376 [INFO] node.intent - intent.run | mode=llm
2025-09-25 18:08:50,522 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:08:50,525 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 18:08:50,525 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 18:08:50,526 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-25 18:08:50,526 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-25 18:08:52,762 [INFO] rag.kb - KB built | docs=42
2025-09-25 18:08:52,783 [INFO] rag.kb - KB search | q_len=285 | top_k=8
2025-09-25 18:08:52,784 [INFO] graph - node=kb | snippets=8
2025-09-25 18:08:52,784 [INFO] graph - route: kb -> qt
2025-09-25 18:08:52,785 [INFO] rag.thought - thought | prompt_chars=9948 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:08:59,386 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:08:59,387 [INFO] rag.thought - thought | llm_json_len=307
2025-09-25 18:08:59,389 [INFO] rag.execute - ENTER execute | pending=3
2025-09-25 18:08:59,389 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'True'} | cur_type=NoneType
2025-09-25 18:08:59,401 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 143, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-09-25 18:08:59,404 [INFO] rag.thought - thought | prompt_chars=9948 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:09:02,572 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:09:02,574 [INFO] rag.thought - thought | llm_json_len=309
2025-09-25 18:09:02,575 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 18:09:02,575 [INFO] rag.execute - RUN tool=add_derived_column | args={'formula': 'Actual_End - Actual_Start', 'target_column': 'duration_min'} | cur_type=NoneType
2025-09-25 18:09:02,600 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 292, in add_derived_column
    df[args["name"]] = delta
       ~~~~^^^^^^^^
KeyError: 'name'
2025-09-25 18:09:02,601 [INFO] rag.thought - thought | prompt_chars=9948 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:09:06,431 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:09:06,432 [INFO] rag.thought - thought | llm_json_len=309
2025-09-25 18:09:06,432 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 18:09:06,434 [INFO] rag.execute - RUN tool=group_by_aggregate | args={'group_column': 'Operation_Type', 'agg': 'mean', 'pair': 'duration_min'} | cur_type=NoneType
2025-09-25 18:09:06,443 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 338, in group_by_aggregate
    tcol = _col(args, "column", "target_column")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 46, in _col
    raise KeyError(f"Need one of {names}")
KeyError: "Need one of ('column', 'target_column')"
2025-09-25 18:09:06,445 [INFO] rag.thought - thought | prompt_chars=9948 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:09:10,324 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:09:10,325 [INFO] rag.thought - thought | llm_json_len=309
2025-09-25 18:09:10,326 [INFO] rag.execute - ENTER execute | pending=3
2025-09-25 18:09:10,326 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'true'} | cur_type=NoneType
2025-09-25 18:09:10,336 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 143, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-09-25 18:09:10,338 [INFO] rag.thought - thought | prompt_chars=9948 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:09:13,960 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:09:13,960 [INFO] rag.thought - thought | llm_json_len=249
2025-09-25 18:09:13,963 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 18:09:13,963 [INFO] rag.execute - RUN tool=add_derived_column | args={'formula': 'Actual_End - Actual_Start', 'target_column': 'duration_min'} | cur_type=NoneType
2025-09-25 18:09:13,975 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 292, in add_derived_column
    df[args["name"]] = delta
       ~~~~^^^^^^^^
KeyError: 'name'
2025-09-25 18:09:13,977 [INFO] rag.thought - thought | prompt_chars=9948 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:09:17,728 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:09:17,730 [INFO] rag.thought - thought | llm_json_len=249
2025-09-25 18:09:17,731 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 18:09:17,731 [INFO] rag.execute - RUN tool=group_by_aggregate | args={'group_column': 'Operation_Type', 'agg': 'mean', 'pair': ['duration_min']} | cur_type=NoneType
2025-09-25 18:09:17,742 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 338, in group_by_aggregate
    tcol = _col(args, "column", "target_column")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 46, in _col
    raise KeyError(f"Need one of {names}")
KeyError: "Need one of ('column', 'target_column')"
2025-09-25 18:09:17,743 [INFO] rag.thought - thought | prompt_chars=9948 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:09:24,539 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:09:24,540 [INFO] rag.thought - thought | llm_json_len=592
2025-09-25 18:09:24,543 [INFO] rag.execute - ENTER execute | pending=4
2025-09-25 18:09:24,543 [INFO] rag.execute - RUN tool=select_rows | args={} | cur_type=NoneType
2025-09-25 18:09:24,556 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 132, in select_rows
    raise ValueError("select_rows 需要 'condition'")
ValueError: select_rows 需要 'condition'
2025-09-25 18:09:24,557 [INFO] rag.thought - thought | prompt_chars=9948 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:09:29,817 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:09:29,818 [INFO] rag.thought - thought | llm_json_len=585
2025-09-25 18:09:29,820 [INFO] rag.execute - ENTER execute | pending=3
2025-09-25 18:09:29,820 [INFO] rag.execute - RUN tool=add_derived_column | args={'formula': 'Actual_End - Actual_Start', 'target_column': 'duration_min'} | cur_type=NoneType
2025-09-25 18:09:29,834 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 292, in add_derived_column
    df[args["name"]] = delta
       ~~~~^^^^^^^^
KeyError: 'name'
2025-09-25 18:09:29,836 [INFO] rag.thought - thought | prompt_chars=9948 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:09:32,918 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:09:32,918 [INFO] rag.thought - thought | llm_json_len=309
2025-09-25 18:14:37,795 [INFO] app - Program started | run_id=20250925-181437 | output_dir=F:\BiShe_02\output
2025-09-25 18:36:34,723 [INFO] graph - ENTER node=pre | raw_len=356
2025-09-25 18:36:34,724 [INFO] node.preprocess - start preprocess | raw=select database hybrid_manufacturing_categorical.csv in /data, calculate the correlation coefficient between Processing_Time and Energy_Consumption. Then, calculate the average Energy_Consumption by Machine_ID and sort in descending order. Draw a histogram of the average Energy_Consumption of each machine and save it to output/avg_Energy_Consumption.png.
2025-09-25 18:36:35,236 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 18:36:35,237 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 18:36:35,238 [INFO] node.intent - intent.run | mode=llm
2025-09-25 18:36:37,328 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:36:37,333 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 18:36:37,333 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 18:36:37,337 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-25 18:36:37,337 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-25 18:36:39,654 [INFO] rag.kb - KB built | docs=42
2025-09-25 18:36:39,678 [INFO] rag.kb - KB search | q_len=378 | top_k=8
2025-09-25 18:36:39,678 [INFO] graph - node=kb | snippets=8
2025-09-25 18:36:39,678 [INFO] graph - route: kb -> qt
2025-09-25 18:36:39,681 [INFO] rag.thought - thought | prompt_chars=9738 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:36:43,763 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:36:43,765 [INFO] rag.thought - thought | llm_json_len=445
2025-09-25 18:36:43,767 [INFO] rag.execute - ENTER execute | pending=4
2025-09-25 18:36:43,767 [INFO] rag.execute - RUN tool=calculate_correlation | args={'target_column': 'Processing_Time', 'other_column': 'Energy_Consumption'} | cur_type=NoneType
2025-09-25 18:36:43,783 [INFO] rag.execute - OK tool=calculate_correlation | result_type=float64
2025-09-25 18:36:43,784 [INFO] rag.execute - ENTER execute | pending=3
2025-09-25 18:36:43,784 [INFO] rag.execute - RUN tool=group_by_aggregate | args={'group_column': 'Machine_ID', 'agg': 'mean', 'pair': ['Energy_Consumption']} | cur_type=float64
2025-09-25 18:36:43,785 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 338, in group_by_aggregate
    tcol = _col(args, "column", "target_column")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 46, in _col
    raise KeyError(f"Need one of {names}")
KeyError: "Need one of ('column', 'target_column')"
2025-09-25 18:36:43,811 [INFO] rag.thought - thought | prompt_chars=9738 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:36:48,568 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:36:48,569 [INFO] rag.thought - thought | llm_json_len=643
2025-09-25 18:36:48,570 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 18:36:48,570 [INFO] rag.execute - RUN tool=sort_rows | args={'order': 'desc', 'column': 'Processing_Time'} | cur_type=float64
2025-09-25 18:36:48,570 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 211, in sort_rows
    return df.sort_values(col, ascending=asc)
           ^^^^^^^^^^^^^^
AttributeError: 'numpy.float64' object has no attribute 'sort_values'
2025-09-25 18:36:48,575 [INFO] rag.thought - thought | prompt_chars=9738 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:36:52,492 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:36:52,492 [INFO] rag.thought - thought | llm_json_len=446
2025-09-25 18:36:52,494 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 18:36:52,494 [INFO] rag.execute - RUN tool=plot_machine_avg_bar | args={'metric': 'Energy_Consumption', 'file': 'output/Energy_Consumption.png'} | cur_type=float64
2025-09-25 18:36:52,494 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 527, in plot_machine_avg_bar
    grp = df.groupby("Machine_ID")[metric].mean().sort_values()
          ^^^^^^^^^^
AttributeError: 'numpy.float64' object has no attribute 'groupby'
2025-09-25 18:36:52,497 [INFO] rag.thought - thought | prompt_chars=9738 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:36:57,143 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:36:57,144 [INFO] rag.thought - thought | llm_json_len=442
2025-09-25 18:36:57,147 [INFO] rag.execute - ENTER execute | pending=4
2025-09-25 18:36:57,147 [INFO] rag.execute - RUN tool=calculate_correlation | args={'target_column': 'Processing_Time', 'other_column': 'Energy_Consumption'} | cur_type=float64
2025-09-25 18:36:57,147 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 436, in calculate_correlation
    if (len(df) < 2 or df[col1].nunique() < 2 or
        ^^^^^^^
TypeError: object of type 'numpy.float64' has no len()
2025-09-25 18:36:57,148 [INFO] rag.thought - thought | prompt_chars=9738 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:37:01,088 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:37:01,089 [INFO] rag.thought - thought | llm_json_len=442
2025-09-25 18:37:01,090 [INFO] rag.execute - ENTER execute | pending=3
2025-09-25 18:37:01,091 [INFO] rag.execute - RUN tool=group_by_aggregate | args={'group_column': 'Machine_ID', 'agg': 'mean', 'pair': ['Energy_Consumption']} | cur_type=float64
2025-09-25 18:37:01,091 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 338, in group_by_aggregate
    tcol = _col(args, "column", "target_column")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 46, in _col
    raise KeyError(f"Need one of {names}")
KeyError: "Need one of ('column', 'target_column')"
2025-09-25 18:37:01,092 [INFO] rag.thought - thought | prompt_chars=9738 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:37:05,793 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:37:05,795 [INFO] rag.thought - thought | llm_json_len=443
2025-09-25 18:37:05,796 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 18:37:05,796 [INFO] rag.execute - RUN tool=sort_rows | args={'ascending': False, 'column': 'Processing_Time'} | cur_type=float64
2025-09-25 18:37:05,797 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 211, in sort_rows
    return df.sort_values(col, ascending=asc)
           ^^^^^^^^^^^^^^
AttributeError: 'numpy.float64' object has no attribute 'sort_values'
2025-09-25 18:37:05,800 [INFO] rag.thought - thought | prompt_chars=9738 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:37:10,185 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:37:10,186 [INFO] rag.thought - thought | llm_json_len=449
2025-09-25 18:37:10,188 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 18:37:10,188 [INFO] rag.execute - RUN tool=plot_machine_avg_bar | args={'metric': 'Energy_Consumption', 'file': 'output/Energy_Consumption.png'} | cur_type=float64
2025-09-25 18:37:10,188 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 527, in plot_machine_avg_bar
    grp = df.groupby("Machine_ID")[metric].mean().sort_values()
          ^^^^^^^^^^
AttributeError: 'numpy.float64' object has no attribute 'groupby'
2025-09-25 18:37:10,191 [INFO] rag.thought - thought | prompt_chars=9738 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:37:15,809 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:37:15,810 [INFO] rag.thought - thought | llm_json_len=448
2025-09-25 18:40:03,588 [INFO] app - Program started | run_id=20250925-184003 | output_dir=F:\BiShe_02\output
2025-09-25 18:45:40,963 [INFO] graph - ENTER node=pre | raw_len=207
2025-09-25 18:45:40,963 [INFO] node.preprocess - start preprocess | raw=select database hybrid_manufacturing_categorical.csv in /data, calculate the rolling average of Processing_Time for each Machine_ID (window=2, group_by=Machine_ID), and output a preview of the first 10 rows.
2025-09-25 18:45:41,097 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 18:45:41,098 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 18:45:41,099 [INFO] node.intent - intent.run | mode=llm
2025-09-25 18:45:44,156 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:45:44,160 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 18:45:44,161 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 18:45:44,163 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-25 18:45:44,163 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-25 18:45:46,259 [INFO] rag.kb - KB built | docs=42
2025-09-25 18:45:46,279 [INFO] rag.kb - KB search | q_len=220 | top_k=8
2025-09-25 18:45:46,279 [INFO] graph - node=kb | snippets=8
2025-09-25 18:45:46,281 [INFO] graph - route: kb -> qt
2025-09-25 18:45:46,282 [INFO] rag.thought - thought | prompt_chars=9536 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:45:51,117 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:45:51,119 [INFO] rag.thought - thought | llm_json_len=215
2025-09-25 18:45:51,120 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 18:45:51,120 [INFO] rag.execute - RUN tool=rolling_average | args={'window': 2, 'group_by': 'Machine_ID', 'target_column': 'Processing_Time'} | cur_type=NoneType
2025-09-25 18:45:51,132 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 303, in rolling_average
    col = args["column"]
          ~~~~^^^^^^^^^^
KeyError: 'column'
2025-09-25 18:45:51,135 [INFO] rag.thought - thought | prompt_chars=9536 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:45:55,791 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:45:55,792 [INFO] rag.thought - thought | llm_json_len=235
2025-09-25 18:45:55,793 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 18:45:55,795 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'top_n', 'n': 10, 'column': None} | cur_type=NoneType
2025-09-25 18:45:55,812 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 124, in select_rows
    raise ValueError("top_n 需要 column/sort_column")
ValueError: top_n 需要 column/sort_column
2025-09-25 18:45:55,814 [INFO] rag.thought - thought | prompt_chars=9536 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:46:01,182 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:46:01,183 [INFO] rag.thought - thought | llm_json_len=235
2025-09-25 18:46:01,185 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 18:46:01,185 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'top_n', 'n': 10, 'order': 'asc', 'column': 'Job_ID'} | cur_type=NoneType
2025-09-25 18:46:01,203 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-09-25 18:47:06,218 [INFO] app - Program started | run_id=20250925-184706 | output_dir=F:\BiShe_02\output
2025-09-25 18:47:14,927 [INFO] graph - ENTER node=pre | raw_len=272
2025-09-25 18:47:14,928 [INFO] node.preprocess - start preprocess | raw=select database hybrid_manufacturing_categorical.csv in /data, first, filter the records that satisfy "Scheduled_End - Scheduled_Start >= 1 hour"; then, construct a bipartite graph of Machine_ID ↔ Job_ID based on the filtered data and export it as output/plant_graph.gexf.
2025-09-25 18:47:15,132 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 18:47:15,133 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 18:47:15,135 [INFO] node.intent - intent.run | mode=llm
2025-09-25 18:47:17,143 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:47:17,146 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 18:47:17,146 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 18:47:17,150 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-25 18:47:17,150 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-25 18:47:19,194 [INFO] rag.kb - KB built | docs=42
2025-09-25 18:47:19,215 [INFO] rag.kb - KB search | q_len=297 | top_k=8
2025-09-25 18:47:19,216 [INFO] graph - node=kb | snippets=8
2025-09-25 18:47:19,216 [INFO] graph - route: kb -> qt
2025-09-25 18:47:19,218 [INFO] rag.thought - thought | prompt_chars=9187 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:47:21,993 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:47:21,995 [INFO] rag.thought - thought | llm_json_len=185
2025-09-25 18:47:21,997 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 18:47:21,997 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'Scheduled_End - Scheduled_Start >= 1 hour'} | cur_type=NoneType
2025-09-25 18:47:22,014 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 143, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-09-25 18:47:22,019 [INFO] rag.thought - thought | prompt_chars=9187 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:47:24,506 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:47:24,507 [INFO] rag.thought - thought | llm_json_len=185
2025-09-25 18:47:24,510 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 18:47:24,510 [INFO] rag.execute - RUN tool=graph_export | args={'file': 'output/plant_graph.gexf'} | cur_type=NoneType
2025-09-25 18:47:24,665 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 511, in graph_export
    nx.write_gexf(G, dst)
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\networkx\utils\decorators.py", line 784, in func
    return argmap._lazy_compile(__wrapper)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<class 'networkx.utils.decorators.argmap'> compilation 5", line 5, in argmap_write_gexf_1
    import itertools
             ^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\networkx\readwrite\gexf.py", line 87, in write_gexf
    writer.add_graph(G)
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\networkx\readwrite\gexf.py", line 347, in add_graph
    self.add_edges(G, graph_element)
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\networkx\readwrite\gexf.py", line 435, in add_edges
    self.alter_graph_mode_timeformat(start)
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\networkx\readwrite\gexf.py", line 655, in alter_graph_mode_timeformat
    raise nx.NetworkXError(
networkx.exception.NetworkXError: timeformat should be of the type int, float or str
2025-09-25 18:47:24,718 [INFO] rag.thought - thought | prompt_chars=9187 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:47:28,032 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:47:28,033 [INFO] rag.thought - thought | llm_json_len=185
2025-09-25 18:47:28,035 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 18:47:28,035 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'Scheduled_End - Scheduled_Start >= 1 hour'} | cur_type=NoneType
2025-09-25 18:47:28,053 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 143, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-09-25 18:47:28,054 [INFO] rag.thought - thought | prompt_chars=9187 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:47:31,070 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:47:31,072 [INFO] rag.thought - thought | llm_json_len=185
2025-09-25 18:47:31,130 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 18:47:31,131 [INFO] rag.execute - RUN tool=graph_export | args={'file': 'output/plant_graph.gexf'} | cur_type=NoneType
2025-09-25 18:47:31,266 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 511, in graph_export
    nx.write_gexf(G, dst)
  File "<class 'networkx.utils.decorators.argmap'> compilation 5", line 5, in argmap_write_gexf_1
    import itertools
             ^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\networkx\readwrite\gexf.py", line 87, in write_gexf
    writer.add_graph(G)
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\networkx\readwrite\gexf.py", line 347, in add_graph
    self.add_edges(G, graph_element)
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\networkx\readwrite\gexf.py", line 435, in add_edges
    self.alter_graph_mode_timeformat(start)
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\networkx\readwrite\gexf.py", line 655, in alter_graph_mode_timeformat
    raise nx.NetworkXError(
networkx.exception.NetworkXError: timeformat should be of the type int, float or str
2025-09-25 18:47:31,270 [INFO] rag.thought - thought | prompt_chars=9187 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:47:33,697 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:47:33,699 [INFO] rag.thought - thought | llm_json_len=185
2025-09-25 18:47:33,701 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 18:47:33,701 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'Scheduled_End - Scheduled_Start >= 1 hour'} | cur_type=NoneType
2025-09-25 18:47:33,718 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 143, in select_rows
    raise ValueError("select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）")
ValueError: select_rows: 无法确定列名（请提供 column 或在 condition 里写 'Col OP ...'）
2025-09-25 18:47:33,720 [INFO] rag.thought - thought | prompt_chars=9187 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:47:35,925 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:47:35,926 [INFO] rag.thought - thought | llm_json_len=185
2025-09-25 18:47:35,928 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 18:47:35,928 [INFO] rag.execute - RUN tool=graph_export | args={'file': 'output/plant_graph.gexf'} | cur_type=NoneType
2025-09-25 18:47:36,066 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 45, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 511, in graph_export
    nx.write_gexf(G, dst)
  File "<class 'networkx.utils.decorators.argmap'> compilation 5", line 5, in argmap_write_gexf_1
    import itertools
             ^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\networkx\readwrite\gexf.py", line 87, in write_gexf
    writer.add_graph(G)
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\networkx\readwrite\gexf.py", line 347, in add_graph
    self.add_edges(G, graph_element)
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\networkx\readwrite\gexf.py", line 435, in add_edges
    self.alter_graph_mode_timeformat(start)
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\networkx\readwrite\gexf.py", line 655, in alter_graph_mode_timeformat
    raise nx.NetworkXError(
networkx.exception.NetworkXError: timeformat should be of the type int, float or str
2025-09-25 18:47:36,069 [INFO] rag.thought - thought | prompt_chars=9187 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 18:47:38,396 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:47:38,397 [INFO] rag.thought - thought | llm_json_len=185
2025-09-25 18:47:38,398 [WARNING] rag.validator - Exceeded max retry, giving up.
2025-09-25 18:47:38,398 [INFO] graph - route: qt -> summarizer
2025-09-25 18:47:39,647 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-25 18:47:39,648 [INFO] app - Program finished | run_id=20250925-184706
2025-09-25 18:49:57,702 [INFO] app - Program started | run_id=20250925-184957 | output_dir=F:\BiShe_02\output
2025-09-25 18:50:19,340 [INFO] graph - ENTER node=pre | raw_len=66
2025-09-25 18:50:19,341 [INFO] node.preprocess - start preprocess | raw=run all anomaly detection algorithms on files in \data\SKAB\valve2
2025-09-25 18:50:19,608 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve2 | cols=11
2025-09-25 18:50:19,608 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve2 | cols=11
2025-09-25 18:50:19,609 [INFO] node.intent - intent.run | mode=llm
2025-09-25 18:50:22,084 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 18:50:22,088 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF', 'AE', 'LOF', 'INNE', 'OCSVM'] csv=F:\BiShe_02\data\SKAB\valve2
2025-09-25 18:50:22,088 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF', 'AE', 'LOF', 'INNE', 'OCSVM'] csv=F:\BiShe_02\data\SKAB\valve2
2025-09-25 18:50:22,090 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-25 18:50:22,090 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-25 18:50:24,209 [INFO] rag.kb - KB built | docs=40
2025-09-25 18:50:24,221 [INFO] rag.kb - KB search | q_len=75 | top_k=8
2025-09-25 18:50:24,221 [INFO] graph - node=kb | snippets=8
2025-09-25 18:50:24,222 [INFO] graph - route: kb -> anomaly
2025-09-25 18:50:24,223 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve2 | top_q=0.020
2025-09-25 18:50:24,308 [INFO] rag.anomaly - dataset | rows=4312 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-25 18:50:24,309 [INFO] rag.anomaly - algorithms | selected=['EIF', 'AE', 'LOF', 'INNE', 'OCSVM'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-25 18:50:24,448 [INFO] ad - AE.build | input_dim=7 | cfg=custom
2025-09-25 18:50:57,720 [INFO] rag.anomaly - best algo=EIF
2025-09-25 18:50:59,646 [INFO] rag.anomaly - excel saved -> output\valve2_anomaly_results.xlsx | sheets=6
2025-09-25 18:51:04,867 [INFO] rag.anomaly - plots saved | pr=output\valve2_anomaly_results_pr_curve.png | f1=output\valve2_anomaly_results_f1_curve.png | roc=output\valve2_anomaly_results_roc_curve.png
2025-09-25 18:51:06,286 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-25 18:51:06,288 [INFO] app - Program finished | run_id=20250925-184957
2025-09-25 20:45:52,289 [INFO] app - Program started | run_id=20250925-204552 | output_dir=F:\BiShe_02\output
2025-09-25 20:46:16,914 [INFO] graph - ENTER node=pre | raw_len=261
2025-09-25 20:46:16,914 [INFO] node.preprocess - start preprocess | raw=select database hybrid_manufacturing_categorical.csv in /data, filter for Job_Status == "Completed" and Processing_Time > 3, sort by Energy_Consumption in descending order, select top 5, keep Job_ID, Processing_Time, Energy_Consumption, Actual_End, save as CSV.
2025-09-25 20:46:17,257 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 20:46:17,259 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 20:46:17,260 [INFO] node.intent - intent.run | mode=llm
2025-09-25 20:46:19,359 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 20:46:19,363 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 20:46:19,364 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 20:46:19,365 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-25 20:46:19,365 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-25 20:46:21,347 [INFO] rag.kb - KB built | docs=42
2025-09-25 20:46:21,367 [INFO] rag.kb - KB search | q_len=287 | top_k=8
2025-09-25 20:46:21,368 [INFO] graph - node=kb | snippets=8
2025-09-25 20:46:21,369 [INFO] graph - route: kb -> qt
2025-09-25 20:46:21,370 [INFO] rag.thought - thought | prompt_chars=9062 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 20:46:27,107 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 20:46:27,108 [INFO] rag.thought - thought | llm_json_len=468
2025-09-25 20:46:27,112 [INFO] rag.execute - ENTER execute | pending=4
2025-09-25 20:46:27,113 [INFO] rag.execute - RUN tool=select_rows | args={'query': "Job_Status == 'Completed' and Processing_Time > 3"} | cur_type=NoneType
2025-09-25 20:46:27,113 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 230, in select_rows
    raise ValueError("select_rows: 当前数据为空")
ValueError: select_rows: 当前数据为空
2025-09-25 20:46:27,116 [INFO] rag.thought - thought | prompt_chars=9062 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 20:46:31,680 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 20:46:31,681 [INFO] rag.thought - thought | llm_json_len=434
2025-09-25 20:46:31,682 [INFO] rag.execute - ENTER execute | pending=3
2025-09-25 20:46:31,683 [INFO] rag.execute - RUN tool=sort_rows | args={'ascending': [False, False], 'column': ['Energy_Consumption', 'Processing_Time']} | cur_type=NoneType
2025-09-25 20:46:31,701 [INFO] rag.execute - OK tool=sort_rows | result_type=DataFrame
2025-09-25 20:46:31,722 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_sort_rows.csv
2025-09-25 20:46:31,723 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 20:46:31,723 [INFO] rag.execute - RUN tool=top_n | args={'n': 5, 'pair': ['Job_ID', 'Processing_Time', 'Energy_Consumption', 'Actual_End']} | cur_type=DataFrame
2025-09-25 20:46:31,723 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 288, in top_n
    col = (_col(args, "column", "sort_column",
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 64, in _col
    raise KeyError(f"Need one of {names}")
KeyError: "Need one of ('column', 'sort_column', 'target_column')"
2025-09-25 20:46:31,724 [INFO] rag.thought - thought | prompt_chars=9062 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 20:46:38,664 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 20:46:38,665 [INFO] rag.thought - thought | llm_json_len=497
2025-09-25 20:46:38,667 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 20:46:38,667 [INFO] rag.execute - RUN tool=select_columns | args={'pair': ['Job_ID', 'Processing_Time', 'Energy_Consumption', 'Actual_End']} | cur_type=DataFrame
2025-09-25 20:46:38,669 [INFO] rag.execute - OK tool=select_columns | result_type=DataFrame
2025-09-25 20:46:38,675 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_select_columns.csv
2025-09-25 20:46:38,676 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_02_select_columns.csv
2025-09-25 20:46:38,676 [INFO] rag.qt - execute -> END
2025-09-25 20:46:38,676 [INFO] graph - route: qt -> summarizer
2025-09-25 20:46:39,861 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-25 20:46:39,863 [INFO] app - Program finished | run_id=20250925-204552
2025-09-25 20:52:16,670 [INFO] app - Program started | run_id=20250925-205216 | output_dir=F:\BiShe_02\output
2025-09-25 20:53:39,315 [INFO] graph - ENTER node=pre | raw_len=203
2025-09-25 20:53:39,316 [INFO] node.preprocess - start preprocess | raw=select database hybrid_manufacturing_categorical.csv in /data, add duration_min = Actual_End - Actual_Start (unit=minutes), group by Operation_Type and take mean(duration_min), output grouped table only.
2025-09-25 20:53:39,463 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 20:53:39,464 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 20:53:39,465 [INFO] node.intent - intent.run | mode=llm
2025-09-25 20:53:41,403 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 20:53:41,406 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 20:53:41,406 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 20:53:41,408 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-25 20:53:41,409 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-25 20:53:43,423 [INFO] rag.kb - KB built | docs=42
2025-09-25 20:53:43,443 [INFO] rag.kb - KB search | q_len=216 | top_k=8
2025-09-25 20:53:43,443 [INFO] graph - node=kb | snippets=8
2025-09-25 20:53:43,444 [INFO] graph - route: kb -> qt
2025-09-25 20:53:43,446 [INFO] rag.thought - thought | prompt_chars=9464 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 20:53:47,111 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 20:53:47,113 [INFO] rag.thought - thought | llm_json_len=482
2025-09-25 20:53:47,115 [INFO] rag.execute - ENTER execute | pending=3
2025-09-25 20:53:47,115 [INFO] rag.execute - RUN tool=select_rows | args={'query': 'true'} | cur_type=NoneType
2025-09-25 20:53:47,115 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 230, in select_rows
    raise ValueError("select_rows: 当前数据为空")
ValueError: select_rows: 当前数据为空
2025-09-25 20:53:47,119 [INFO] rag.thought - thought | prompt_chars=9464 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 20:53:49,093 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 20:53:49,094 [INFO] rag.thought - thought | llm_json_len=272
2025-09-25 20:53:49,096 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 20:53:49,096 [INFO] rag.execute - RUN tool=add_derived_column | args={'target_column': 'duration_min', 'formula': 'Actual_End - Actual_Start', 'unit': 'minutes'} | cur_type=NoneType
2025-09-25 20:53:49,096 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 379, in add_derived_column
    raise ValueError("add_derived_column: 当前数据为空")
ValueError: add_derived_column: 当前数据为空
2025-09-25 20:53:49,097 [INFO] rag.thought - thought | prompt_chars=9464 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 20:53:51,517 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 20:53:51,519 [INFO] rag.thought - thought | llm_json_len=272
2025-09-25 20:53:51,520 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 20:53:51,520 [INFO] rag.execute - RUN tool=group_by_aggregate | args={'group_column': 'Operation_Type', 'agg': 'mean', 'target_column': 'duration_min'} | cur_type=NoneType
2025-09-25 20:53:51,520 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 516, in group_by_aggregate
    raise ValueError("group_by_aggregate: 当前数据为空")
ValueError: group_by_aggregate: 当前数据为空
2025-09-25 20:53:51,521 [INFO] rag.thought - thought | prompt_chars=9464 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 20:53:53,735 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 20:53:53,736 [INFO] rag.thought - thought | llm_json_len=272
2025-09-25 20:53:53,737 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 20:53:53,737 [INFO] rag.execute - RUN tool=add_derived_column | args={'target_column': 'duration_min', 'formula': 'Actual_End - Actual_Start', 'unit': 'minutes'} | cur_type=NoneType
2025-09-25 20:53:53,738 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 379, in add_derived_column
    raise ValueError("add_derived_column: 当前数据为空")
ValueError: add_derived_column: 当前数据为空
2025-09-25 20:53:53,739 [INFO] rag.thought - thought | prompt_chars=9464 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 20:53:56,804 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 20:53:56,805 [INFO] rag.thought - thought | llm_json_len=279
2025-09-25 20:53:56,806 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 20:53:56,806 [INFO] rag.execute - RUN tool=group_by_aggregate | args={'group_column': 'Operation_Type', 'agg': 'mean', 'target_column': 'duration_min'} | cur_type=NoneType
2025-09-25 20:53:56,806 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 516, in group_by_aggregate
    raise ValueError("group_by_aggregate: 当前数据为空")
ValueError: group_by_aggregate: 当前数据为空
2025-09-25 20:53:56,808 [INFO] rag.thought - thought | prompt_chars=9464 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 20:53:59,695 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 20:53:59,697 [INFO] rag.thought - thought | llm_json_len=279
2025-09-25 20:53:59,698 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 20:53:59,698 [INFO] rag.execute - RUN tool=add_derived_column | args={'target_column': 'duration_min', 'formula': 'Actual_End - Actual_Start', 'unit': 'minutes'} | cur_type=NoneType
2025-09-25 20:53:59,699 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 379, in add_derived_column
    raise ValueError("add_derived_column: 当前数据为空")
ValueError: add_derived_column: 当前数据为空
2025-09-25 20:53:59,699 [INFO] rag.thought - thought | prompt_chars=9464 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 20:54:02,605 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 20:54:02,606 [INFO] rag.thought - thought | llm_json_len=272
2025-09-25 20:54:02,608 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 20:54:02,608 [INFO] rag.execute - RUN tool=group_by_aggregate | args={'group_column': 'Operation_Type', 'target_column': 'duration_min', 'agg': 'mean'} | cur_type=NoneType
2025-09-25 20:54:02,608 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 516, in group_by_aggregate
    raise ValueError("group_by_aggregate: 当前数据为空")
ValueError: group_by_aggregate: 当前数据为空
2025-09-25 20:54:02,609 [INFO] rag.thought - thought | prompt_chars=9464 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 20:54:06,696 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 20:54:06,696 [INFO] rag.thought - thought | llm_json_len=272
2025-09-25 20:54:06,697 [WARNING] rag.validator - Exceeded max retry, giving up.
2025-09-25 20:54:06,698 [INFO] graph - route: qt -> summarizer
2025-09-25 20:54:07,804 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-25 20:54:07,805 [INFO] app - Program finished | run_id=20250925-205216
2025-09-25 20:59:34,177 [INFO] app - Program started | run_id=20250925-205934 | output_dir=F:\BiShe_02\output
2025-09-25 21:06:53,477 [INFO] graph - ENTER node=pre | raw_len=256
2025-09-25 21:06:53,478 [INFO] node.preprocess - start preprocess | raw=select database hybrid_manufacturing_categorical.csv in /data, calculate correlation between Processing_Time and Energy_Consumption, then group by Machine_ID and take mean(Energy_Consumption) descending, plot histogram to output/avg_Energy_Consumption.png.
2025-09-25 21:06:53,673 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 21:06:53,673 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 21:06:53,674 [INFO] node.intent - intent.run | mode=llm
2025-09-25 21:06:55,832 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 21:06:55,835 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 21:06:55,835 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 21:06:55,837 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-25 21:06:55,837 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-25 21:06:57,977 [INFO] rag.kb - KB built | docs=42
2025-09-25 21:06:57,998 [INFO] rag.kb - KB search | q_len=265 | top_k=8
2025-09-25 21:06:57,998 [INFO] graph - node=kb | snippets=8
2025-09-25 21:06:57,999 [INFO] graph - route: kb -> qt
2025-09-25 21:06:58,001 [INFO] rag.thought - thought | prompt_chars=9072 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 21:07:02,892 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 21:07:02,893 [INFO] rag.thought - thought | llm_json_len=499
2025-09-25 21:07:02,895 [INFO] rag.qt - validator -> thought (replan)
2025-09-25 21:07:02,896 [INFO] rag.thought - thought | prompt_chars=9072 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 21:07:09,794 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 21:07:09,795 [INFO] rag.thought - thought | llm_json_len=505
2025-09-25 21:07:09,797 [INFO] rag.execute - ENTER execute | pending=5
2025-09-25 21:07:09,797 [INFO] rag.execute - RUN tool=select_rows | args={'query': 'true'} | cur_type=NoneType
2025-09-25 21:07:09,797 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 230, in select_rows
    raise ValueError("select_rows: 当前数据为空")
ValueError: select_rows: 当前数据为空
2025-09-25 21:07:09,800 [INFO] rag.thought - thought | prompt_chars=9072 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 21:07:15,873 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 21:07:15,874 [INFO] rag.thought - thought | llm_json_len=505
2025-09-25 21:07:15,875 [INFO] rag.execute - ENTER execute | pending=4
2025-09-25 21:07:15,875 [INFO] rag.execute - RUN tool=calculate_correlation | args={'target_column': 'Processing_Time', 'other_column': 'Energy_Consumption'} | cur_type=NoneType
2025-09-25 21:07:15,890 [INFO] rag.execute - OK tool=calculate_correlation | result_type=float64
2025-09-25 21:07:15,891 [INFO] rag.execute - ENTER execute | pending=3
2025-09-25 21:07:15,891 [INFO] rag.execute - RUN tool=group_by_aggregate | args={'group_column': 'Machine_ID', 'target_column': 'Energy_Consumption', 'agg': 'mean'} | cur_type=NoneType
2025-09-25 21:07:15,891 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 516, in group_by_aggregate
    raise ValueError("group_by_aggregate: 当前数据为空")
ValueError: group_by_aggregate: 当前数据为空
2025-09-25 21:07:15,892 [INFO] rag.thought - thought | prompt_chars=9072 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 21:07:20,533 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 21:07:20,534 [INFO] rag.thought - thought | llm_json_len=499
2025-09-25 21:07:20,535 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 21:07:20,535 [INFO] rag.execute - RUN tool=sort_rows | args={'ascending': False, 'column': 'Energy_Consumption'} | cur_type=NoneType
2025-09-25 21:07:20,546 [INFO] rag.execute - OK tool=sort_rows | result_type=DataFrame
2025-09-25 21:07:20,565 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_sort_rows.csv
2025-09-25 21:07:20,567 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 21:07:20,567 [INFO] rag.execute - RUN tool=plot_machine_avg_bar | args={'metric': 'Energy_Consumption', 'file': 'output/Energy_Consumption.png'} | cur_type=DataFrame
2025-09-25 21:07:21,007 [INFO] rag.execute - OK tool=plot_machine_avg_bar | result_type=str
2025-09-25 21:07:21,007 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_01_sort_rows.csv
2025-09-25 21:07:21,007 [INFO] rag.qt - execute -> END
2025-09-25 21:07:21,007 [INFO] graph - route: qt -> summarizer
2025-09-25 21:07:22,529 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-25 21:07:22,530 [INFO] app - Program finished | run_id=20250925-205934
2025-09-25 21:09:45,390 [INFO] app - Program started | run_id=20250925-210945 | output_dir=F:\BiShe_02\output
2025-09-25 21:16:11,386 [INFO] graph - ENTER node=pre | raw_len=199
2025-09-25 21:16:11,387 [INFO] node.preprocess - start preprocess | raw=select database hybrid_manufacturing_categorical.csv in /data, filter rows where Scheduled_End - Scheduled_Start >= 1 hour, then export bipartite graph Machine_ID ↔ Job_ID to output/plant_graph.gexf.
2025-09-25 21:16:11,561 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 21:16:11,561 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-25 21:16:11,562 [INFO] node.intent - intent.run | mode=llm
2025-09-25 21:16:14,233 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 21:16:14,236 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 21:16:14,236 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-25 21:16:14,237 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-25 21:16:14,238 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-25 21:16:16,371 [INFO] rag.kb - KB built | docs=42
2025-09-25 21:16:16,392 [INFO] rag.kb - KB search | q_len=212 | top_k=8
2025-09-25 21:16:16,393 [INFO] graph - node=kb | snippets=8
2025-09-25 21:16:16,393 [INFO] graph - route: kb -> qt
2025-09-25 21:16:16,395 [INFO] rag.thought - thought | prompt_chars=8821 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 21:16:18,878 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 21:16:18,879 [INFO] rag.thought - thought | llm_json_len=181
2025-09-25 21:16:18,880 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 21:16:18,880 [INFO] rag.execute - RUN tool=select_rows | args={'query': 'Scheduled_End - Scheduled_Start >= 1 hour'} | cur_type=NoneType
2025-09-25 21:16:18,880 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 230, in select_rows
    raise ValueError("select_rows: 当前数据为空")
ValueError: select_rows: 当前数据为空
2025-09-25 21:16:18,883 [INFO] rag.thought - thought | prompt_chars=8821 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 21:16:21,152 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 21:16:21,153 [INFO] rag.thought - thought | llm_json_len=181
2025-09-25 21:16:21,154 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 21:16:21,154 [INFO] rag.execute - RUN tool=graph_export | args={'file': 'output/plant_graph.gexf'} | cur_type=NoneType
2025-09-25 21:16:21,155 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 668, in graph_export
    raise ValueError("graph_export: 缺少必要列或当前数据为空")
ValueError: graph_export: 缺少必要列或当前数据为空
2025-09-25 21:16:21,156 [INFO] rag.thought - thought | prompt_chars=8821 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 21:16:23,393 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 21:16:23,394 [INFO] rag.thought - thought | llm_json_len=181
2025-09-25 21:16:23,395 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 21:16:23,396 [INFO] rag.execute - RUN tool=select_rows | args={'query': 'Scheduled_End - Scheduled_Start >= 1 hour'} | cur_type=NoneType
2025-09-25 21:16:23,396 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 230, in select_rows
    raise ValueError("select_rows: 当前数据为空")
ValueError: select_rows: 当前数据为空
2025-09-25 21:16:23,397 [INFO] rag.thought - thought | prompt_chars=8821 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 21:16:25,775 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 21:16:25,776 [INFO] rag.thought - thought | llm_json_len=181
2025-09-25 21:16:25,777 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 21:16:25,777 [INFO] rag.execute - RUN tool=graph_export | args={'file': 'output/plant_graph.gexf'} | cur_type=NoneType
2025-09-25 21:16:25,777 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 668, in graph_export
    raise ValueError("graph_export: 缺少必要列或当前数据为空")
ValueError: graph_export: 缺少必要列或当前数据为空
2025-09-25 21:16:25,779 [INFO] rag.thought - thought | prompt_chars=8821 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 21:16:29,824 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 21:16:29,825 [INFO] rag.thought - thought | llm_json_len=181
2025-09-25 21:16:29,827 [INFO] rag.execute - ENTER execute | pending=2
2025-09-25 21:16:29,827 [INFO] rag.execute - RUN tool=select_rows | args={'query': 'Scheduled_End - Scheduled_Start >= 1 hour'} | cur_type=NoneType
2025-09-25 21:16:29,827 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 230, in select_rows
    raise ValueError("select_rows: 当前数据为空")
ValueError: select_rows: 当前数据为空
2025-09-25 21:16:29,828 [INFO] rag.thought - thought | prompt_chars=8821 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 21:16:33,642 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 21:16:33,643 [INFO] rag.thought - thought | llm_json_len=181
2025-09-25 21:16:33,644 [INFO] rag.execute - ENTER execute | pending=1
2025-09-25 21:16:33,644 [INFO] rag.execute - RUN tool=graph_export | args={'file': 'output/plant_graph.gexf'} | cur_type=NoneType
2025-09-25 21:16:33,644 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 55, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 668, in graph_export
    raise ValueError("graph_export: 缺少必要列或当前数据为空")
ValueError: graph_export: 缺少必要列或当前数据为空
2025-09-25 21:16:33,645 [INFO] rag.thought - thought | prompt_chars=8821 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-25 21:16:35,497 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 21:16:35,497 [INFO] rag.thought - thought | llm_json_len=181
2025-09-25 21:16:35,498 [WARNING] rag.validator - Exceeded max retry, giving up.
2025-09-25 21:16:35,499 [INFO] graph - route: qt -> summarizer
2025-09-25 21:16:36,540 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-09-25 21:16:36,541 [INFO] app - Program finished | run_id=20250925-210945
2025-09-26 17:08:40,275 [INFO] app - Program started | run_id=20250926-170840 | output_dir=F:\BiShe_02\output
2025-09-26 17:09:59,202 [INFO] graph - ENTER node=pre | raw_len=265
2025-09-26 17:09:59,203 [INFO] node.preprocess - start preprocess | raw=Select database hybrid_manufacturing_categorical.csv in /data, filter for Job_Status == "Completed" and Processing_Time > 3, sort by Energy_Consumption in descending order, select top 5, keep Job_ID, Processing_Time, Energy_Consumption, Actual_End, and save as CSV.
2025-09-26 17:09:59,513 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-26 17:09:59,515 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-26 17:09:59,516 [INFO] node.intent - intent.run | mode=llm
2025-09-26 17:10:01,345 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:10:01,351 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-26 17:10:01,352 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-26 17:10:01,354 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-26 17:10:01,354 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-26 17:10:03,446 [INFO] rag.kb - KB built | docs=42
2025-09-26 17:10:03,465 [INFO] rag.kb - KB search | q_len=291 | top_k=8
2025-09-26 17:10:03,466 [INFO] graph - node=kb | snippets=8
2025-09-26 17:10:03,466 [INFO] graph - route: kb -> qt
2025-09-26 17:10:03,468 [INFO] rag.thought - thought | prompt_chars=8862 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-26 17:10:10,516 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:10:10,518 [INFO] rag.thought - thought | llm_json_len=452
2025-09-26 17:10:10,527 [INFO] rag.qt - validator -> thought (replan)
2025-09-26 17:10:10,528 [INFO] rag.thought - thought | prompt_chars=8862 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-26 17:10:13,862 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:10:13,863 [INFO] rag.thought - thought | llm_json_len=390
2025-09-26 17:10:13,872 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-09-26 17:10:13,872 [INFO] rag.execute - ENTER execute | pending=4
2025-09-26 17:10:13,873 [INFO] rag.execute - RUN tool=select_rows | args={'query': "Job_Status == 'Completed' and Processing_Time > 3"} | cur_type=DataFrame
2025-09-26 17:10:13,891 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-09-26 17:10:13,904 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-09-26 17:10:13,906 [INFO] rag.execute - ENTER execute | pending=3
2025-09-26 17:10:13,906 [INFO] rag.execute - RUN tool=sort_rows | args={'ascending': [False, False], 'column': ['Energy_Consumption', 'Processing_Time']} | cur_type=DataFrame
2025-09-26 17:10:13,909 [INFO] rag.execute - OK tool=sort_rows | result_type=DataFrame
2025-09-26 17:10:13,918 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_sort_rows.csv
2025-09-26 17:10:13,919 [INFO] rag.execute - ENTER execute | pending=2
2025-09-26 17:10:13,919 [INFO] rag.execute - RUN tool=select_columns | args={'pair': ['Job_ID', 'Processing_Time', 'Energy_Consumption', 'Actual_End']} | cur_type=DataFrame
2025-09-26 17:10:13,921 [INFO] rag.execute - OK tool=select_columns | result_type=DataFrame
2025-09-26 17:10:13,924 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_03_select_columns.csv
2025-09-26 17:10:13,926 [INFO] rag.execute - ENTER execute | pending=1
2025-09-26 17:10:13,926 [INFO] rag.execute - RUN tool=top_n | args={'n': 5} | cur_type=DataFrame
2025-09-26 17:10:13,926 [INFO] rag.execute - OK tool=top_n | result_type=DataFrame
2025-09-26 17:10:13,928 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_04_top_n.csv
2025-09-26 17:10:13,928 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_04_top_n.csv
2025-09-26 17:10:13,928 [INFO] rag.qt - execute -> END
2025-09-26 17:10:13,929 [INFO] graph - route: qt -> summarizer
2025-09-26 17:10:13,930 [INFO] rag.summarizer - prompt_chars=957
2025-09-26 17:10:13,930 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-09-26 17:10:18,174 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:10:18,175 [INFO] app - Program finished | run_id=20250926-170840
2025-09-26 17:17:17,248 [INFO] app - Program started | run_id=20250926-171717 | output_dir=F:\BiShe_02\output
2025-09-26 17:17:40,650 [INFO] graph - ENTER node=pre | raw_len=207
2025-09-26 17:17:40,651 [INFO] node.preprocess - start preprocess | raw=Select database hybrid_manufacturing_categorical.csv in /data, add duration_min = Actual_End - Actual_Start (unit=minutes); group by Operation_Type and take mean(duration_min); output the grouped table only.
2025-09-26 17:17:40,770 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-26 17:17:40,771 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-26 17:17:40,771 [INFO] node.intent - intent.run | mode=llm
2025-09-26 17:17:43,378 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:17:43,382 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-26 17:17:43,383 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-26 17:17:43,384 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-26 17:17:43,385 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-26 17:17:45,418 [INFO] rag.kb - KB built | docs=42
2025-09-26 17:17:45,433 [INFO] rag.kb - KB search | q_len=220 | top_k=8
2025-09-26 17:17:45,434 [INFO] graph - node=kb | snippets=8
2025-09-26 17:17:45,434 [INFO] graph - route: kb -> qt
2025-09-26 17:17:45,435 [INFO] rag.thought - thought | prompt_chars=9445 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-26 17:17:50,111 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:17:50,115 [INFO] rag.thought - thought | llm_json_len=272
2025-09-26 17:17:50,126 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-09-26 17:17:50,126 [INFO] rag.execute - ENTER execute | pending=2
2025-09-26 17:17:50,126 [INFO] rag.execute - RUN tool=add_derived_column | args={'target_column': 'duration_min', 'formula': 'Actual_End - Actual_Start', 'unit': 'minutes'} | cur_type=DataFrame
2025-09-26 17:17:50,132 [INFO] rag.execute - OK tool=add_derived_column | result_type=DataFrame
2025-09-26 17:17:50,151 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_add_derived_column.csv
2025-09-26 17:17:50,152 [INFO] rag.execute - ENTER execute | pending=1
2025-09-26 17:17:50,152 [INFO] rag.execute - RUN tool=group_by_aggregate | args={'group_column': 'Operation_Type', 'agg': 'mean', 'target_column': 'duration_min'} | cur_type=DataFrame
2025-09-26 17:17:50,156 [INFO] rag.execute - OK tool=group_by_aggregate | result_type=DataFrame
2025-09-26 17:17:50,159 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_group_by_aggregate.csv
2025-09-26 17:17:50,159 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_02_group_by_aggregate.csv
2025-09-26 17:17:50,159 [INFO] rag.qt - execute -> END
2025-09-26 17:17:50,159 [INFO] graph - route: qt -> summarizer
2025-09-26 17:17:50,161 [INFO] rag.summarizer - prompt_chars=702
2025-09-26 17:17:50,161 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-09-26 17:17:59,258 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:17:59,260 [INFO] app - Program finished | run_id=20250926-171717
2025-09-26 17:22:19,104 [INFO] app - Program started | run_id=20250926-172219 | output_dir=F:\BiShe_02\output
2025-09-26 17:24:06,006 [INFO] graph - ENTER node=pre | raw_len=276
2025-09-26 17:24:06,007 [INFO] node.preprocess - start preprocess | raw=Select database hybrid_manufacturing_categorical.csv in /data, calculate the correlation between Processing_Time and Energy_Consumption; then compute average Energy_Consumption by Machine_ID, sort in descending order, and plot a bar chart to output/avg_Energy_Consumption.png.
2025-09-26 17:24:06,202 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-26 17:24:06,202 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-26 17:24:06,203 [INFO] node.intent - intent.run | mode=llm
2025-09-26 17:24:08,996 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:24:09,001 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-26 17:24:09,002 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-26 17:24:09,004 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-26 17:24:09,005 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-26 17:24:11,002 [INFO] rag.kb - KB built | docs=42
2025-09-26 17:24:11,020 [INFO] rag.kb - KB search | q_len=298 | top_k=8
2025-09-26 17:24:11,021 [INFO] graph - node=kb | snippets=8
2025-09-26 17:24:11,021 [INFO] graph - route: kb -> qt
2025-09-26 17:24:11,023 [INFO] rag.thought - thought | prompt_chars=9116 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-26 17:24:18,112 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:24:18,115 [INFO] rag.thought - thought | llm_json_len=778
2025-09-26 17:24:18,126 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-09-26 17:24:18,126 [INFO] rag.execute - ENTER execute | pending=5
2025-09-26 17:24:18,126 [INFO] rag.execute - RUN tool=select_rows | args={'query': 'True'} | cur_type=DataFrame
2025-09-26 17:24:18,127 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-09-26 17:24:18,143 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-09-26 17:24:18,144 [INFO] rag.execute - ENTER execute | pending=4
2025-09-26 17:24:18,144 [INFO] rag.execute - RUN tool=calculate_correlation | args={'target_column': 'Processing_Time', 'other_column': 'Energy_Consumption'} | cur_type=DataFrame
2025-09-26 17:24:18,148 [INFO] rag.execute - OK tool=calculate_correlation | result_type=float64
2025-09-26 17:24:18,149 [INFO] rag.execute - ENTER execute | pending=3
2025-09-26 17:24:18,149 [INFO] rag.execute - RUN tool=group_by_aggregate | args={'group_column': 'Machine_ID', 'agg': 'mean', 'target_column': 'Energy_Consumption'} | cur_type=DataFrame
2025-09-26 17:24:18,151 [INFO] rag.execute - OK tool=group_by_aggregate | result_type=DataFrame
2025-09-26 17:24:18,153 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_group_by_aggregate_1758900258.csv
2025-09-26 17:24:18,154 [INFO] rag.execute - ENTER execute | pending=2
2025-09-26 17:24:18,154 [INFO] rag.execute - RUN tool=sort_rows | args={'ascending': False, 'pair': 'Processing_Time'} | cur_type=DataFrame
2025-09-26 17:24:18,154 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 261, in sort_rows
    raise ValueError("sort_rows 需要 'column'（支持别名 sort_by/by/target_column）")
ValueError: sort_rows 需要 'column'（支持别名 sort_by/by/target_column）
2025-09-26 17:24:18,156 [INFO] rag.thought - thought | prompt_chars=9116 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-26 17:24:23,415 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:24:23,416 [INFO] rag.thought - thought | llm_json_len=535
2025-09-26 17:24:23,418 [INFO] rag.execute - ENTER execute | pending=1
2025-09-26 17:24:23,418 [INFO] rag.execute - RUN tool=plot_machine_avg_bar | args={'machine_col': 'Machine_ID', 'value_col': 'Energy_Consumption', 'file': 'output/Energy_Consumption.png'} | cur_type=DataFrame
2025-09-26 17:24:24,674 [INFO] rag.execute - OK tool=plot_machine_avg_bar | result_type=str
2025-09-26 17:24:24,675 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_02_group_by_aggregate_1758900258.csv
2025-09-26 17:24:24,675 [INFO] rag.qt - execute -> END
2025-09-26 17:24:24,675 [INFO] graph - route: qt -> summarizer
2025-09-26 17:24:24,677 [INFO] rag.summarizer - prompt_chars=794
2025-09-26 17:24:24,678 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-09-26 17:24:31,680 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:24:31,683 [INFO] app - Program finished | run_id=20250926-172219
2025-09-26 17:26:36,796 [INFO] app - Program started | run_id=20250926-172636 | output_dir=F:\BiShe_02\output
2025-09-26 17:27:15,884 [INFO] graph - ENTER node=pre | raw_len=243
2025-09-26 17:27:15,885 [INFO] node.preprocess - start preprocess | raw=Select database hybrid_manufacturing_categorical.csv in /data, compute the rolling average of Processing_Time per Machine_ID (window=2); then output the first 10 rows with columns Job_ID, Machine_ID, Processing_Time, Processing_Time_rollavg_2.
2025-09-26 17:27:17,206 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-26 17:27:17,206 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-26 17:27:17,206 [INFO] node.intent - intent.run | mode=llm
2025-09-26 17:27:19,030 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:27:19,035 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-26 17:27:19,035 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-26 17:27:19,036 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-26 17:27:19,037 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-26 17:27:21,416 [INFO] rag.kb - KB built | docs=42
2025-09-26 17:27:21,432 [INFO] rag.kb - KB search | q_len=257 | top_k=8
2025-09-26 17:27:21,432 [INFO] graph - node=kb | snippets=8
2025-09-26 17:27:21,432 [INFO] graph - route: kb -> qt
2025-09-26 17:27:21,435 [INFO] rag.thought - thought | prompt_chars=9048 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-26 17:27:25,708 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:27:25,710 [INFO] rag.thought - thought | llm_json_len=515
2025-09-26 17:27:25,719 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-09-26 17:27:25,720 [INFO] rag.execute - ENTER execute | pending=4
2025-09-26 17:27:25,720 [INFO] rag.execute - RUN tool=select_rows | args={'query': '*'} | cur_type=DataFrame
2025-09-26 17:27:25,720 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-09-26 17:27:25,733 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows_1758900445.csv
2025-09-26 17:27:25,734 [INFO] rag.execute - ENTER execute | pending=3
2025-09-26 17:27:25,734 [INFO] rag.execute - RUN tool=rolling_average | args={'window': 2, 'group_by': 'Operation_Type', 'target_column': 'Processing_Time'} | cur_type=DataFrame
2025-09-26 17:27:25,743 [INFO] rag.execute - OK tool=rolling_average | result_type=DataFrame
2025-09-26 17:27:25,754 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_rolling_average.csv
2025-09-26 17:27:25,755 [INFO] rag.execute - ENTER execute | pending=2
2025-09-26 17:27:25,755 [INFO] rag.execute - RUN tool=select_columns | args={'pair': 'Job_ID, Machine_ID, Processing_Time, Processing_Time'} | cur_type=DataFrame
2025-09-26 17:27:25,756 [INFO] rag.execute - OK tool=select_columns | result_type=DataFrame
2025-09-26 17:27:25,760 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_03_select_columns.csv
2025-09-26 17:27:25,761 [INFO] rag.execute - ENTER execute | pending=1
2025-09-26 17:27:25,761 [INFO] rag.execute - RUN tool=top_n | args={'n': 10} | cur_type=DataFrame
2025-09-26 17:27:25,761 [INFO] rag.execute - OK tool=top_n | result_type=DataFrame
2025-09-26 17:27:25,763 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_04_top_n.csv
2025-09-26 17:27:25,763 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_04_top_n.csv
2025-09-26 17:27:25,763 [INFO] rag.qt - execute -> END
2025-09-26 17:27:25,765 [INFO] graph - route: qt -> summarizer
2025-09-26 17:27:25,766 [INFO] rag.summarizer - prompt_chars=1123
2025-09-26 17:27:25,766 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-09-26 17:27:31,614 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:27:31,617 [INFO] app - Program finished | run_id=20250926-172636
2025-09-26 17:30:48,660 [INFO] app - Program started | run_id=20250926-173048 | output_dir=F:\BiShe_02\output
2025-09-26 17:31:54,302 [INFO] graph - ENTER node=pre | raw_len=237
2025-09-26 17:31:54,303 [INFO] node.preprocess - start preprocess | raw=Select database hybrid_manufacturing_categorical.csv in /data, filter rows where Scheduled_End - Scheduled_Start >= 1 hour; then build a bipartite graph Machine_ID ↔ Job_ID from the filtered data and export it to output/plant_graph.gexf.
2025-09-26 17:31:54,454 [INFO] node.preprocess - preprocess | file=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-26 17:31:54,454 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv | cols=13
2025-09-26 17:31:54,455 [INFO] node.intent - intent.run | mode=llm
2025-09-26 17:31:57,441 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:31:57,445 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-26 17:31:57,445 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=F:\BiShe_02\data\hybrid_manufacturing_categorical.csv
2025-09-26 17:31:57,448 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-26 17:31:57,448 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-26 17:31:59,457 [INFO] rag.kb - KB built | docs=42
2025-09-26 17:31:59,476 [INFO] rag.kb - KB search | q_len=250 | top_k=8
2025-09-26 17:31:59,476 [INFO] graph - node=kb | snippets=8
2025-09-26 17:31:59,477 [INFO] graph - route: kb -> qt
2025-09-26 17:31:59,478 [INFO] rag.thought - thought | prompt_chars=9089 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-09-26 17:32:03,945 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:32:03,946 [INFO] rag.thought - thought | llm_json_len=181
2025-09-26 17:32:03,954 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-09-26 17:32:03,955 [INFO] rag.execute - ENTER execute | pending=2
2025-09-26 17:32:03,955 [INFO] rag.execute - RUN tool=select_rows | args={'query': 'Scheduled_End - Scheduled_Start >= 1 hour'} | cur_type=DataFrame
2025-09-26 17:32:03,963 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-09-26 17:32:03,973 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-09-26 17:32:03,974 [INFO] rag.execute - ENTER execute | pending=1
2025-09-26 17:32:03,974 [INFO] rag.execute - RUN tool=graph_export | args={'file': 'output/plant_graph.gexf'} | cur_type=DataFrame
2025-09-26 17:32:04,021 [INFO] rag.execute - OK tool=graph_export | result_type=str
2025-09-26 17:32:04,023 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_01_select_rows.csv
2025-09-26 17:32:04,023 [INFO] rag.qt - execute -> END
2025-09-26 17:32:04,023 [INFO] graph - route: qt -> summarizer
2025-09-26 17:32:04,027 [INFO] rag.summarizer - prompt_chars=2971
2025-09-26 17:32:04,027 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-09-26 17:32:09,532 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:32:09,534 [INFO] app - Program finished | run_id=20250926-173048
2025-09-26 17:37:21,342 [INFO] app - Program started | run_id=20250926-173721 | output_dir=F:\BiShe_02\output
2025-09-26 17:38:01,500 [INFO] graph - ENTER node=pre | raw_len=57
2025-09-26 17:38:01,500 [INFO] node.preprocess - start preprocess | raw=run Autoencoder algorithm on dataset in \data\SKAB\valve1
2025-09-26 17:38:01,565 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-26 17:38:01,566 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-26 17:38:01,567 [INFO] node.intent - intent.run | mode=llm
2025-09-26 17:38:03,738 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:38:03,743 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['AE'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-26 17:38:03,744 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['AE'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-26 17:38:03,745 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-26 17:38:03,745 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-26 17:38:05,777 [INFO] rag.kb - KB built | docs=40
2025-09-26 17:38:05,789 [INFO] rag.kb - KB search | q_len=66 | top_k=8
2025-09-26 17:38:05,789 [INFO] graph - node=kb | snippets=8
2025-09-26 17:38:05,789 [INFO] graph - route: kb -> anomaly
2025-09-26 17:38:05,790 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-26 17:38:05,884 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-26 17:38:05,884 [INFO] rag.anomaly - algorithms | selected=['AE'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-26 17:38:05,917 [INFO] ad - AE.build | input_dim=7 | cfg=custom
2025-09-26 17:38:26,792 [INFO] rag.anomaly - best algo=AE
2025-09-26 17:38:28,418 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-26 17:38:32,605 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-26 17:38:32,610 [INFO] rag.summarizer - prompt_chars=756
2025-09-26 17:38:32,610 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-09-26 17:38:37,155 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 17:38:37,167 [INFO] app - Program finished | run_id=20250926-173721
2025-09-26 18:48:37,033 [INFO] app - Program started | run_id=20250926-184837 | output_dir=F:\BiShe_02\output
2025-09-26 19:21:53,921 [INFO] app - Program started | run_id=20250926-192153 | output_dir=F:\BiShe_02\output
2025-09-26 19:22:20,358 [INFO] graph - ENTER node=pre | raw_len=49
2025-09-26 19:22:20,358 [INFO] node.preprocess - start preprocess | raw=run EIF algorithm on dataset in \data\SKAB\valve1
2025-09-26 19:22:20,628 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-26 19:22:20,628 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-26 19:22:20,644 [INFO] node.intent - intent.run | mode=llm
2025-09-26 19:22:26,218 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 19:22:26,223 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-26 19:22:26,223 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-26 19:22:26,225 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-26 19:22:26,226 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-26 19:22:28,260 [INFO] rag.kb - KB built | docs=40
2025-09-26 19:22:28,271 [INFO] rag.kb - KB search | q_len=58 | top_k=8
2025-09-26 19:22:28,272 [INFO] graph - node=kb | snippets=8
2025-09-26 19:22:28,272 [INFO] graph - route: kb -> anomaly
2025-09-26 19:22:28,274 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-26 19:22:28,365 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-26 19:22:28,366 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-26 19:22:28,635 [INFO] rag.anomaly - best algo=EIF
2025-09-26 19:22:30,209 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-09-26 19:22:34,153 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-09-26 19:22:34,157 [INFO] rag.summarizer - prompt_chars=748
2025-09-26 19:22:34,157 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-09-26 19:22:41,873 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 19:22:41,875 [INFO] app - Program finished | run_id=20250926-192153
2025-09-26 19:24:05,435 [INFO] app - Program started | run_id=20250926-192405 | output_dir=F:\BiShe_02\output
2025-09-26 19:24:09,447 [INFO] graph - ENTER node=pre | raw_len=49
2025-09-26 19:24:09,448 [INFO] node.preprocess - start preprocess | raw=run LOF algorithm on dataset in \data\SKAB\valve1
2025-09-26 19:24:09,505 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-26 19:24:09,506 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-09-26 19:24:09,507 [INFO] node.intent - intent.run | mode=llm
2025-09-26 19:24:11,918 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 19:24:11,922 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-26 19:24:11,923 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-09-26 19:24:11,923 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-09-26 19:24:11,925 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-26 19:24:13,935 [INFO] rag.kb - KB built | docs=40
2025-09-26 19:24:13,946 [INFO] rag.kb - KB search | q_len=58 | top_k=8
2025-09-26 19:24:13,947 [INFO] graph - node=kb | snippets=8
2025-09-26 19:24:13,947 [INFO] graph - route: kb -> anomaly
2025-09-26 19:24:13,949 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-09-26 19:24:14,041 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-09-26 19:24:14,041 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-09-26 19:24:15,853 [INFO] rag.anomaly - best algo=LOF
2025-09-26 19:24:17,380 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_1.xlsx | sheets=2
2025-09-26 19:24:21,316 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_1_pr_curve.png | f1=output\valve1_anomaly_results_1_f1_curve.png | roc=output\valve1_anomaly_results_1_roc_curve.png
2025-09-26 19:24:21,320 [INFO] rag.summarizer - prompt_chars=756
2025-09-26 19:24:21,321 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-09-26 19:24:27,028 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-26 19:24:27,031 [INFO] app - Program finished | run_id=20250926-192405
2025-10-03 15:10:56,496 [INFO] app - Program started | run_id=20251003-151056 | output_dir=F:\BiShe_02\output
2025-10-03 15:11:06,851 [INFO] graph - ENTER node=pre | raw_len=142
2025-10-03 15:11:06,852 [INFO] node.preprocess - start preprocess | raw=On data/hybrid_manufacturing_categorical.csv, select rows with: Job_Status == "Failed" and Energy_Consumption > 120 (use pandas query syntax).
2025-10-03 15:11:07,240 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:11:07,241 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:11:07,242 [INFO] node.intent - intent.run | mode=llm
2025-10-03 15:11:09,023 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:11:09,027 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:11:09,028 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:11:09,030 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 15:11:09,030 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 15:11:10,858 [INFO] rag.kb - KB built | docs=42
2025-10-03 15:11:10,872 [INFO] rag.kb - KB search | q_len=142 | top_k=8
2025-10-03 15:11:10,872 [INFO] graph - node=kb | snippets=8
2025-10-03 15:11:10,872 [INFO] graph - route: kb -> qt
2025-10-03 15:11:10,874 [INFO] rag.thought - thought | prompt_chars=8943 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:11:12,466 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:11:12,467 [INFO] rag.thought - thought | llm_json_len=101
2025-10-03 15:11:12,475 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 15:11:12,476 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 15:11:12,476 [INFO] rag.execute - RUN tool=select_rows | args={'query': "Job_Status == 'Failed' and Energy_Consumption > 120"} | cur_type=DataFrame
2025-10-03 15:11:12,485 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 15:11:12,489 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-03 15:11:12,489 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_01_select_rows.csv
2025-10-03 15:11:12,490 [INFO] rag.qt - execute -> END
2025-10-03 15:11:12,490 [INFO] graph - route: qt -> summarizer
2025-10-03 15:11:12,492 [INFO] rag.summarizer - prompt_chars=695
2025-10-03 15:11:12,492 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 15:11:18,383 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:11:18,387 [INFO] app - Program finished | run_id=20251003-151056
2025-10-03 15:14:49,503 [INFO] app - Program started | run_id=20251003-151449 | output_dir=F:\BiShe_02\output
2025-10-03 15:15:02,345 [INFO] graph - ENTER node=pre | raw_len=142
2025-10-03 15:15:02,346 [INFO] node.preprocess - start preprocess | raw=On data/hybrid_manufacturing_categorical.csv, select rows with: Job_Status == "Failed" and Energy_Consumption > 120 (use pandas query syntax).
2025-10-03 15:15:02,434 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:15:02,434 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:15:02,436 [INFO] node.intent - intent.run | mode=llm
2025-10-03 15:15:04,168 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:15:04,172 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:15:04,172 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:15:04,174 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 15:15:04,174 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 15:15:05,983 [INFO] rag.kb - KB built | docs=42
2025-10-03 15:15:05,997 [INFO] rag.kb - KB search | q_len=142 | top_k=8
2025-10-03 15:15:05,997 [INFO] graph - node=kb | snippets=8
2025-10-03 15:15:05,997 [INFO] graph - route: kb -> qt
2025-10-03 15:15:05,999 [INFO] rag.thought - thought | prompt_chars=8943 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:15:07,491 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:15:07,492 [INFO] rag.thought - thought | llm_json_len=101
2025-10-03 15:15:07,500 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 15:15:07,500 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 15:15:07,500 [INFO] rag.execute - RUN tool=select_rows | args={'query': "Job_Status == 'Failed' and Energy_Consumption > 120"} | cur_type=DataFrame
2025-10-03 15:15:07,512 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 15:15:07,516 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-03 15:15:07,516 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_01_select_rows.csv
2025-10-03 15:15:07,516 [INFO] rag.qt - execute -> END
2025-10-03 15:15:07,517 [INFO] graph - route: qt -> summarizer
2025-10-03 15:15:07,517 [INFO] rag.summarizer - prompt_chars=695
2025-10-03 15:15:07,517 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 15:15:13,835 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:15:13,836 [INFO] app - Program finished | run_id=20251003-151449
2025-10-03 15:17:35,429 [INFO] app - Program started | run_id=20251003-151735 | output_dir=F:\BiShe_02\output
2025-10-03 15:17:43,510 [INFO] graph - ENTER node=pre | raw_len=128
2025-10-03 15:17:43,511 [INFO] node.preprocess - start preprocess | raw=Using the default dataset, top_n: take the top 10 rows by Processing_Time in descending order (use sort_column=Processing_Time).
2025-10-03 15:17:43,649 [INFO] node.preprocess - preprocess | default_file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:17:43,649 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:17:43,651 [INFO] node.intent - intent.run | mode=llm
2025-10-03 15:17:45,247 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:17:45,251 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:17:45,251 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:17:45,253 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 15:17:45,254 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 15:17:47,034 [INFO] rag.kb - KB built | docs=42
2025-10-03 15:17:47,049 [INFO] rag.kb - KB search | q_len=141 | top_k=8
2025-10-03 15:17:47,049 [INFO] graph - node=kb | snippets=8
2025-10-03 15:17:47,049 [INFO] graph - route: kb -> qt
2025-10-03 15:17:47,052 [INFO] rag.thought - thought | prompt_chars=8564 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:17:48,587 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:17:48,589 [INFO] rag.thought - thought | llm_json_len=74
2025-10-03 15:17:48,596 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 15:17:48,598 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 15:17:48,598 [INFO] rag.execute - RUN tool=top_n | args={'n': 10, 'column': 'Processing_Time'} | cur_type=DataFrame
2025-10-03 15:17:48,599 [INFO] rag.execute - OK tool=top_n | result_type=DataFrame
2025-10-03 15:17:48,609 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_top_n.csv
2025-10-03 15:17:48,609 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_01_top_n.csv
2025-10-03 15:17:48,609 [INFO] rag.qt - execute -> END
2025-10-03 15:17:48,611 [INFO] graph - route: qt -> summarizer
2025-10-03 15:17:48,614 [INFO] rag.summarizer - prompt_chars=2856
2025-10-03 15:17:48,616 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 15:17:52,547 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:17:52,549 [INFO] app - Program finished | run_id=20251003-151735
2025-10-03 15:19:17,357 [INFO] app - Program started | run_id=20251003-151917 | output_dir=F:\BiShe_02\output
2025-10-03 15:19:24,501 [INFO] graph - ENTER node=pre | raw_len=110
2025-10-03 15:19:24,502 [INFO] node.preprocess - start preprocess | raw=In data/hybrid_manufacturing_categorical.csv, compute the mean of Processing_Time and return the scalar value.
2025-10-03 15:19:24,583 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:19:24,584 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:19:24,585 [INFO] node.intent - intent.run | mode=llm
2025-10-03 15:19:26,574 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:19:26,576 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:19:26,577 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:19:26,578 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 15:19:26,579 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 15:19:28,554 [INFO] rag.kb - KB built | docs=42
2025-10-03 15:19:28,570 [INFO] rag.kb - KB search | q_len=110 | top_k=8
2025-10-03 15:19:28,570 [INFO] graph - node=kb | snippets=8
2025-10-03 15:19:28,571 [INFO] graph - route: kb -> qt
2025-10-03 15:19:28,572 [INFO] rag.thought - thought | prompt_chars=8917 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:19:31,167 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:19:31,170 [INFO] rag.thought - thought | llm_json_len=72
2025-10-03 15:19:31,181 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 15:19:31,182 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 15:19:31,182 [INFO] rag.execute - RUN tool=calculate_average | args={'target_column': 'Processing_Time'} | cur_type=DataFrame
2025-10-03 15:19:31,182 [INFO] rag.execute - OK tool=calculate_average | result_type=float64
2025-10-03 15:19:31,182 [INFO] rag.execute - Q&T finished | last_csv=None
2025-10-03 15:19:31,183 [INFO] rag.qt - execute -> END
2025-10-03 15:19:31,183 [INFO] graph - route: qt -> summarizer
2025-10-03 15:19:31,190 [INFO] rag.summarizer - prompt_chars=2783
2025-10-03 15:19:31,190 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 15:19:40,746 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:19:40,749 [INFO] app - Program finished | run_id=20251003-151917
2025-10-03 15:23:17,044 [INFO] app - Program started | run_id=20251003-152317 | output_dir=F:\BiShe_02\output
2025-10-03 15:23:23,223 [INFO] graph - ENTER node=pre | raw_len=142
2025-10-03 15:23:23,224 [INFO] node.preprocess - start preprocess | raw=On data/hybrid_manufacturing_categorical.csv, select rows with: Job_Status == "Failed" and Energy_Consumption > 120 (use pandas query syntax).
2025-10-03 15:23:23,311 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:23:23,311 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:23:23,313 [INFO] node.intent - intent.run | mode=llm
2025-10-03 15:23:25,656 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:23:25,661 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:23:25,661 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:23:25,663 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 15:23:25,664 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 15:23:27,488 [INFO] rag.kb - KB built | docs=42
2025-10-03 15:23:27,503 [INFO] rag.kb - KB search | q_len=142 | top_k=8
2025-10-03 15:23:27,503 [INFO] graph - node=kb | snippets=8
2025-10-03 15:23:27,503 [INFO] graph - route: kb -> qt
2025-10-03 15:23:27,505 [INFO] rag.thought - thought | prompt_chars=8943 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:23:29,914 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:23:29,916 [INFO] rag.thought - thought | llm_json_len=101
2025-10-03 15:23:29,925 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 15:23:29,925 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 15:23:29,925 [INFO] rag.execute - RUN tool=select_rows | args={'query': "Job_Status == 'Failed' and Energy_Consumption > 120"} | cur_type=DataFrame
2025-10-03 15:23:29,930 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 15:23:29,934 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-03 15:23:29,935 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_01_select_rows.csv
2025-10-03 15:23:29,935 [INFO] rag.qt - execute -> END
2025-10-03 15:23:29,935 [INFO] graph - route: qt -> summarizer
2025-10-03 15:23:29,936 [INFO] rag.summarizer - prompt_chars=695
2025-10-03 15:23:29,936 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 15:23:36,740 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:23:36,743 [INFO] app - Program finished | run_id=20251003-152317
2025-10-03 15:27:31,664 [INFO] app - Program started | run_id=20251003-152731 | output_dir=F:\BiShe_02\output
2025-10-03 15:27:46,208 [INFO] graph - ENTER node=pre | raw_len=128
2025-10-03 15:27:46,208 [INFO] node.preprocess - start preprocess | raw=Using the default dataset, top_n: take the top 10 rows by Processing_Time in descending order (use sort_column=Processing_Time).
2025-10-03 15:27:46,317 [INFO] node.preprocess - preprocess | default_file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:27:46,318 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:27:46,319 [INFO] node.intent - intent.run | mode=llm
2025-10-03 15:27:53,978 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:27:53,983 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:27:53,984 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:27:53,986 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 15:27:53,986 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 15:27:55,791 [INFO] rag.kb - KB built | docs=42
2025-10-03 15:27:55,804 [INFO] rag.kb - KB search | q_len=141 | top_k=8
2025-10-03 15:27:55,804 [INFO] graph - node=kb | snippets=8
2025-10-03 15:27:55,805 [INFO] graph - route: kb -> qt
2025-10-03 15:27:55,806 [INFO] rag.thought - thought | prompt_chars=8564 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:27:57,635 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:27:57,637 [INFO] rag.thought - thought | llm_json_len=74
2025-10-03 15:27:57,648 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 15:27:57,649 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 15:27:57,649 [INFO] rag.execute - RUN tool=top_n | args={'n': 10, 'column': 'Processing_Time'} | cur_type=DataFrame
2025-10-03 15:27:57,650 [INFO] rag.execute - OK tool=top_n | result_type=DataFrame
2025-10-03 15:27:57,658 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_top_n.csv
2025-10-03 15:27:57,659 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_01_top_n.csv
2025-10-03 15:27:57,659 [INFO] rag.qt - execute -> END
2025-10-03 15:27:57,659 [INFO] graph - route: qt -> summarizer
2025-10-03 15:27:57,663 [INFO] rag.summarizer - prompt_chars=2856
2025-10-03 15:27:57,663 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 15:28:00,865 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:28:00,867 [INFO] app - Program finished | run_id=20251003-152731
2025-10-03 15:31:31,444 [INFO] app - Program started | run_id=20251003-153131 | output_dir=F:\BiShe_02\output
2025-10-03 15:31:41,432 [INFO] graph - ENTER node=pre | raw_len=110
2025-10-03 15:31:41,433 [INFO] node.preprocess - start preprocess | raw=In data/hybrid_manufacturing_categorical.csv, compute the mean of Processing_Time and return the scalar value.
2025-10-03 15:31:41,496 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:31:41,497 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:31:41,499 [INFO] node.intent - intent.run | mode=llm
2025-10-03 15:31:43,600 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:31:43,603 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:31:43,603 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:31:43,605 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 15:31:43,605 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 15:31:45,495 [INFO] rag.kb - KB built | docs=42
2025-10-03 15:31:45,509 [INFO] rag.kb - KB search | q_len=110 | top_k=8
2025-10-03 15:31:45,509 [INFO] graph - node=kb | snippets=8
2025-10-03 15:31:45,509 [INFO] graph - route: kb -> qt
2025-10-03 15:31:45,512 [INFO] rag.thought - thought | prompt_chars=8917 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:31:46,933 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:31:46,936 [INFO] rag.thought - thought | llm_json_len=72
2025-10-03 15:31:46,944 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 15:31:46,945 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 15:31:46,945 [INFO] rag.execute - RUN tool=calculate_average | args={'target_column': 'Processing_Time'} | cur_type=DataFrame
2025-10-03 15:31:46,946 [INFO] rag.execute - OK tool=calculate_average | result_type=float64
2025-10-03 15:31:46,946 [INFO] rag.execute - Q&T finished | last_csv=None
2025-10-03 15:31:46,946 [INFO] rag.qt - execute -> END
2025-10-03 15:31:46,946 [INFO] graph - route: qt -> summarizer
2025-10-03 15:31:46,952 [INFO] rag.summarizer - prompt_chars=2783
2025-10-03 15:31:46,952 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 15:31:50,114 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:31:50,116 [INFO] app - Program finished | run_id=20251003-153131
2025-10-03 15:33:23,061 [INFO] app - Program started | run_id=20251003-153323 | output_dir=F:\BiShe_02\output
2025-10-03 15:33:31,341 [INFO] graph - ENTER node=pre | raw_len=107
2025-10-03 15:33:31,342 [INFO] node.preprocess - start preprocess | raw=In data/hybrid_manufacturing_categorical.csv, select rows where Scheduled_End - Scheduled_Start >= 4 hours.
2025-10-03 15:33:31,428 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:33:31,428 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:33:31,430 [INFO] node.intent - intent.run | mode=llm
2025-10-03 15:33:32,773 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:33:32,777 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:33:32,777 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:33:32,778 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 15:33:32,779 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 15:33:34,715 [INFO] rag.kb - KB built | docs=42
2025-10-03 15:33:34,727 [INFO] rag.kb - KB search | q_len=107 | top_k=8
2025-10-03 15:33:34,729 [INFO] graph - node=kb | snippets=8
2025-10-03 15:33:34,729 [INFO] graph - route: kb -> qt
2025-10-03 15:33:34,731 [INFO] rag.thought - thought | prompt_chars=8680 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:33:36,393 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:33:36,394 [INFO] rag.thought - thought | llm_json_len=92
2025-10-03 15:33:36,402 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 15:33:36,403 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 15:33:36,403 [INFO] rag.execute - RUN tool=select_rows | args={'query': 'Scheduled_End - Scheduled_Start >= 4 hours'} | cur_type=DataFrame
2025-10-03 15:33:36,408 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 15:33:36,413 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-03 15:33:36,413 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_01_select_rows.csv
2025-10-03 15:33:36,413 [INFO] rag.qt - execute -> END
2025-10-03 15:33:36,414 [INFO] graph - route: qt -> summarizer
2025-10-03 15:33:36,415 [INFO] rag.summarizer - prompt_chars=660
2025-10-03 15:33:36,415 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 15:33:40,060 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:33:40,064 [INFO] app - Program finished | run_id=20251003-153323
2025-10-03 15:37:44,129 [INFO] app - Program started | run_id=20251003-153744 | output_dir=F:\BiShe_02\output
2025-10-03 15:37:53,641 [INFO] graph - ENTER node=pre | raw_len=185
2025-10-03 15:37:53,642 [INFO] node.preprocess - start preprocess | raw=On the default dataset, first select rows where Operation_Type == "Cutting" (recognize “job type = Cutting” as Operation_Type), then sort rows by Energy_Consumption in descending order.
2025-10-03 15:37:53,784 [INFO] node.preprocess - preprocess | default_file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:37:53,784 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:37:53,785 [INFO] node.intent - intent.run | mode=llm
2025-10-03 15:37:55,340 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:37:55,344 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:37:55,344 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:37:55,346 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 15:37:55,346 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 15:37:57,421 [INFO] rag.kb - KB built | docs=42
2025-10-03 15:37:57,437 [INFO] rag.kb - KB search | q_len=198 | top_k=8
2025-10-03 15:37:57,438 [INFO] graph - node=kb | snippets=8
2025-10-03 15:37:57,438 [INFO] graph - route: kb -> qt
2025-10-03 15:37:57,441 [INFO] rag.thought - thought | prompt_chars=8232 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:38:01,721 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:38:01,722 [INFO] rag.thought - thought | llm_json_len=211
2025-10-03 15:38:01,730 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 15:38:01,731 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 15:38:01,731 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "Operation_Type == 'Cutting'"} | cur_type=DataFrame
2025-10-03 15:38:01,734 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 15:38:01,740 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-03 15:38:01,741 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 15:38:01,741 [INFO] rag.execute - RUN tool=sort_rows | args={'ascending': [False, False], 'column': ['Energy_Consumption', 'Processing_Time']} | cur_type=DataFrame
2025-10-03 15:38:01,747 [INFO] rag.execute - OK tool=sort_rows | result_type=DataFrame
2025-10-03 15:38:01,749 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_sort_rows.csv
2025-10-03 15:38:01,749 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_02_sort_rows.csv
2025-10-03 15:38:01,749 [INFO] rag.qt - execute -> END
2025-10-03 15:38:01,750 [INFO] graph - route: qt -> summarizer
2025-10-03 15:38:01,750 [INFO] rag.summarizer - prompt_chars=736
2025-10-03 15:38:01,750 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 15:38:05,911 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:38:05,913 [INFO] app - Program finished | run_id=20251003-153744
2025-10-03 15:40:47,870 [INFO] app - Program started | run_id=20251003-154047 | output_dir=F:\BiShe_02\output
2025-10-03 15:40:57,078 [INFO] graph - ENTER node=pre | raw_len=145
2025-10-03 15:40:57,079 [INFO] node.preprocess - start preprocess | raw=In data/hybrid_manufacturing_categorical.csv, first select rows where Machine_ID == "M_03", then top_n to return the top 5 by Energy_Consumption.
2025-10-03 15:40:57,162 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:40:57,162 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:40:57,164 [INFO] node.intent - intent.run | mode=llm
2025-10-03 15:40:58,843 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:40:58,846 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:40:58,848 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:40:58,850 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 15:40:58,850 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 15:41:00,689 [INFO] rag.kb - KB built | docs=42
2025-10-03 15:41:00,704 [INFO] rag.kb - KB search | q_len=145 | top_k=8
2025-10-03 15:41:00,705 [INFO] graph - node=kb | snippets=8
2025-10-03 15:41:00,705 [INFO] graph - route: kb -> qt
2025-10-03 15:41:00,706 [INFO] rag.thought - thought | prompt_chars=8683 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:41:02,889 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:41:02,891 [INFO] rag.thought - thought | llm_json_len=162
2025-10-03 15:41:02,899 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 15:41:02,899 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 15:41:02,899 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "Machine_ID == 'M_03'"} | cur_type=DataFrame
2025-10-03 15:41:02,902 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 15:41:02,907 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-03 15:41:02,908 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 15:41:02,908 [INFO] rag.execute - RUN tool=top_n | args={'n': 5, 'target_column': 'Energy_Consumption'} | cur_type=DataFrame
2025-10-03 15:41:02,909 [INFO] rag.execute - OK tool=top_n | result_type=DataFrame
2025-10-03 15:41:02,910 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_top_n.csv
2025-10-03 15:41:02,910 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_02_top_n.csv
2025-10-03 15:41:02,910 [INFO] rag.qt - execute -> END
2025-10-03 15:41:02,911 [INFO] graph - route: qt -> summarizer
2025-10-03 15:41:02,912 [INFO] rag.summarizer - prompt_chars=692
2025-10-03 15:41:02,912 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 15:41:07,059 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:41:07,060 [INFO] app - Program finished | run_id=20251003-154047
2025-10-03 15:50:20,828 [INFO] app - Program started | run_id=20251003-155020 | output_dir=F:\BiShe_02\output
2025-10-03 15:50:29,087 [INFO] graph - ENTER node=pre | raw_len=167
2025-10-03 15:50:29,088 [INFO] node.preprocess - start preprocess | raw=On the default dataset, add_derived_column: setup_minutes = (Actual_Start - Scheduled_Start) with unit minutes; then select columns to keep only Job_ID, setup_minutes.
2025-10-03 15:50:29,215 [INFO] node.preprocess - preprocess | default_file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:50:29,215 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:50:29,217 [INFO] node.intent - intent.run | mode=llm
2025-10-03 15:50:30,848 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:50:30,851 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:50:30,853 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:50:30,854 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 15:50:30,855 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 15:50:32,785 [INFO] rag.kb - KB built | docs=42
2025-10-03 15:50:32,801 [INFO] rag.kb - KB search | q_len=167 | top_k=8
2025-10-03 15:50:32,802 [INFO] graph - node=kb | snippets=8
2025-10-03 15:50:32,802 [INFO] graph - route: kb -> qt
2025-10-03 15:50:32,803 [INFO] rag.thought - thought | prompt_chars=8759 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:50:35,808 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:50:35,811 [INFO] rag.thought - thought | llm_json_len=239
2025-10-03 15:50:35,820 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 15:50:35,820 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 15:50:35,820 [INFO] rag.execute - RUN tool=add_derived_column | args={'target_column': 'setup_minutes', 'formula': 'Actual_Start - Scheduled_Start', 'unit': 'minutes'} | cur_type=DataFrame
2025-10-03 15:50:35,826 [INFO] rag.execute - OK tool=add_derived_column | result_type=DataFrame
2025-10-03 15:50:35,846 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_add_derived_column.csv
2025-10-03 15:50:35,847 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 15:50:35,848 [INFO] rag.execute - RUN tool=select_columns | args={'pair': ['Job_ID', 'setup_minutes']} | cur_type=DataFrame
2025-10-03 15:50:35,849 [INFO] rag.execute - OK tool=select_columns | result_type=DataFrame
2025-10-03 15:50:35,852 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_select_columns.csv
2025-10-03 15:50:35,852 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_02_select_columns.csv
2025-10-03 15:50:35,852 [INFO] rag.qt - execute -> END
2025-10-03 15:50:35,854 [INFO] graph - route: qt -> summarizer
2025-10-03 15:50:35,856 [INFO] rag.summarizer - prompt_chars=726
2025-10-03 15:50:35,856 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 15:50:42,949 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:50:42,951 [INFO] app - Program finished | run_id=20251003-155020
2025-10-03 15:53:08,642 [INFO] app - Program started | run_id=20251003-155308 | output_dir=F:\BiShe_02\output
2025-10-03 15:53:19,990 [INFO] graph - ENTER node=pre | raw_len=168
2025-10-03 15:53:19,991 [INFO] node.preprocess - start preprocess | raw=In data/hybrid_manufacturing_categorical.csv, group by aggregate: compute the mean of Energy_Consumption by Machine_ID, then sort rows by that mean in descending order.
2025-10-03 15:53:20,102 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:53:20,102 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:53:20,103 [INFO] node.intent - intent.run | mode=llm
2025-10-03 15:53:21,801 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:53:21,804 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:53:21,805 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:53:21,806 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 15:53:21,806 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 15:53:23,571 [INFO] rag.kb - KB built | docs=42
2025-10-03 15:53:23,584 [INFO] rag.kb - KB search | q_len=181 | top_k=8
2025-10-03 15:53:23,584 [INFO] graph - node=kb | snippets=8
2025-10-03 15:53:23,585 [INFO] graph - route: kb -> qt
2025-10-03 15:53:23,586 [INFO] rag.thought - thought | prompt_chars=8679 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:53:26,928 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:53:26,930 [INFO] rag.thought - thought | llm_json_len=329
2025-10-03 15:53:26,941 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 15:53:26,941 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 15:53:26,941 [INFO] rag.execute - RUN tool=group_by_aggregate | args={'group_column': 'Machine_ID', 'agg': 'mean', 'target_column': 'Energy_Consumption'} | cur_type=DataFrame
2025-10-03 15:53:26,946 [INFO] rag.execute - OK tool=group_by_aggregate | result_type=DataFrame
2025-10-03 15:53:26,951 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_group_by_aggregate.csv
2025-10-03 15:53:26,952 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 15:53:26,952 [INFO] rag.execute - RUN tool=sort_rows | args={'ascending': False, 'column': 'Energy_Consumption'} | cur_type=DataFrame
2025-10-03 15:53:26,953 [INFO] rag.execute - OK tool=sort_rows | result_type=DataFrame
2025-10-03 15:53:26,955 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_sort_rows.csv
2025-10-03 15:53:26,955 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_02_sort_rows.csv
2025-10-03 15:53:26,955 [INFO] rag.qt - execute -> END
2025-10-03 15:53:26,955 [INFO] graph - route: qt -> summarizer
2025-10-03 15:53:26,958 [INFO] rag.summarizer - prompt_chars=666
2025-10-03 15:53:26,958 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 15:53:30,402 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:53:30,404 [INFO] app - Program finished | run_id=20251003-155308
2025-10-03 15:57:31,911 [INFO] app - Program started | run_id=20251003-155731 | output_dir=F:\BiShe_02\output
2025-10-03 15:57:39,876 [INFO] graph - ENTER node=pre | raw_len=182
2025-10-03 15:57:39,877 [INFO] node.preprocess - start preprocess | raw=Using the default dataset, filter date between start & end: Actual_Start between 2023-03-18 10:00 and 2023-03-18 12:00 (inclusive = "both"); then top_n the top 10 by Processing_Time.
2025-10-03 15:57:39,977 [INFO] node.preprocess - preprocess | default_file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:57:39,977 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 15:57:39,979 [INFO] node.intent - intent.run | mode=llm
2025-10-03 15:57:41,758 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:57:41,763 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:57:41,765 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 15:57:41,766 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 15:57:41,766 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 15:57:43,584 [INFO] rag.kb - KB built | docs=42
2025-10-03 15:57:43,600 [INFO] rag.kb - KB search | q_len=182 | top_k=8
2025-10-03 15:57:43,600 [INFO] graph - node=kb | snippets=8
2025-10-03 15:57:43,601 [INFO] graph - route: kb -> qt
2025-10-03 15:57:43,603 [INFO] rag.thought - thought | prompt_chars=9006 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:57:46,546 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:57:46,548 [INFO] rag.thought - thought | llm_json_len=249
2025-10-03 15:57:46,557 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 15:57:46,558 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 15:57:46,558 [INFO] rag.execute - RUN tool=filter_date_between_start_end | args={'start': '2023-03-18 10:00', 'end': '2023-03-18 12:00', 'inclusive': 'both', 'target_column': 'Actual_Start'} | cur_type=DataFrame
2025-10-03 15:57:46,562 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 313, in filter_date_between_start_end
    mask  = df[col].between(start, end, inclusive=incl)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\series.py", line 5649, in between
    lmask = self >= left
            ^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\ops\common.py", line 76, in new_method
    return method(self, other)
           ^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\arraylike.py", line 60, in __ge__
    return self._cmp_method(other, operator.ge)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\series.py", line 6130, in _cmp_method
    res_values = ops.comparison_op(lvalues, rvalues, op)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\ops\array_ops.py", line 344, in comparison_op
    res_values = comp_method_OBJECT_ARRAY(op, lvalues, rvalues)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\ops\array_ops.py", line 129, in comp_method_OBJECT_ARRAY
    result = libops.scalar_compare(x.ravel(), y, op)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "pandas/_libs/ops.pyx", line 107, in pandas._libs.ops.scalar_compare
TypeError: '>=' not supported between instances of 'str' and 'Timestamp'
2025-10-03 15:57:46,655 [INFO] rag.thought - thought | prompt_chars=9006 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 15:57:49,295 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:57:49,298 [INFO] rag.thought - thought | llm_json_len=244
2025-10-03 15:57:49,300 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 15:57:49,301 [INFO] rag.execute - RUN tool=top_n | args={'n': 10, 'column': 'Processing_Time'} | cur_type=DataFrame
2025-10-03 15:57:49,302 [INFO] rag.execute - OK tool=top_n | result_type=DataFrame
2025-10-03 15:57:49,311 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_top_n.csv
2025-10-03 15:57:49,311 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_01_top_n.csv
2025-10-03 15:57:49,311 [INFO] rag.qt - execute -> END
2025-10-03 15:57:49,312 [INFO] graph - route: qt -> summarizer
2025-10-03 15:57:49,316 [INFO] rag.summarizer - prompt_chars=2910
2025-10-03 15:57:49,316 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 15:57:54,492 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 15:57:54,496 [INFO] app - Program finished | run_id=20251003-155731
2025-10-03 16:02:23,759 [INFO] app - Program started | run_id=20251003-160223 | output_dir=F:\BiShe_02\output
2025-10-03 16:02:46,469 [INFO] graph - ENTER node=pre | raw_len=249
2025-10-03 16:02:46,470 [INFO] node.preprocess - start preprocess | raw=In data/hybrid_manufacturing_categorical.csv, first select rows where Job_Status == "Completed"; then group by aggregate the mean of Energy_Consumption by Machine_ID; finally plot_machine_avg_bar with metric="Energy_Consumption" and save the figure.
2025-10-03 16:02:46,614 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 16:02:46,614 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 16:02:46,615 [INFO] node.intent - intent.run | mode=llm
2025-10-03 16:02:48,730 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:02:48,736 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 16:02:48,736 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 16:02:48,738 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 16:02:48,738 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 16:02:50,893 [INFO] rag.kb - KB built | docs=42
2025-10-03 16:02:50,910 [INFO] rag.kb - KB search | q_len=249 | top_k=8
2025-10-03 16:02:50,910 [INFO] graph - node=kb | snippets=8
2025-10-03 16:02:50,911 [INFO] graph - route: kb -> qt
2025-10-03 16:02:50,913 [INFO] rag.thought - thought | prompt_chars=9115 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 16:02:56,145 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:02:56,147 [INFO] rag.thought - thought | llm_json_len=299
2025-10-03 16:02:56,155 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 16:02:56,155 [INFO] rag.execute - ENTER execute | pending=3
2025-10-03 16:02:56,156 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'Job_Status == "Completed"'} | cur_type=DataFrame
2025-10-03 16:02:56,166 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 16:02:56,179 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-03 16:02:56,180 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 16:02:56,180 [INFO] rag.execute - RUN tool=group_by_aggregate | args={'group_column': 'Machine_ID', 'agg': 'mean', 'target_column': 'Energy_Consumption'} | cur_type=DataFrame
2025-10-03 16:02:56,183 [INFO] rag.execute - OK tool=group_by_aggregate | result_type=DataFrame
2025-10-03 16:02:56,185 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_group_by_aggregate.csv
2025-10-03 16:02:56,185 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 16:02:56,185 [INFO] rag.execute - RUN tool=plot_machine_avg_bar | args={'metric': 'Energy_Consumption'} | cur_type=DataFrame
2025-10-03 16:02:57,526 [INFO] rag.execute - OK tool=plot_machine_avg_bar | result_type=str
2025-10-03 16:02:57,526 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_02_group_by_aggregate.csv
2025-10-03 16:02:57,527 [INFO] rag.qt - execute -> END
2025-10-03 16:02:57,527 [INFO] graph - route: qt -> summarizer
2025-10-03 16:02:57,529 [INFO] rag.summarizer - prompt_chars=756
2025-10-03 16:02:57,529 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 16:03:02,092 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:03:02,094 [INFO] app - Program finished | run_id=20251003-160223
2025-10-03 16:07:00,926 [INFO] app - Program started | run_id=20251003-160700 | output_dir=F:\BiShe_02\output
2025-10-03 16:07:21,340 [INFO] graph - ENTER node=pre | raw_len=191
2025-10-03 16:07:21,340 [INFO] node.preprocess - start preprocess | raw=On the default dataset, first select rows where Operation_Type == "Milling"; then add_derived_column efficiency = Energy_Consumption / Processing_Time; finally top_n the top 15 by efficiency.
2025-10-03 16:07:21,460 [INFO] node.preprocess - preprocess | default_file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 16:07:21,460 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 16:07:21,461 [INFO] node.intent - intent.run | mode=llm
2025-10-03 16:07:26,142 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:07:26,145 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 16:07:26,145 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 16:07:26,147 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 16:07:26,147 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 16:07:28,181 [INFO] rag.kb - KB built | docs=42
2025-10-03 16:07:28,197 [INFO] rag.kb - KB search | q_len=191 | top_k=8
2025-10-03 16:07:28,197 [INFO] graph - node=kb | snippets=8
2025-10-03 16:07:28,198 [INFO] graph - route: kb -> qt
2025-10-03 16:07:28,199 [INFO] rag.thought - thought | prompt_chars=8473 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 16:07:32,237 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:07:32,239 [INFO] rag.thought - thought | llm_json_len=296
2025-10-03 16:07:32,249 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 16:07:32,249 [INFO] rag.execute - ENTER execute | pending=3
2025-10-03 16:07:32,249 [INFO] rag.execute - RUN tool=select_rows | args={'query': 'Operation_Type == "Milling"'} | cur_type=DataFrame
2025-10-03 16:07:32,254 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 16:07:32,263 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-03 16:07:32,264 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 16:07:32,264 [INFO] rag.execute - RUN tool=add_derived_column | args={'target_column': 'efficiency', 'expression': 'Energy_Consumption / Processing_Time'} | cur_type=DataFrame
2025-10-03 16:07:32,264 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 374, in add_derived_column
    raise ValueError("add_derived_column 需要 'formula' 和 目标列名('target_column'/'name')")
ValueError: add_derived_column 需要 'formula' 和 目标列名('target_column'/'name')
2025-10-03 16:07:32,265 [INFO] rag.thought - thought | prompt_chars=8473 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 16:07:35,501 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:07:35,502 [INFO] rag.thought - thought | llm_json_len=296
2025-10-03 16:07:35,504 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 16:07:35,505 [INFO] rag.execute - RUN tool=top_n | args={'n': 15, 'column': 'efficiency'} | cur_type=DataFrame
2025-10-03 16:07:35,506 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 280, in top_n
    out = out.sort_values(col, ascending=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\frame.py", line 7196, in sort_values
    k = self._get_label_or_level_values(by[0], axis=axis)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\generic.py", line 1911, in _get_label_or_level_values
    raise KeyError(key)
KeyError: 'efficiency'
2025-10-03 16:07:35,604 [INFO] rag.thought - thought | prompt_chars=8473 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 16:07:38,924 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:07:38,926 [INFO] rag.thought - thought | llm_json_len=293
2025-10-03 16:07:38,928 [INFO] rag.execute - ENTER execute | pending=3
2025-10-03 16:07:38,929 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "Operation_Type == 'Milling'"} | cur_type=DataFrame
2025-10-03 16:07:38,942 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 16:07:38,949 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_select_rows.csv
2025-10-03 16:07:38,950 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 16:07:38,950 [INFO] rag.execute - RUN tool=add_derived_column | args={'target_column': 'efficiency', 'expression': 'Energy_Consumption / Processing_Time'} | cur_type=DataFrame
2025-10-03 16:07:38,950 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 374, in add_derived_column
    raise ValueError("add_derived_column 需要 'formula' 和 目标列名('target_column'/'name')")
ValueError: add_derived_column 需要 'formula' 和 目标列名('target_column'/'name')
2025-10-03 16:07:38,951 [INFO] rag.thought - thought | prompt_chars=8473 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 16:07:42,124 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:07:42,125 [INFO] rag.thought - thought | llm_json_len=293
2025-10-03 16:07:42,127 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 16:07:42,127 [INFO] rag.execute - RUN tool=top_n | args={'n': 15, 'target_column': 'efficiency'} | cur_type=DataFrame
2025-10-03 16:07:42,129 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 280, in top_n
    out = out.sort_values(col, ascending=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\frame.py", line 7196, in sort_values
    k = self._get_label_or_level_values(by[0], axis=axis)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\generic.py", line 1911, in _get_label_or_level_values
    raise KeyError(key)
KeyError: 'efficiency'
2025-10-03 16:07:42,131 [INFO] rag.thought - thought | prompt_chars=8473 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 16:07:44,342 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:07:44,342 [INFO] rag.thought - thought | llm_json_len=294
2025-10-03 16:07:44,344 [INFO] rag.execute - ENTER execute | pending=3
2025-10-03 16:07:44,344 [INFO] rag.execute - RUN tool=select_rows | args={'query': "Operation_Type == 'Milling'"} | cur_type=DataFrame
2025-10-03 16:07:44,347 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 16:07:44,354 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_03_select_rows.csv
2025-10-03 16:07:44,355 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 16:07:44,355 [INFO] rag.execute - RUN tool=add_derived_column | args={'target_column': 'efficiency', 'expression': 'Energy_Consumption / Processing_Time'} | cur_type=DataFrame
2025-10-03 16:07:44,355 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 374, in add_derived_column
    raise ValueError("add_derived_column 需要 'formula' 和 目标列名('target_column'/'name')")
ValueError: add_derived_column 需要 'formula' 和 目标列名('target_column'/'name')
2025-10-03 16:07:44,357 [INFO] rag.thought - thought | prompt_chars=8473 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 16:07:47,349 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:07:47,352 [INFO] rag.thought - thought | llm_json_len=291
2025-10-03 16:07:47,354 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 16:07:47,354 [INFO] rag.execute - RUN tool=top_n | args={'n': 15, 'column': 'efficiency'} | cur_type=DataFrame
2025-10-03 16:07:47,355 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 280, in top_n
    out = out.sort_values(col, ascending=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\frame.py", line 7196, in sort_values
    k = self._get_label_or_level_values(by[0], axis=axis)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\generic.py", line 1911, in _get_label_or_level_values
    raise KeyError(key)
KeyError: 'efficiency'
2025-10-03 16:07:47,357 [INFO] rag.thought - thought | prompt_chars=8473 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 16:07:50,226 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:07:50,228 [INFO] rag.thought - thought | llm_json_len=296
2025-10-03 16:13:47,630 [INFO] app - Program started | run_id=20251003-161347 | output_dir=F:\BiShe_02\output
2025-10-03 16:14:05,251 [INFO] graph - ENTER node=pre | raw_len=260
2025-10-03 16:14:05,251 [INFO] node.preprocess - start preprocess | raw=In data/hybrid_manufacturing_categorical.csv, select rows where Machine_ID in ["M_01","M_02","M_03"]; then compute rolling_average of Energy_Consumption grouped by Machine_ID with window 5; finally sort rows by Energy_Consumption_rollavg_5 in descending order.
2025-10-03 16:14:05,443 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 16:14:05,444 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 16:14:05,445 [INFO] node.intent - intent.run | mode=llm
2025-10-03 16:14:07,276 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:14:07,279 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 16:14:07,279 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 16:14:07,282 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 16:14:07,282 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 16:14:09,485 [INFO] rag.kb - KB built | docs=42
2025-10-03 16:14:09,505 [INFO] rag.kb - KB search | q_len=276 | top_k=8
2025-10-03 16:14:09,506 [INFO] graph - node=kb | snippets=8
2025-10-03 16:14:09,506 [INFO] graph - route: kb -> qt
2025-10-03 16:14:09,507 [INFO] rag.thought - thought | prompt_chars=8751 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 16:14:12,991 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:14:12,992 [INFO] rag.thought - thought | llm_json_len=337
2025-10-03 16:14:13,002 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 16:14:13,004 [INFO] rag.execute - ENTER execute | pending=3
2025-10-03 16:14:13,004 [INFO] rag.execute - RUN tool=select_rows | args={'query': "Machine_ID in ['M_01', 'M_02', 'M_03']"} | cur_type=DataFrame
2025-10-03 16:14:13,007 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 16:14:13,011 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-03 16:14:13,012 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 16:14:13,013 [INFO] rag.execute - RUN tool=rolling_average | args={'window': 5, 'group_by': 'Machine_ID', 'target_column': 'Energy_Consumption'} | cur_type=DataFrame
2025-10-03 16:14:13,015 [INFO] rag.execute - OK tool=rolling_average | result_type=DataFrame
2025-10-03 16:14:13,016 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_rolling_average.csv
2025-10-03 16:14:13,017 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 16:14:13,017 [INFO] rag.execute - RUN tool=sort_rows | args={'ascending': [False, False], 'pair': ['Energy_Consumption', 'Processing_Time']} | cur_type=DataFrame
2025-10-03 16:14:13,017 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 261, in sort_rows
    raise ValueError("sort_rows 需要 'column'（支持别名 sort_by/by/target_column）")
ValueError: sort_rows 需要 'column'（支持别名 sort_by/by/target_column）
2025-10-03 16:14:13,019 [INFO] rag.thought - thought | prompt_chars=8751 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 16:14:16,643 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:14:16,644 [INFO] rag.thought - thought | llm_json_len=332
2025-10-03 16:14:16,646 [INFO] rag.execute - ENTER execute | pending=3
2025-10-03 16:14:16,646 [INFO] rag.execute - RUN tool=select_rows | args={'query': "Machine_ID in ['M_01', 'M_02', 'M_03']"} | cur_type=DataFrame
2025-10-03 16:14:16,651 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 16:14:16,652 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_03_select_rows.csv
2025-10-03 16:14:16,653 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 16:14:16,653 [INFO] rag.execute - RUN tool=rolling_average | args={'window': 5, 'group_by': 'Machine_ID', 'target_column': 'Energy_Consumption'} | cur_type=DataFrame
2025-10-03 16:14:16,654 [INFO] rag.execute - OK tool=rolling_average | result_type=DataFrame
2025-10-03 16:14:16,656 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_04_rolling_average.csv
2025-10-03 16:14:16,657 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 16:14:16,657 [INFO] rag.execute - RUN tool=sort_rows | args={'ascending': [False, False], 'column': ['Energy_Consumption', 'Processing_Time']} | cur_type=DataFrame
2025-10-03 16:14:16,658 [INFO] rag.execute - OK tool=sort_rows | result_type=DataFrame
2025-10-03 16:14:16,659 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_05_sort_rows.csv
2025-10-03 16:14:16,659 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_05_sort_rows.csv
2025-10-03 16:14:16,659 [INFO] rag.qt - execute -> END
2025-10-03 16:14:16,660 [INFO] graph - route: qt -> summarizer
2025-10-03 16:14:16,661 [INFO] rag.summarizer - prompt_chars=841
2025-10-03 16:14:16,661 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 16:14:21,879 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:14:21,881 [INFO] app - Program finished | run_id=20251003-161347
2025-10-03 16:17:37,004 [INFO] app - Program started | run_id=20251003-161737 | output_dir=F:\BiShe_02\output
2025-10-03 16:17:56,227 [INFO] graph - ENTER node=pre | raw_len=224
2025-10-03 16:17:56,228 [INFO] node.preprocess - start preprocess | raw=Using the default dataset, first select rows where Job_Status != "Failed"; then group_top_n: for each Operation_Type, take the top 3 by Processing_Time; finally select columns to keep Operation_Type, Job_ID, Processing_Time.
2025-10-03 16:17:56,449 [INFO] node.preprocess - preprocess | default_file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 16:17:56,449 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 16:17:56,450 [INFO] node.intent - intent.run | mode=llm
2025-10-03 16:17:57,785 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:17:57,789 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 16:17:57,789 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 16:17:57,792 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 16:17:57,792 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 16:17:59,625 [INFO] rag.kb - KB built | docs=42
2025-10-03 16:17:59,642 [INFO] rag.kb - KB search | q_len=224 | top_k=8
2025-10-03 16:17:59,642 [INFO] graph - node=kb | snippets=8
2025-10-03 16:17:59,643 [INFO] graph - route: kb -> qt
2025-10-03 16:17:59,644 [INFO] rag.thought - thought | prompt_chars=8496 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 16:18:02,873 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:18:02,875 [INFO] rag.thought - thought | llm_json_len=310
2025-10-03 16:18:02,884 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 16:18:02,884 [INFO] rag.execute - ENTER execute | pending=3
2025-10-03 16:18:02,884 [INFO] rag.execute - RUN tool=select_rows | args={'condition': 'Job_Status != "Failed"'} | cur_type=DataFrame
2025-10-03 16:18:02,888 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 16:18:02,900 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-03 16:18:02,902 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 16:18:02,902 [INFO] rag.execute - RUN tool=group_top_n | args={'group_column': 'Operation_Type', 'n': 3, 'column': 'Processing_Time'} | cur_type=DataFrame
2025-10-03 16:18:02,904 [INFO] rag.execute - OK tool=group_top_n | result_type=DataFrame
2025-10-03 16:18:02,908 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_group_top_n.csv
2025-10-03 16:18:02,910 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 16:18:02,910 [INFO] rag.execute - RUN tool=select_columns | args={'pair': ['Operation_Type', 'Job_ID', 'Processing_Time']} | cur_type=DataFrame
2025-10-03 16:18:02,910 [INFO] rag.execute - OK tool=select_columns | result_type=DataFrame
2025-10-03 16:18:02,913 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_03_select_columns.csv
2025-10-03 16:18:02,913 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_03_select_columns.csv
2025-10-03 16:18:02,913 [INFO] rag.qt - execute -> END
2025-10-03 16:18:02,914 [INFO] graph - route: qt -> summarizer
2025-10-03 16:18:02,915 [INFO] rag.summarizer - prompt_chars=970
2025-10-03 16:18:02,915 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 16:18:12,218 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:18:12,220 [INFO] app - Program finished | run_id=20251003-161737
2025-10-03 16:23:30,605 [INFO] app - Program started | run_id=20251003-162330 | output_dir=F:\BiShe_02\output
2025-10-03 16:23:53,529 [INFO] graph - ENTER node=pre | raw_len=271
2025-10-03 16:23:53,530 [INFO] node.preprocess - start preprocess | raw=In data/hybrid_manufacturing_categorical.csv, first select rows where Scheduled_End - Scheduled_Start >= 2 hours; then calculate_correlation between Energy_Consumption and Processing_Time; finally top_n the top 20 by Energy_Consumption (the correlation is a side scalar).
2025-10-03 16:23:53,698 [INFO] node.preprocess - preprocess | file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 16:23:53,699 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 16:23:53,700 [INFO] node.intent - intent.run | mode=llm
2025-10-03 16:23:56,213 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:23:56,217 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 16:23:56,218 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 16:23:56,220 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 16:23:56,220 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 16:23:58,022 [INFO] rag.kb - KB built | docs=42
2025-10-03 16:23:58,039 [INFO] rag.kb - KB search | q_len=271 | top_k=8
2025-10-03 16:23:58,040 [INFO] graph - node=kb | snippets=8
2025-10-03 16:23:58,040 [INFO] graph - route: kb -> qt
2025-10-03 16:23:58,041 [INFO] rag.thought - thought | prompt_chars=8587 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 16:24:01,447 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:24:01,450 [INFO] rag.thought - thought | llm_json_len=286
2025-10-03 16:24:01,460 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 16:24:01,460 [INFO] rag.execute - ENTER execute | pending=3
2025-10-03 16:24:01,461 [INFO] rag.execute - RUN tool=select_rows | args={'query': 'Scheduled_End - Scheduled_Start >= 2 hours'} | cur_type=DataFrame
2025-10-03 16:24:01,465 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 16:24:01,473 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-03 16:24:01,473 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 16:24:01,473 [INFO] rag.execute - RUN tool=calculate_correlation | args={'target_column': 'Energy_Consumption', 'other_column': 'Processing_Time'} | cur_type=DataFrame
2025-10-03 16:24:01,475 [INFO] rag.execute - OK tool=calculate_correlation | result_type=tuple
2025-10-03 16:24:01,476 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 16:24:01,476 [INFO] rag.execute - RUN tool=top_n | args={'n': 20, 'column': 'Energy_Consumption'} | cur_type=DataFrame
2025-10-03 16:24:01,477 [INFO] rag.execute - OK tool=top_n | result_type=DataFrame
2025-10-03 16:24:01,482 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_top_n.csv
2025-10-03 16:24:01,482 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_02_top_n.csv
2025-10-03 16:24:01,482 [INFO] rag.qt - execute -> END
2025-10-03 16:24:01,483 [INFO] graph - route: qt -> summarizer
2025-10-03 16:24:01,486 [INFO] rag.summarizer - prompt_chars=2339
2025-10-03 16:24:01,487 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 16:24:11,945 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:24:11,946 [INFO] app - Program finished | run_id=20251003-162330
2025-10-03 16:26:11,063 [INFO] app - Program started | run_id=20251003-162611 | output_dir=F:\BiShe_02\output
2025-10-03 16:26:33,912 [INFO] graph - ENTER node=pre | raw_len=251
2025-10-03 16:26:33,912 [INFO] node.preprocess - start preprocess | raw=On the default dataset, first select rows where Actual_Start >= "2023-03-18 00:00" and Actual_End <= "2023-03-19 00:00"; then graph_export a bipartite graph Machine_ID ↔ Job_ID to a GEXF file under output/; finally top_n the top 20 by Processing_Time.
2025-10-03 16:26:34,072 [INFO] node.preprocess - preprocess | default_file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 16:26:34,072 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-03 16:26:34,073 [INFO] node.intent - intent.run | mode=llm
2025-10-03 16:26:35,448 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:26:35,452 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 16:26:35,452 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-03 16:26:35,455 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-03 16:26:35,455 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-03 16:26:37,258 [INFO] rag.kb - KB built | docs=42
2025-10-03 16:26:37,279 [INFO] rag.kb - KB search | q_len=251 | top_k=8
2025-10-03 16:26:37,280 [INFO] graph - node=kb | snippets=8
2025-10-03 16:26:37,280 [INFO] graph - route: kb -> qt
2025-10-03 16:26:37,282 [INFO] rag.thought - thought | prompt_chars=8808 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-03 16:26:41,285 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:26:41,286 [INFO] rag.thought - thought | llm_json_len=284
2025-10-03 16:26:41,294 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-03 16:26:41,295 [INFO] rag.execute - ENTER execute | pending=3
2025-10-03 16:26:41,295 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "Actual_Start >= '2023-03-18 00:00' and Actual_End <= '2023-03-19 00:00'"} | cur_type=DataFrame
2025-10-03 16:26:41,300 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-03 16:26:41,308 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-03 16:26:41,309 [INFO] rag.execute - ENTER execute | pending=2
2025-10-03 16:26:41,309 [INFO] rag.execute - RUN tool=graph_export | args={'file': 'output/bipartite.gexf'} | cur_type=DataFrame
2025-10-03 16:26:41,326 [INFO] rag.execute - OK tool=graph_export | result_type=str
2025-10-03 16:26:41,328 [INFO] rag.execute - ENTER execute | pending=1
2025-10-03 16:26:41,328 [INFO] rag.execute - RUN tool=top_n | args={'n': 20, 'target_column': 'Processing_Time'} | cur_type=DataFrame
2025-10-03 16:26:41,329 [INFO] rag.execute - OK tool=top_n | result_type=DataFrame
2025-10-03 16:26:41,333 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_top_n.csv
2025-10-03 16:26:41,333 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_02_top_n.csv
2025-10-03 16:26:41,333 [INFO] rag.qt - execute -> END
2025-10-03 16:26:41,334 [INFO] graph - route: qt -> summarizer
2025-10-03 16:26:41,338 [INFO] rag.summarizer - prompt_chars=2979
2025-10-03 16:26:41,338 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-03 16:26:48,403 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-03 16:26:48,404 [INFO] app - Program finished | run_id=20251003-162611
2025-10-04 18:42:14,488 [INFO] app - Program started | run_id=20251004-184214 | output_dir=F:\BiShe_02\output
2025-10-04 18:42:59,105 [INFO] app - Program started | run_id=20251004-184259 | output_dir=F:\BiShe_02\output
2025-10-04 18:43:08,053 [INFO] graph - ENTER node=pre | raw_len=49
2025-10-04 18:43:08,054 [INFO] node.preprocess - start preprocess | raw=run autoencoder on all files in \data\SKAB\valve1
2025-10-04 18:43:08,168 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-04 18:43:08,169 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-04 18:43:08,170 [INFO] node.intent - intent.run | mode=llm
2025-10-04 18:43:10,812 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-04 18:43:10,816 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['AE'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-04 18:43:10,816 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['AE'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-04 18:43:10,818 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-04 18:43:10,818 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-04 18:43:12,627 [INFO] rag.kb - KB built | docs=40
2025-10-04 18:43:12,641 [INFO] rag.kb - KB search | q_len=58 | top_k=8
2025-10-04 18:43:12,641 [INFO] graph - node=kb | snippets=8
2025-10-04 18:43:12,642 [INFO] graph - route: kb -> anomaly
2025-10-04 18:43:12,643 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-10-04 18:43:12,743 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-10-04 18:43:12,744 [INFO] rag.anomaly - algorithms | selected=['AE'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-10-04 18:43:12,776 [INFO] ad - AE.build | input_dim=7 | cfg=custom
2025-10-04 18:43:35,781 [INFO] rag.anomaly - best algo=AE
2025-10-04 18:43:37,555 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-10-04 18:43:43,175 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-10-04 18:43:43,181 [INFO] rag.summarizer - prompt_chars=748
2025-10-04 18:43:43,181 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-04 18:43:51,201 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-04 18:43:51,203 [INFO] app - Program finished | run_id=20251004-184259
2025-10-04 19:28:15,872 [INFO] app - Program started | run_id=20251004-192815 | output_dir=F:\BiShe_02\output
2025-10-04 19:28:22,074 [INFO] graph - ENTER node=pre | raw_len=28
2025-10-04 19:28:22,075 [INFO] node.preprocess - start preprocess | raw=run eif in \data\SKAB\valve1
2025-10-04 19:28:22,148 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-04 19:28:22,148 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-04 19:28:22,149 [INFO] node.intent - intent.run | mode=llm
2025-10-04 19:28:24,258 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-04 19:28:24,261 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-04 19:28:24,261 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-04 19:28:24,263 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-04 19:28:24,264 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-04 19:28:26,140 [INFO] rag.kb - KB built | docs=40
2025-10-04 19:28:26,153 [INFO] rag.kb - KB search | q_len=37 | top_k=8
2025-10-04 19:28:26,153 [INFO] graph - node=kb | snippets=8
2025-10-04 19:28:26,154 [INFO] graph - route: kb -> anomaly
2025-10-04 19:28:26,156 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-10-04 19:28:26,254 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-10-04 19:28:26,254 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-10-04 19:28:26,502 [INFO] rag.anomaly - best algo=EIF
2025-10-04 19:28:28,171 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-10-04 19:28:32,289 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-10-04 19:28:32,293 [INFO] rag.summarizer - prompt_chars=727
2025-10-04 19:28:32,293 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-04 19:28:38,135 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-04 19:28:38,137 [INFO] app - Program finished | run_id=20251004-192815
2025-10-04 19:31:51,939 [INFO] app - Program started | run_id=20251004-193151 | output_dir=F:\BiShe_02\output
2025-10-04 19:31:57,895 [INFO] graph - ENTER node=pre | raw_len=36
2025-10-04 19:31:57,895 [INFO] node.preprocess - start preprocess | raw=run LOF on files in data\SKAB\valve1
2025-10-04 19:31:57,956 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-04 19:31:57,957 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-04 19:31:57,958 [INFO] node.intent - intent.run | mode=llm
2025-10-04 19:32:00,675 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-04 19:32:00,679 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-04 19:32:00,681 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-04 19:32:00,683 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-04 19:32:00,683 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-04 19:32:02,571 [INFO] rag.kb - KB built | docs=40
2025-10-04 19:32:02,584 [INFO] rag.kb - KB search | q_len=45 | top_k=8
2025-10-04 19:32:02,584 [INFO] graph - node=kb | snippets=8
2025-10-04 19:32:02,584 [INFO] graph - route: kb -> anomaly
2025-10-04 19:32:02,586 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-10-04 19:32:02,682 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-10-04 19:32:02,682 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-10-04 19:32:04,875 [INFO] rag.anomaly - best algo=LOF
2025-10-04 19:32:06,524 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-10-04 19:32:10,854 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-10-04 19:32:10,859 [INFO] rag.summarizer - prompt_chars=735
2025-10-04 19:32:10,859 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-04 19:32:21,164 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-04 19:32:21,165 [INFO] app - Program finished | run_id=20251004-193151
2025-10-07 15:23:14,393 [INFO] app - Program started | run_id=20251007-152314 | output_dir=F:\BiShe_02\output
2025-10-07 15:23:43,645 [INFO] graph - ENTER node=pre | raw_len=48
2025-10-07 15:23:43,645 [INFO] node.preprocess - start preprocess | raw=run autoencoder on all files in data\SKAB\valve1
2025-10-07 15:23:43,753 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-07 15:23:43,753 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-07 15:23:43,754 [INFO] node.intent - intent.run | mode=llm
2025-10-07 15:23:45,988 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-07 15:23:45,993 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['AE'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-07 15:23:45,993 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['AE'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-07 15:23:45,996 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-07 15:23:45,996 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-07 15:23:47,836 [INFO] rag.kb - KB built | docs=40
2025-10-07 15:23:47,847 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-10-07 15:23:47,847 [INFO] graph - node=kb | snippets=8
2025-10-07 15:23:47,847 [INFO] graph - route: kb -> anomaly
2025-10-07 15:23:47,849 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-10-07 15:23:47,942 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-10-07 15:23:47,942 [INFO] rag.anomaly - algorithms | selected=['AE'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-10-07 15:23:47,970 [INFO] ad - AE.build | input_dim=7 | cfg=custom
2025-10-07 15:24:18,825 [INFO] rag.anomaly - best algo=AE
2025-10-07 15:24:20,489 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results.xlsx | sheets=2
2025-10-07 15:24:25,411 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_pr_curve.png | f1=output\valve1_anomaly_results_f1_curve.png | roc=output\valve1_anomaly_results_roc_curve.png
2025-10-07 15:24:25,415 [INFO] rag.summarizer - prompt_chars=747
2025-10-07 15:24:25,416 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-07 15:24:32,541 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-07 15:24:32,543 [INFO] app - Program finished | run_id=20251007-152314
2025-10-07 15:29:19,661 [INFO] app - Program started | run_id=20251007-152919 | output_dir=F:\BiShe_02\output
2025-10-07 15:29:30,384 [INFO] graph - ENTER node=pre | raw_len=30
2025-10-07 15:29:30,385 [INFO] node.preprocess - start preprocess | raw=apply eif in \data\SKAB\valve1
2025-10-07 15:29:30,447 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-07 15:29:30,447 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-07 15:29:30,448 [INFO] node.intent - intent.run | mode=llm
2025-10-07 15:29:34,951 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-07 15:29:34,954 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-07 15:29:34,954 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-07 15:29:34,955 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-07 15:29:34,955 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-07 15:29:36,740 [INFO] rag.kb - KB built | docs=40
2025-10-07 15:29:36,752 [INFO] rag.kb - KB search | q_len=39 | top_k=8
2025-10-07 15:29:36,753 [INFO] graph - node=kb | snippets=8
2025-10-07 15:29:36,753 [INFO] graph - route: kb -> anomaly
2025-10-07 15:29:36,755 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-10-07 15:29:36,847 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-10-07 15:29:36,847 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-10-07 15:29:37,087 [INFO] rag.anomaly - best algo=EIF
2025-10-07 15:29:38,634 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_1.xlsx | sheets=2
2025-10-07 15:29:42,614 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_1_pr_curve.png | f1=output\valve1_anomaly_results_1_f1_curve.png | roc=output\valve1_anomaly_results_1_roc_curve.png
2025-10-07 15:29:42,620 [INFO] rag.summarizer - prompt_chars=737
2025-10-07 15:29:42,620 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-07 15:29:53,714 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-07 15:29:53,716 [INFO] app - Program finished | run_id=20251007-152919
2025-10-07 15:30:59,168 [INFO] app - Program started | run_id=20251007-153059 | output_dir=F:\BiShe_02\output
2025-10-07 15:32:07,075 [INFO] graph - ENTER node=pre | raw_len=36
2025-10-07 15:32:07,076 [INFO] node.preprocess - start preprocess | raw=run LOF on files in data\SKAB\valve1
2025-10-07 15:32:07,134 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-07 15:32:07,135 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-07 15:32:07,137 [INFO] node.intent - intent.run | mode=llm
2025-10-07 15:32:10,858 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-07 15:32:10,862 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-07 15:32:10,863 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-07 15:32:10,865 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-07 15:32:10,865 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-07 15:32:12,654 [INFO] rag.kb - KB built | docs=40
2025-10-07 15:32:12,666 [INFO] rag.kb - KB search | q_len=45 | top_k=8
2025-10-07 15:32:12,666 [INFO] graph - node=kb | snippets=8
2025-10-07 15:32:12,666 [INFO] graph - route: kb -> anomaly
2025-10-07 15:32:12,668 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-10-07 15:32:12,760 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-10-07 15:32:12,760 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-10-07 15:32:15,191 [INFO] rag.anomaly - best algo=LOF
2025-10-07 15:32:16,722 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_2.xlsx | sheets=2
2025-10-07 15:32:20,666 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_2_pr_curve.png | f1=output\valve1_anomaly_results_2_f1_curve.png | roc=output\valve1_anomaly_results_2_roc_curve.png
2025-10-07 15:32:20,670 [INFO] rag.summarizer - prompt_chars=743
2025-10-07 15:32:20,670 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-07 15:32:27,369 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-07 15:32:27,371 [INFO] app - Program finished | run_id=20251007-153059
2025-10-07 15:33:35,473 [INFO] app - Program started | run_id=20251007-153335 | output_dir=F:\BiShe_02\output
2025-10-07 15:35:14,249 [INFO] graph - ENTER node=pre | raw_len=49
2025-10-07 15:35:14,250 [INFO] node.preprocess - start preprocess | raw=run autoencoder on all files in \data\SKAB\valve1
2025-10-07 15:35:14,319 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-07 15:35:14,319 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-07 15:35:14,320 [INFO] node.intent - intent.run | mode=llm
2025-10-07 15:35:16,974 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-07 15:35:16,979 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['AE'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-07 15:35:16,979 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['AE'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-07 15:35:16,981 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-07 15:35:16,981 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-07 15:35:18,947 [INFO] rag.kb - KB built | docs=40
2025-10-07 15:35:18,961 [INFO] rag.kb - KB search | q_len=58 | top_k=8
2025-10-07 15:35:18,961 [INFO] graph - node=kb | snippets=8
2025-10-07 15:35:18,961 [INFO] graph - route: kb -> anomaly
2025-10-07 15:35:18,963 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-10-07 15:35:19,064 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-10-07 15:35:19,064 [INFO] rag.anomaly - algorithms | selected=['AE'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-10-07 15:35:19,093 [INFO] ad - AE.build | input_dim=7 | cfg=custom
2025-10-07 15:35:43,494 [INFO] rag.anomaly - best algo=AE
2025-10-07 15:35:45,109 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_3.xlsx | sheets=2
2025-10-07 15:35:49,205 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_3_pr_curve.png | f1=output\valve1_anomaly_results_3_f1_curve.png | roc=output\valve1_anomaly_results_3_roc_curve.png
2025-10-07 15:35:49,209 [INFO] rag.summarizer - prompt_chars=756
2025-10-07 15:35:49,210 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-07 15:35:56,375 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-07 15:35:56,376 [INFO] app - Program finished | run_id=20251007-153335
2025-10-15 16:18:23,301 [INFO] app - Program started | run_id=20251015-161823 | output_dir=F:\BiShe_02\output
2025-10-15 16:18:59,845 [INFO] graph - ENTER node=pre | raw_len=307
2025-10-15 16:18:59,846 [INFO] node.preprocess - start preprocess | raw=Using the default dataset, remove all records corresponding to unsuccessful executions. Then, within each operation category, select the three instances with the longest processing durations. Finally, restrict the output to the operation category, the job identifier, and the associated processing duration.
2025-10-15 16:19:00,029 [INFO] node.preprocess - preprocess | default_file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-15 16:19:00,029 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-15 16:19:00,030 [INFO] node.intent - intent.run | mode=llm
2025-10-15 16:19:02,274 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-15 16:19:02,279 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-15 16:19:02,280 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-15 16:19:02,282 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-15 16:19:02,282 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-15 16:19:04,568 [INFO] rag.kb - KB built | docs=42
2025-10-15 16:19:04,588 [INFO] rag.kb - KB search | q_len=343 | top_k=8
2025-10-15 16:19:04,589 [INFO] graph - node=kb | snippets=8
2025-10-15 16:19:04,589 [INFO] graph - route: kb -> qt
2025-10-15 16:19:04,590 [INFO] rag.thought - thought | prompt_chars=8536 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-15 16:19:08,428 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-15 16:19:08,431 [INFO] rag.thought - thought | llm_json_len=534
2025-10-15 16:19:08,441 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-15 16:19:08,442 [INFO] rag.execute - ENTER execute | pending=3
2025-10-15 16:19:08,442 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "Job_Status == 'Completed'"} | cur_type=DataFrame
2025-10-15 16:19:08,453 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-15 16:19:08,467 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-15 16:19:08,469 [INFO] rag.execute - ENTER execute | pending=2
2025-10-15 16:19:08,469 [INFO] rag.execute - RUN tool=group_top_n | args={'group_column': 'Optimization_Category', 'target_column': 'Processing_Time', 'n': 3, 'keep_all': False, 'column': 'Processing_Time'} | cur_type=DataFrame
2025-10-15 16:19:08,474 [INFO] rag.execute - OK tool=group_top_n | result_type=DataFrame
2025-10-15 16:19:08,476 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_group_top_n.csv
2025-10-15 16:19:08,477 [INFO] rag.execute - ENTER execute | pending=1
2025-10-15 16:19:08,477 [INFO] rag.execute - RUN tool=select_columns | args={'pair': ['Optimization_Category', 'Job_ID', 'Processing_Time']} | cur_type=DataFrame
2025-10-15 16:19:08,477 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 741, in select_columns
    return df[cols]
           ~~^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\frame.py", line 4113, in __getitem__
    indexer = self.columns._get_indexer_strict(key, "columns")[1]
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\indexes\base.py", line 6212, in _get_indexer_strict
    self._raise_if_missing(keyarr, indexer, axis_name)
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\indexes\base.py", line 6264, in _raise_if_missing
    raise KeyError(f"{not_found} not in index")
KeyError: "['Job_ID'] not in index"
2025-10-15 16:19:08,580 [INFO] rag.thought - thought | prompt_chars=8536 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-15 16:19:12,371 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-15 16:19:12,373 [INFO] rag.thought - thought | llm_json_len=350
2025-10-15 16:19:12,375 [INFO] rag.execute - ENTER execute | pending=3
2025-10-15 16:19:12,375 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "Job_Status == 'Success'"} | cur_type=DataFrame
2025-10-15 16:19:12,376 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\scope.py", line 231, in resolve
    return self.resolvers[key]
           ~~~~~~~~~~~~~~^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\collections\__init__.py", line 1015, in __getitem__
    return self.__missing__(key)            # support subclasses that define __missing__
           ^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\collections\__init__.py", line 1007, in __missing__
    raise KeyError(key)
KeyError: 'Job_Status'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\scope.py", line 242, in resolve
    return self.temps[key]
           ~~~~~~~~~~^^^^^
KeyError: 'Job_Status'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "F:\BiShe_02\RAG_tool_functions.py", line 252, in select_rows
    return df.query(q).copy()
           ^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\frame.py", line 4828, in query
    res = self.eval(expr, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\frame.py", line 4954, in eval
    return _eval(expr, inplace=inplace, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\eval.py", line 339, in eval
    parsed_expr = Expr(expr, engine=engine, parser=parser, env=env)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 809, in __init__
    self.terms = self.parse()
                 ^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 828, in parse
    return self._visitor.visit(self.expr)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 413, in visit
    return visitor(node, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 419, in visit_Module
    return self.visit(expr, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 413, in visit
    return visitor(node, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 422, in visit_Expr
    return self.visit(node.value, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 413, in visit
    return visitor(node, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 719, in visit_Compare
    return self.visit(binop)
           ^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 413, in visit
    return visitor(node, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 535, in visit_BinOp
    op, op_class, left, right = self._maybe_transform_eq_ne(node)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 453, in _maybe_transform_eq_ne
    left = self.visit(node.left, side="left")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 413, in visit
    return visitor(node, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 545, in visit_Name
    return self.term_type(node.id, self.env, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\ops.py", line 91, in __init__
    self._value = self._resolve_name()
                  ^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\ops.py", line 115, in _resolve_name
    res = self.env.resolve(local_name, is_local=is_local)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\scope.py", line 244, in resolve
    raise UndefinedVariableError(key, is_local) from err
pandas.errors.UndefinedVariableError: name 'Job_Status' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 254, in select_rows
    raise ValueError(f"select_rows: 解析 query 失败 -> {e}")
ValueError: select_rows: 解析 query 失败 -> name 'Job_Status' is not defined
2025-10-15 16:19:12,467 [INFO] rag.thought - thought | prompt_chars=8536 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-15 16:19:16,855 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-15 16:19:16,857 [INFO] rag.thought - thought | llm_json_len=524
2025-10-15 16:19:16,858 [INFO] rag.execute - ENTER execute | pending=2
2025-10-15 16:19:16,858 [INFO] rag.execute - RUN tool=group_top_n | args={'group_column': 'Optimization_Category', 'target_column': 'Processing_Time', 'n': 3, 'sort_ascending': False} | cur_type=DataFrame
2025-10-15 16:19:16,858 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 291, in group_top_n
    s  = _pick_target(args, "sort_column", "column")
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 77, in _pick_target
    raise KeyError(f"Expect one of {keys}")
KeyError: "Expect one of ('sort_column', 'column')"
2025-10-15 16:19:16,860 [INFO] rag.thought - thought | prompt_chars=8536 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-15 16:19:19,712 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-15 16:19:19,715 [INFO] rag.thought - thought | llm_json_len=342
2025-10-15 16:19:19,717 [INFO] rag.execute - ENTER execute | pending=1
2025-10-15 16:19:19,717 [INFO] rag.execute - RUN tool=select_columns | args={'pair': ['Optimization_Category', 'Job_ID', 'Processing_Time']} | cur_type=DataFrame
2025-10-15 16:19:19,718 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 741, in select_columns
    return df[cols]
           ~~^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\frame.py", line 4113, in __getitem__
    indexer = self.columns._get_indexer_strict(key, "columns")[1]
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\indexes\base.py", line 6212, in _get_indexer_strict
    self._raise_if_missing(keyarr, indexer, axis_name)
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\indexes\base.py", line 6264, in _raise_if_missing
    raise KeyError(f"{not_found} not in index")
KeyError: "['Job_ID'] not in index"
2025-10-15 16:19:19,720 [INFO] rag.thought - thought | prompt_chars=8536 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-15 16:19:25,978 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-15 16:19:25,979 [INFO] rag.thought - thought | llm_json_len=528
2025-10-15 16:19:25,982 [INFO] rag.execute - ENTER execute | pending=3
2025-10-15 16:19:25,982 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "Job_Status == 'Success'"} | cur_type=DataFrame
2025-10-15 16:19:25,984 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\scope.py", line 231, in resolve
    return self.resolvers[key]
           ~~~~~~~~~~~~~~^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\collections\__init__.py", line 1015, in __getitem__
    return self.__missing__(key)            # support subclasses that define __missing__
           ^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\collections\__init__.py", line 1007, in __missing__
    raise KeyError(key)
KeyError: 'Job_Status'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\scope.py", line 242, in resolve
    return self.temps[key]
           ~~~~~~~~~~^^^^^
KeyError: 'Job_Status'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "F:\BiShe_02\RAG_tool_functions.py", line 252, in select_rows
    return df.query(q).copy()
           ^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\frame.py", line 4828, in query
    res = self.eval(expr, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\frame.py", line 4954, in eval
    return _eval(expr, inplace=inplace, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\eval.py", line 339, in eval
    parsed_expr = Expr(expr, engine=engine, parser=parser, env=env)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 809, in __init__
    self.terms = self.parse()
                 ^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 828, in parse
    return self._visitor.visit(self.expr)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 413, in visit
    return visitor(node, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 419, in visit_Module
    return self.visit(expr, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 413, in visit
    return visitor(node, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 422, in visit_Expr
    return self.visit(node.value, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 413, in visit
    return visitor(node, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 719, in visit_Compare
    return self.visit(binop)
           ^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 413, in visit
    return visitor(node, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 535, in visit_BinOp
    op, op_class, left, right = self._maybe_transform_eq_ne(node)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 453, in _maybe_transform_eq_ne
    left = self.visit(node.left, side="left")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 413, in visit
    return visitor(node, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\expr.py", line 545, in visit_Name
    return self.term_type(node.id, self.env, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\ops.py", line 91, in __init__
    self._value = self._resolve_name()
                  ^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\ops.py", line 115, in _resolve_name
    res = self.env.resolve(local_name, is_local=is_local)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\computation\scope.py", line 244, in resolve
    raise UndefinedVariableError(key, is_local) from err
pandas.errors.UndefinedVariableError: name 'Job_Status' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 254, in select_rows
    raise ValueError(f"select_rows: 解析 query 失败 -> {e}")
ValueError: select_rows: 解析 query 失败 -> name 'Job_Status' is not defined
2025-10-15 16:19:25,993 [INFO] rag.thought - thought | prompt_chars=8536 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-15 16:19:29,117 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-15 16:19:29,119 [INFO] rag.thought - thought | llm_json_len=342
2025-10-15 16:19:29,122 [INFO] rag.execute - ENTER execute | pending=2
2025-10-15 16:19:29,122 [INFO] rag.execute - RUN tool=group_top_n | args={'group_column': 'Optimization_Category', 'n': 3, 'keep_all': False, 'column': 'Processing_Time'} | cur_type=DataFrame
2025-10-15 16:19:29,124 [INFO] rag.execute - OK tool=group_top_n | result_type=DataFrame
2025-10-15 16:19:29,127 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_03_group_top_n.csv
2025-10-15 16:19:29,128 [INFO] rag.execute - ENTER execute | pending=1
2025-10-15 16:19:29,128 [INFO] rag.execute - RUN tool=select_columns | args={'pair': ['Optimization_Category', 'Job_ID', 'Processing_Time']} | cur_type=DataFrame
2025-10-15 16:19:29,129 [ERROR] rag.execute - Tool raised exception
Traceback (most recent call last):
  File "F:\BiShe_02\rag_nodes_react\execute.py", line 71, in execute_node
    result = TOOL_REGISTRY[fname].func(cur, args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\BiShe_02\logging_setup.py", line 45, in wrapper
    res = fn(*a, **kw)
          ^^^^^^^^^^^^
  File "F:\BiShe_02\RAG_tool_functions.py", line 741, in select_columns
    return df[cols]
           ~~^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\frame.py", line 4113, in __getitem__
    indexer = self.columns._get_indexer_strict(key, "columns")[1]
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\indexes\base.py", line 6212, in _get_indexer_strict
    self._raise_if_missing(keyarr, indexer, axis_name)
  File "F:\anaconda3\envs\langgraph-env\Lib\site-packages\pandas\core\indexes\base.py", line 6264, in _raise_if_missing
    raise KeyError(f"{not_found} not in index")
KeyError: "['Job_ID'] not in index"
2025-10-15 16:19:29,131 [INFO] rag.thought - thought | prompt_chars=8536 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-15 16:19:34,704 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-15 16:19:34,705 [INFO] rag.thought - thought | llm_json_len=528
2025-10-15 16:23:55,481 [INFO] app - Program started | run_id=20251015-162355 | output_dir=F:\BiShe_02\output
2025-10-15 16:24:04,115 [INFO] graph - ENTER node=pre | raw_len=224
2025-10-15 16:24:04,115 [INFO] node.preprocess - start preprocess | raw=Using the default dataset, first select rows where Job_Status != ‘Failed’; then group_top_n: for each Operation_Type, take the top 3 by Processing_Time; finally select columns to keep Operation_Type, Job_ID, Processing_Time.
2025-10-15 16:24:04,302 [INFO] node.preprocess - preprocess | default_file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-15 16:24:04,303 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-15 16:24:04,304 [INFO] node.intent - intent.run | mode=llm
2025-10-15 16:24:06,441 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-15 16:24:06,445 [INFO] node.intent - intent.out | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-15 16:24:06,445 [INFO] graph - node=intent | need_qt=True need_anomaly=False algos=None csv=data\hybrid_manufacturing_categorical.csv
2025-10-15 16:24:06,446 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-15 16:24:06,447 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-15 16:24:08,484 [INFO] rag.kb - KB built | docs=42
2025-10-15 16:24:08,502 [INFO] rag.kb - KB search | q_len=224 | top_k=8
2025-10-15 16:24:08,503 [INFO] graph - node=kb | snippets=8
2025-10-15 16:24:08,503 [INFO] graph - route: kb -> qt
2025-10-15 16:24:08,504 [INFO] rag.thought - thought | prompt_chars=8496 | cols=13 | kb_snippets=8 | model=qwen-plus | base_url=https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-15 16:24:12,287 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-15 16:24:12,290 [INFO] rag.thought - thought | llm_json_len=308
2025-10-15 16:24:12,301 [INFO] rag.execute - Primed cursor from csv_path -> DataFrame shape=(1000, 13)
2025-10-15 16:24:12,301 [INFO] rag.execute - ENTER execute | pending=3
2025-10-15 16:24:12,301 [INFO] rag.execute - RUN tool=select_rows | args={'condition': "Job_Status != 'Failed'"} | cur_type=DataFrame
2025-10-15 16:24:12,306 [INFO] rag.execute - OK tool=select_rows | result_type=DataFrame
2025-10-15 16:24:12,321 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_01_select_rows.csv
2025-10-15 16:24:12,323 [INFO] rag.execute - ENTER execute | pending=2
2025-10-15 16:24:12,323 [INFO] rag.execute - RUN tool=group_top_n | args={'group_column': 'Operation_Type', 'n': 3, 'column': 'Processing_Time'} | cur_type=DataFrame
2025-10-15 16:24:12,325 [INFO] rag.execute - OK tool=group_top_n | result_type=DataFrame
2025-10-15 16:24:12,330 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_02_group_top_n.csv
2025-10-15 16:24:12,331 [INFO] rag.execute - ENTER execute | pending=1
2025-10-15 16:24:12,332 [INFO] rag.execute - RUN tool=select_columns | args={'pair': ['Operation_Type', 'Job_ID', 'Processing_Time']} | cur_type=DataFrame
2025-10-15 16:24:12,332 [INFO] rag.execute - OK tool=select_columns | result_type=DataFrame
2025-10-15 16:24:12,333 [INFO] rag.execute - Saved intermediate DF -> output\qt_step_03_select_columns.csv
2025-10-15 16:24:12,334 [INFO] rag.execute - Q&T finished | last_csv=output\qt_step_03_select_columns.csv
2025-10-15 16:24:12,334 [INFO] rag.qt - execute -> END
2025-10-15 16:24:12,335 [INFO] graph - route: qt -> summarizer
2025-10-15 16:24:12,336 [INFO] rag.summarizer - prompt_chars=970
2025-10-15 16:24:12,336 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-15 16:24:17,233 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-15 16:24:17,234 [INFO] app - Program finished | run_id=20251015-162355
2025-10-20 15:33:41,020 [INFO] app - Program started | run_id=20251020-153341 | output_dir=F:\BiShe_02\output
2025-10-20 15:35:52,870 [INFO] graph - ENTER node=pre | raw_len=28
2025-10-20 15:35:52,870 [INFO] node.preprocess - start preprocess | raw=run eif in \data\SKAB\valve1
2025-10-20 15:35:52,987 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-20 15:35:52,987 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-20 15:35:52,987 [INFO] node.intent - intent.run | mode=llm
2025-10-20 15:35:59,361 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-20 15:35:59,367 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-20 15:35:59,368 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['EIF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-20 15:35:59,370 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-20 15:35:59,370 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-20 15:36:01,251 [INFO] rag.kb - KB built | docs=40
2025-10-20 15:36:01,265 [INFO] rag.kb - KB search | q_len=37 | top_k=8
2025-10-20 15:36:01,265 [INFO] graph - node=kb | snippets=8
2025-10-20 15:36:01,266 [INFO] graph - route: kb -> anomaly
2025-10-20 15:36:01,267 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-10-20 15:36:01,362 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-10-20 15:36:01,362 [INFO] rag.anomaly - algorithms | selected=['EIF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-10-20 15:36:01,617 [INFO] rag.anomaly - best algo=EIF
2025-10-20 15:36:03,270 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_4.xlsx | sheets=2
2025-10-20 15:36:08,401 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_4_pr_curve.png | f1=output\valve1_anomaly_results_4_f1_curve.png | roc=output\valve1_anomaly_results_4_roc_curve.png
2025-10-20 15:36:08,405 [INFO] rag.summarizer - prompt_chars=735
2025-10-20 15:36:08,405 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-20 15:36:15,437 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-20 15:36:15,441 [INFO] app - Program finished | run_id=20251020-153341
2025-10-20 15:36:50,644 [INFO] app - Program started | run_id=20251020-153650 | output_dir=F:\BiShe_02\output
2025-10-20 15:36:57,308 [INFO] graph - ENTER node=pre | raw_len=36
2025-10-20 15:36:57,309 [INFO] node.preprocess - start preprocess | raw=run LOF on files in data\SKAB\valve1
2025-10-20 15:36:57,381 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-20 15:36:57,381 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-20 15:36:57,383 [INFO] node.intent - intent.run | mode=llm
2025-10-20 15:37:00,146 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-20 15:37:00,150 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-20 15:37:00,151 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['LOF'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-20 15:37:00,152 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-20 15:37:00,153 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-20 15:37:02,179 [INFO] rag.kb - KB built | docs=40
2025-10-20 15:37:02,191 [INFO] rag.kb - KB search | q_len=45 | top_k=8
2025-10-20 15:37:02,192 [INFO] graph - node=kb | snippets=8
2025-10-20 15:37:02,192 [INFO] graph - route: kb -> anomaly
2025-10-20 15:37:02,194 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-10-20 15:37:02,296 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-10-20 15:37:02,296 [INFO] rag.anomaly - algorithms | selected=['LOF'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-10-20 15:37:04,306 [INFO] rag.anomaly - best algo=LOF
2025-10-20 15:37:05,926 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_5.xlsx | sheets=2
2025-10-20 15:37:09,909 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_5_pr_curve.png | f1=output\valve1_anomaly_results_5_f1_curve.png | roc=output\valve1_anomaly_results_5_roc_curve.png
2025-10-20 15:37:09,914 [INFO] rag.summarizer - prompt_chars=743
2025-10-20 15:37:09,915 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-20 15:37:17,042 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-20 15:37:17,043 [INFO] app - Program finished | run_id=20251020-153650
2025-10-20 15:37:59,220 [INFO] app - Program started | run_id=20251020-153759 | output_dir=F:\BiShe_02\output
2025-10-20 15:38:07,157 [INFO] graph - ENTER node=pre | raw_len=48
2025-10-20 15:38:07,158 [INFO] node.preprocess - start preprocess | raw=run autoencoder on all files in data\SKAB\valve1
2025-10-20 15:38:07,228 [INFO] node.preprocess - preprocess | SKAB dir=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-20 15:38:07,229 [INFO] graph - EXIT  node=pre | csv_path=F:\BiShe_02\data\SKAB\valve1 | cols=11
2025-10-20 15:38:07,230 [INFO] node.intent - intent.run | mode=llm
2025-10-20 15:38:10,138 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-20 15:38:10,142 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['AE'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-20 15:38:10,142 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['AE'] csv=F:\BiShe_02\data\SKAB\valve1
2025-10-20 15:38:10,144 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-20 15:38:10,144 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-20 15:38:12,421 [INFO] rag.kb - KB built | docs=40
2025-10-20 15:38:12,433 [INFO] rag.kb - KB search | q_len=57 | top_k=8
2025-10-20 15:38:12,434 [INFO] graph - node=kb | snippets=8
2025-10-20 15:38:12,434 [INFO] graph - route: kb -> anomaly
2025-10-20 15:38:12,435 [INFO] rag.anomaly - anomaly.benchmark | path=F:\BiShe_02\data\SKAB\valve1 | top_q=0.020
2025-10-20 15:38:12,527 [INFO] rag.anomaly - dataset | rows=18162 cols(total)=11 cols(numeric)=8 has_y=True
2025-10-20 15:38:12,527 [INFO] rag.anomaly - algorithms | selected=['AE'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-10-20 15:38:12,564 [INFO] ad - AE.build | input_dim=7 | cfg=custom
2025-10-20 15:38:32,084 [INFO] rag.anomaly - best algo=AE
2025-10-20 15:38:33,668 [INFO] rag.anomaly - excel saved -> output\valve1_anomaly_results_6.xlsx | sheets=2
2025-10-20 15:38:37,709 [INFO] rag.anomaly - plots saved | pr=output\valve1_anomaly_results_6_pr_curve.png | f1=output\valve1_anomaly_results_6_f1_curve.png | roc=output\valve1_anomaly_results_6_roc_curve.png
2025-10-20 15:38:37,713 [INFO] rag.summarizer - prompt_chars=755
2025-10-20 15:38:37,713 [INFO] rag.summarizer - summarizer.call | model=qwen-plus | url=https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
2025-10-20 15:38:43,412 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-20 15:38:43,414 [INFO] app - Program finished | run_id=20251020-153759
2025-10-20 15:39:18,409 [INFO] app - Program started | run_id=20251020-153918 | output_dir=F:\BiShe_02\output
2025-10-20 15:39:22,102 [INFO] graph - ENTER node=pre | raw_len=6
2025-10-20 15:39:22,102 [INFO] node.preprocess - start preprocess | raw=run AE
2025-10-20 15:39:22,121 [INFO] node.preprocess - preprocess | default_file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-20 15:39:22,121 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-20 15:39:22,122 [INFO] node.intent - intent.run | mode=llm
2025-10-20 15:39:23,896 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-20 15:39:23,901 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['AE'] csv=data\hybrid_manufacturing_categorical.csv
2025-10-20 15:39:23,901 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['AE'] csv=data\hybrid_manufacturing_categorical.csv
2025-10-20 15:39:23,903 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-20 15:39:23,903 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-20 15:39:25,805 [INFO] rag.kb - KB built | docs=42
2025-10-20 15:39:25,815 [INFO] rag.kb - KB search | q_len=6 | top_k=8
2025-10-20 15:39:25,816 [INFO] graph - node=kb | snippets=8
2025-10-20 15:39:25,816 [INFO] graph - route: kb -> anomaly
2025-10-20 15:39:25,818 [INFO] rag.anomaly - anomaly.benchmark | path=data\hybrid_manufacturing_categorical.csv | top_q=0.020
2025-10-20 15:39:25,829 [INFO] rag.anomaly - dataset | rows=1000 cols(total)=13 cols(numeric)=4 has_y=False
2025-10-20 15:39:25,829 [INFO] rag.anomaly - algorithms | selected=['AE'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-10-20 15:39:52,678 [INFO] app - Program started | run_id=20251020-153952 | output_dir=F:\BiShe_02\output
2025-10-20 15:40:06,261 [INFO] graph - ENTER node=pre | raw_len=15
2025-10-20 15:40:06,261 [INFO] node.preprocess - start preprocess | raw=run autoencoder
2025-10-20 15:40:06,276 [INFO] node.preprocess - preprocess | default_file=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-20 15:40:06,277 [INFO] graph - EXIT  node=pre | csv_path=data\hybrid_manufacturing_categorical.csv | cols=13
2025-10-20 15:40:06,278 [INFO] node.intent - intent.run | mode=llm
2025-10-20 15:40:09,363 [INFO] httpx - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-20 15:40:09,367 [INFO] node.intent - intent.out | need_qt=False need_anomaly=True algos=['AE'] csv=data\hybrid_manufacturing_categorical.csv
2025-10-20 15:40:09,368 [INFO] graph - node=intent | need_qt=False need_anomaly=True algos=['AE'] csv=data\hybrid_manufacturing_categorical.csv
2025-10-20 15:40:09,369 [INFO] sentence_transformers.SentenceTransformer - Use pytorch device_name: cpu
2025-10-20 15:40:09,369 [INFO] sentence_transformers.SentenceTransformer - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-10-20 15:40:11,622 [INFO] rag.kb - KB built | docs=42
2025-10-20 15:40:11,633 [INFO] rag.kb - KB search | q_len=15 | top_k=8
2025-10-20 15:40:11,633 [INFO] graph - node=kb | snippets=8
2025-10-20 15:40:11,634 [INFO] graph - route: kb -> anomaly
2025-10-20 15:40:11,635 [INFO] rag.anomaly - anomaly.benchmark | path=data\hybrid_manufacturing_categorical.csv | top_q=0.020
2025-10-20 15:40:11,647 [INFO] rag.anomaly - dataset | rows=1000 cols(total)=13 cols(numeric)=4 has_y=False
2025-10-20 15:40:11,647 [INFO] rag.anomaly - algorithms | selected=['AE'] (empty means all=['EIF', 'LOF', 'COPOD', 'INNE', 'OCSVM', 'AE'])
2025-10-28 11:41:24,305 [INFO] app - Program started | run_id=20251028-114124 | output_dir=F:\BiShe_02\output
